{"version":3,"file":"doboard-widget-bundle.min.js","sources":["doboard-widget-bundle.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i.return && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, catch: function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar createTaskDoboard = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(taskDetails) {\n    var response;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return fetch('https://api.yourtaskboard.com/tasks', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(taskDetails)\n          });\n        case 2:\n          response = _context.sent;\n          if (response.ok) {\n            _context.next = 5;\n            break;\n          }\n          throw new Error('Failed to create task');\n        case 5:\n          _context.next = 7;\n          return response.json();\n        case 7:\n          return _context.abrupt(\"return\", _context.sent);\n        case 8:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function createTaskDoboard(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar getTasksDoboard = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n    var response;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return fetch('https://api.yourtaskboard.com/tasks');\n        case 2:\n          response = _context2.sent;\n          if (response.ok) {\n            _context2.next = 5;\n            break;\n          }\n          throw new Error('Failed to fetch tasks');\n        case 5:\n          _context2.next = 7;\n          return response.json();\n        case 7:\n          return _context2.abrupt(\"return\", _context2.sent);\n        case 8:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function getTasksDoboard() {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar createTaskLS = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(taskDetails) {\n    var keyTask;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          keyTask = 'doboard_task-' + Date.now();\n          localStorage.setItem(keyTask, JSON.stringify(taskDetails));\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function createTaskLS(_x2) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nfunction getTasksLS() {\n  var tasks = [];\n  var i = 0;\n  for (var key in localStorage) {\n    if (key.indexOf(\"doboard_task-\") == 0) {\n      tasks[i] = JSON.parse(localStorage[key]);\n      i++;\n    }\n  }\n  ;\n  return tasks;\n}\n;\n/**\n * Widget class to create a task widget\n */\nvar CleanTalkWidgetDoboard = /*#__PURE__*/function () {\n  /**\n   * Constructor\n   */\n  function CleanTalkWidgetDoboard(selectedData, type) {\n    _classCallCheck(this, CleanTalkWidgetDoboard);\n    _defineProperty(this, \"selectedText\", '');\n    _defineProperty(this, \"selectedData\", {});\n    _defineProperty(this, \"widgetElement\", null);\n    this.selectedData = selectedData;\n    this.selectedText = selectedData.selectedText;\n    this.init(type);\n  }\n\n  /**\n   * Initialize the widget\n   */\n  return _createClass(CleanTalkWidgetDoboard, [{\n    key: \"init\",\n    value: (function () {\n      var _init = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(type) {\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return this.createWidgetElement(type);\n            case 2:\n              this.widgetElement = _context4.sent;\n              this.taskDescription = this.widgetElement.querySelector('#doboard_task_description');\n              this.submitButton = this.widgetElement.querySelector('#doboard_task_widget-submit_button');\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function init(_x3) {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }())\n  }, {\n    key: \"bindAuthEvents\",\n    value: function bindAuthEvents() {\n      var _this = this;\n      var authWidget = document.querySelector('.doboard_task_widget-authorization');\n      if (authWidget) {\n        var loginInput = document.getElementById('doboard_task_login');\n        var passwordInput = document.getElementById('doboard_task_password');\n        var submitButton = document.getElementById('doboard_task_widget-submit_button');\n        submitButton.addEventListener('click', function () {\n          var login = loginInput.value;\n          var password = passwordInput.value;\n          console.log('Login:', login);\n          console.log('Password:', password);\n\n          // Устанавливаем куку авторизации\n          document.cookie = \"user_authorized=true; path=/\";\n          console.log('Authorization cookie set.');\n\n          // Закрываем виджет после авторизации\n          _this.hide();\n        });\n      }\n    }\n\n    /**\n     * Привязка событий для создания задачи\n     */\n  }, {\n    key: \"bindCreateTaskEvents\",\n    value: function bindCreateTaskEvents() {\n      var _this2 = this;\n      var submitButton = document.getElementById('doboard_task_widget-submit_button');\n      if (submitButton) {\n        submitButton.addEventListener('click', function () {\n          var taskTitle = document.getElementById('doboard_task_widget-title').value;\n          var taskDescription = document.getElementById('doboard_task_widget-description').value;\n          var typeSend = 'private';\n          var taskDetails = {\n            taskTitle: taskTitle,\n            taskDescription: taskDescription,\n            typeSend: typeSend,\n            selectedData: _this2.selectedData\n          };\n          _this2.submitTask(taskDetails);\n          _this2.selectedData = {};\n        });\n      }\n    }\n\n    /**\n     * Create widget element\n     * @return {HTMLElement} widget element\n     */\n  }, {\n    key: \"createWidgetElement\",\n    value: (function () {\n      var _createWidgetElement = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(type) {\n        var _themeData,\n          _this3 = this,\n          _document$querySelect;\n        var widgetContainer, tasks, i, elTask, taskTitle, taskDescription, currentPageURL, selectedPageURL, taskSelectedData, taskElement, text, start, end, selectedText, beforeText, afterText;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              /*let auth = true;\n              if (!auth) {\n                  type = 'auth';\n              }*/\n              widgetContainer = document.querySelector('.doboard_task_widget') ? document.querySelector('.doboard_task_widget') : document.createElement('div');\n              widgetContainer.className = 'doboard_task_widget';\n              widgetContainer.innerHTML = '';\n              _context5.t0 = type;\n              _context5.next = _context5.t0 === 'create_task' ? 6 : _context5.t0 === 'wrap' ? 9 : _context5.t0 === 'auth' ? 12 : _context5.t0 === 'task_list' ? 15 : 18;\n              break;\n            case 6:\n              templateName = 'create_task';\n              variables = {\n                selectedText: this.selectedText\n              };\n              return _context5.abrupt(\"break\", 19);\n            case 9:\n              templateName = 'wrap';\n              variables = {\n                themeUrl: ((_themeData = themeData) === null || _themeData === void 0 ? void 0 : _themeData.themeUrl) || ''\n              };\n              return _context5.abrupt(\"break\", 19);\n            case 12:\n              templateName = 'auth';\n              variables = {};\n              return _context5.abrupt(\"break\", 19);\n            case 15:\n              templateName = 'task_list';\n              variables = {};\n              return _context5.abrupt(\"break\", 19);\n            case 18:\n              return _context5.abrupt(\"break\", 19);\n            case 19:\n              _context5.next = 21;\n              return this.loadTemplate(templateName, variables);\n            case 21:\n              widgetContainer.innerHTML = _context5.sent;\n              document.body.appendChild(widgetContainer);\n              _context5.t1 = type;\n              _context5.next = _context5.t1 === 'create_task' ? 26 : _context5.t1 === 'wrap' ? 28 : _context5.t1 === 'auth' ? 30 : _context5.t1 === 'task_list' ? 32 : 36;\n              break;\n            case 26:\n              this.bindCreateTaskEvents();\n              /*document.getElementById('doboard_task_widget-submit_button').addEventListener('click', () => {\n                  const taskTitle = document.getElementById('doboard_task_widget-title').value;\n                  const taskDescription = document.getElementById('doboard_task_widget-description').value;\n                  const typeSend = 'private';\n                  const taskDetails = {\n                      taskTitle: taskTitle,\n                      taskDescription: taskDescription,\n                      typeSend: typeSend,\n                      selectedData: this.selectedData,\n                  };\n                  this.submitTask(taskDetails);\n                  this*/\n              return _context5.abrupt(\"break\", 37);\n            case 28:\n              document.querySelector('.doboard_task_widget-wrap').addEventListener('click', function () {\n                if (!isUserAuthorized()) {\n                  _this3.createWidgetElement('auth');\n                } else {\n                  _this3.createWidgetElement('task_list');\n                }\n              });\n              return _context5.abrupt(\"break\", 37);\n            case 30:\n              this.bindAuthEvents(); // Привязываем события для авторизации\n              return _context5.abrupt(\"break\", 37);\n            case 32:\n              tasks = this.getTasks();\n              for (i = 0; i < tasks.length; i++) {\n                elTask = tasks[i];\n                taskTitle = elTask.taskTitle;\n                taskDescription = elTask.taskDescription;\n                currentPageURL = elTask.selectedData.pageURL;\n                selectedPageURL = window.location.href; //console.log(elTask);\n                if (currentPageURL == selectedPageURL) {\n                  document.querySelector(\".doboard_task_widget-task_list-container\").innerHTML += \"\\n                        <div class=\\\"doboard_task_widget-task_row\\\">\\n                            <div class=\\\"doboard_task_widget-task_title\\\">\\n                                <span class=\\\"doboard_task_widget-task-text_bold\\\">Title: </span>\\n                                <span>\".concat(taskTitle, \"</span>\\n                            </div>\\n                            <div class=\\\"doboard_task_widget-task_description\\\">\\n                                <span class=\\\"doboard_task_widget-task-text_bold\\\">Description: </span>\\n                                <span>\").concat(taskDescription, \"</span>\\n                            </div>\\n                        </div>\\n                        \");\n                  taskSelectedData = elTask.selectedData;\n                  taskElement = taskAnalysis(taskSelectedData);\n                  if (taskElement) {\n                    if (taskSelectedData.startSelectPosition && taskSelectedData.endSelectPosition) {\n                      text = taskElement.innerHTML;\n                      start = taskSelectedData.startSelectPosition;\n                      end = taskSelectedData.endSelectPosition;\n                      selectedText = text.substring(start, end);\n                      beforeText = text.substring(0, start);\n                      afterText = text.substring(end);\n                      taskElement.innerHTML = beforeText + '<span class=\"doboard_task_widget-text_selection\">' + selectedText + '</span>' + afterText;\n                    }\n                  }\n                }\n              }\n              ;\n              return _context5.abrupt(\"break\", 37);\n            case 36:\n              return _context5.abrupt(\"break\", 37);\n            case 37:\n              ((_document$querySelect = document.querySelector('.doboard_task_widget-close_btn')) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.addEventListener('click', function () {\n                _this3.hide();\n              })) || '';\n              return _context5.abrupt(\"return\", widgetContainer);\n            case 39:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this);\n      }));\n      function createWidgetElement(_x4) {\n        return _createWidgetElement.apply(this, arguments);\n      }\n      return createWidgetElement;\n    }()\n    /**\n     * Load the template\n     * @param {string} templateName\n     * @param {object} variables\n     * @return {string} template\n     */\n    )\n  }, {\n    key: \"loadTemplate\",\n    value: (function () {\n      var _loadTemplate = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(templateName) {\n        var variables,\n          response,\n          template,\n          _i,\n          _Object$entries,\n          _Object$entries$_i,\n          key,\n          value,\n          placeholder,\n          _args6 = arguments;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              variables = _args6.length > 1 && _args6[1] !== undefined ? _args6[1] : {};\n              _context6.next = 3;\n              return fetch(\"/wp-content/themes/twentytwentyfourspotfix/spotfix/templates/\".concat(templateName, \".html\"));\n            case 3:\n              response = _context6.sent;\n              _context6.next = 6;\n              return response.text();\n            case 6:\n              template = _context6.sent;\n              for (_i = 0, _Object$entries = Object.entries(variables); _i < _Object$entries.length; _i++) {\n                _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2), key = _Object$entries$_i[0], value = _Object$entries$_i[1];\n                placeholder = \"{{\".concat(key, \"}}\");\n                template = template.replaceAll(placeholder, value);\n              }\n              return _context6.abrupt(\"return\", template);\n            case 9:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6);\n      }));\n      function loadTemplate(_x5) {\n        return _loadTemplate.apply(this, arguments);\n      }\n      return loadTemplate;\n    }()\n    /**\n     * Bind events to the widget\n     */\n    /*bindEvents() {\n        this.submitButton.addEventListener('click', () => this.submitTask());\n    }*/\n    /**\n     * Submit the task\n     */\n    )\n  }, {\n    key: \"submitTask\",\n    value: function submitTask(taskDetails) {\n      if (taskDetails && taskDetails.taskTitle) {\n        this.createTask(taskDetails);\n        //this.taskInput.value = ''; нужна очистка полей\n        this.hide();\n      } else {\n        alert('Please enter task title.');\n      }\n    }\n\n    /**\n     * Create a task\n     * @param {*} taskDetails\n     */\n  }, {\n    key: \"createTask\",\n    value: function createTask(taskDetails) {\n      // Call the API to create a task\n      // This function should be implemented in api.js\n      if (taskDetails.typeSend == 'private') {\n        createTaskLS(taskDetails);\n      } else {\n        createTaskDoboard(taskDetails);\n      }\n    }\n\n    /**\n     * Get the task\n     * @return {[]}\n     */\n  }, {\n    key: \"getTasks\",\n    value: function getTasks() {\n      //let tasksDoboard = getTasksDoboard();\n      var tasksLS = getTasksLS();\n      return tasksLS;\n    }\n\n    /**\n     * Hide the widget\n     */\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.createWidgetElement('wrap');\n      var textSelectionclassName = 'doboard_task_widget-text_selection';\n      var spans = document.querySelectorAll('.' + textSelectionclassName);\n      spans.forEach(function (span) {\n        var parent = span.parentNode;\n        while (span.firstChild) {\n          parent.insertBefore(span.firstChild, span);\n        }\n        parent.removeChild(span);\n      });\n    }\n  }]);\n}();\nvar selectedData = {};\n\n/*let cssLink = document.createElement('link');\ncssLink.rel = 'stylesheet';\ncssLink.href = '/spotfix/styles/doboard-widget.css';\ndocument.head.appendChild(cssLink);*/\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  // Проверяем, авторизован ли пользователь\n  if (!isUserAuthorized()) {\n    // Если пользователь не авторизован, открываем интерфейс авторизации\n    new CleanTalkWidgetDoboard({}, 'auth');\n  } else {\n    // Если пользователь авторизован, открываем интерфейс wrap или другой\n    new CleanTalkWidgetDoboard({}, 'wrap');\n  }\n});\nvar widgetTimeout;\ndocument.addEventListener('selectionchange', function (e) {\n  if (widgetTimeout) {\n    clearTimeout(widgetTimeout);\n  }\n  widgetTimeout = setTimeout(function () {\n    var selection = window.getSelection();\n    if (selection.type === 'Range') {\n      var _selectedData = getSelectedData(selection);\n      var widgetExist = document.querySelector('.task-widget');\n      if (!isUserAuthorized()) {\n        openWidget(_selectedData, widgetExist, 'auth');\n      } else {\n        openWidget(_selectedData, widgetExist, 'create_task');\n      }\n    }\n  }, 1000);\n});\n\n/**\n * Open the widget to create a task.\n * @param {*} selectedText\n * @param {*} widgetExist\n * @param {*} type\n */\nfunction openWidget(selectedData, widgetExist, type) {\n  if (selectedData && !widgetExist) {\n    new CleanTalkWidgetDoboard(selectedData, type);\n  }\n}\n\n/**\n * Get the selected data from the DOM\n * @param {Selection} selectedData\n * @returns {Object}\n */\nfunction getSelectedData(selectedData) {\n  var pageURL = window.location.href;\n  var selectedText = selectedData.toString();\n  return {\n    startSelectPosition: selectedData.anchorOffset,\n    endSelectPosition: selectedData.focusOffset,\n    selectedText: selectedText,\n    pageURL: pageURL,\n    nodePath: calculateNodePath(selectedData.focusNode.parentNode)\n  };\n}\n\n/**\n * Calculate the path of a DOM node\n *\n * @param {Node} node\n * @return {int[]}\n */\nfunction calculateNodePath(node) {\n  var path = [];\n  while (node) {\n    var index = 0;\n    var sibling = node.previousSibling;\n    while (sibling) {\n      if (sibling.nodeType === 1) {\n        index++;\n      }\n      sibling = sibling.previousSibling;\n    }\n    path.unshift(index);\n    node = node.parentNode;\n  }\n\n  // Hard fix - need to remove first element to work correctly\n  path.shift();\n  return path;\n}\n\n/**\n * Retrieve a DOM node from a path\n *\n * @param {int[]} path\n * @return {*|null}\n */\nfunction retrieveNodeFromPath(path) {\n  // @ToDo check if the path is correct\n  if (!path) {\n    return null;\n  }\n  var node = document;\n  for (var i = 0; i < path.length; i++) {\n    node = node.children[path[i]];\n    if (!node) {\n      return null;\n    }\n  }\n  return node;\n}\n\n/**\n * Analyze the task selected data\n * @param {Object} taskSelectedData\n * @return {Element|null}\n */\nfunction taskAnalysis(taskSelectedData) {\n  var nodePath = taskSelectedData.nodePath;\n  return retrieveNodeFromPath(nodePath);\n}\n\n/**\n * Get the value of a cookie by name\n * @param {string} name\n * @return {string|null}\n */\nfunction getCookie(name) {\n  var value = \"; \".concat(document.cookie);\n  var parts = value.split(\"; \".concat(name, \"=\"));\n  if (parts.length === 2) {\n    return parts.pop().split(';').shift();\n  }\n  return null;\n}\n\n/**\n * Check if the user is authorized\n * @return {boolean}\n */\nfunction isUserAuthorized() {\n  var authCookie = getCookie('user_authorized'); // Замените 'user_authorized' на имя вашей куки\n  return authCookie === 'true'; // Предполагается, что кука содержит 'true' для авторизованных пользователей\n}"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","_slicedToArray","r","e","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","t","_arrayLikeToArray","toString","call","slice","name","Array","from","test","length","n","l","i","u","f","next","Object","done","push","value","return","isArray","_classCallCheck","_defineProperties","enumerable","configurable","writable","defineProperty","_toPropertyKey","key","_createClass","_defineProperty","_toPrimitive","toPrimitive","String","Number","_regeneratorRuntime","hasOwnProperty","asyncIterator","toStringTag","c","h","Generator","create","Context","Error","method","arg","delegate","d","s","type","sent","_sent","dispatchException","abrupt","wrap","GeneratorFunction","GeneratorFunctionPrototype","p","this","getPrototypeOf","y","x","v","g","forEach","_invoke","AsyncIterator","resolve","__await","then","w","tryEntries","m","reset","isNaN","displayName","isGeneratorFunction","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","unshift","pop","values","prev","charAt","stop","rval","complete","finish","catch","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","createTaskDoboard","_ref","_callee","taskDetails","response","_context","fetch","headers","Content-Type","body","JSON","stringify","ok","json","_x","getTasksDoboard","_ref2","_callee2","_context2","createTaskLS","_ref3","_callee3","keyTask","_context3","Date","now","localStorage","setItem","_x2","getTasksLS","tasks","indexOf","parse","widgetTimeout","CleanTalkWidgetDoboard","selectedData","selectedText","init","_init","_callee4","_context4","createWidgetElement","widgetElement","taskDescription","querySelector","submitButton","_x3","loginInput","passwordInput","_this","document","getElementById","addEventListener","login","password","console","log","cookie","hide","_this2","taskTitle","typeSend","submitTask","_createWidgetElement","_callee5","_document$querySelect","widgetContainer","taskElement","end","beforeText","afterText","_this3","_context5","createElement","className","innerHTML","t0","templateName","variables","themeUrl","_themeData","themeData","loadTemplate","appendChild","t1","bindCreateTaskEvents","isUserAuthorized","bindAuthEvents","getTasks","elTask","currentPageURL","pageURL","selectedPageURL","window","location","href","concat","taskSelectedData","taskAnalysis","startSelectPosition","endSelectPosition","text","start","substring","_x4","_loadTemplate","_callee6","template","_i","_Object$entries","placeholder","_args6","_context6","undefined","entries","_Object$entries$_i","replaceAll","_x5","createTask","alert","querySelectorAll","span","parent","parentNode","firstChild","insertBefore","removeChild","openWidget","widgetExist","getSelectedData","anchorOffset","focusOffset","nodePath","calculateNodePath","focusNode","node","path","index","sibling","previousSibling","nodeType","shift","retrieveNodeFromPath","children","getCookie","parts","split","clearTimeout","setTimeout","selection","getSelection","_selectedData"],"mappings":"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"}