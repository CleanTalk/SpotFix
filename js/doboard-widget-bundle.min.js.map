{"version":3,"file":"doboard-widget-bundle.min.js","sources":["doboard-widget-bundle.js"],"sourcesContent":["\"use strict\";\n\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t.return || t.return(); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator.return && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, catch: function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar DOBOARD_API_URL = 'https://api-next.doboard.com';\nvar createTaskDoboard = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(sessionId, taskDetails) {\n    var accountId, formData, response, responseBody;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          accountId = taskDetails.accountId;\n          formData = new FormData();\n          formData.append('session_id', sessionId);\n          formData.append('project_token', taskDetails.projectToken);\n          formData.append('project_id', taskDetails.projectId);\n          formData.append('user_id', localStorage.getItem('spotfix_user_id'));\n          formData.append('name', taskDetails.taskTitle);\n          formData.append('comment', taskDetails.taskDescription);\n          formData.append('meta', taskDetails.taskMeta);\n          _context.next = 11;\n          return fetch(DOBOARD_API_URL + '/' + accountId + '/task_add', {\n            method: 'POST',\n            body: formData\n          });\n        case 11:\n          response = _context.sent;\n          if (response.ok) {\n            _context.next = 14;\n            break;\n          }\n          throw new Error('Failed to create task');\n        case 14:\n          _context.next = 16;\n          return response.json();\n        case 16:\n          responseBody = _context.sent;\n          if (!(!responseBody || !responseBody.data)) {\n            _context.next = 19;\n            break;\n          }\n          throw new Error('Invalid response from server');\n        case 19:\n          if (!(responseBody.data.operation_status === 'FAILED')) {\n            _context.next = 21;\n            break;\n          }\n          throw new Error(responseBody.data.operation_message);\n        case 21:\n          if (!(responseBody.data.operation_status === 'SUCCESS')) {\n            _context.next = 23;\n            break;\n          }\n          return _context.abrupt(\"return\", {\n            taskId: responseBody.data.task_id,\n            isPublic: 1 //todo MOCK!\n          });\n        case 23:\n          throw new Error('Unknown error occurred during creating task');\n        case 24:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function createTaskDoboard(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar createTaskCommentDoboard = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(accountId, sessionId, taskId, comment, projectToken) {\n    var status,\n      response,\n      responseBody,\n      _args2 = arguments;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          status = _args2.length > 5 && _args2[5] !== undefined ? _args2[5] : 'ACTIVE';\n          _context2.next = 3;\n          return fetch(DOBOARD_API_URL + '/' + accountId + '/comment_add' + '?session_id=' + sessionId + '&task_id=' + taskId + '&comment=' + comment + '&project_token=' + projectToken + '&status=' + status, {\n            method: 'GET'\n          });\n        case 3:\n          response = _context2.sent;\n          if (response.ok) {\n            _context2.next = 6;\n            break;\n          }\n          throw new Error('Failed to create task comment');\n        case 6:\n          _context2.next = 8;\n          return response.json();\n        case 8:\n          responseBody = _context2.sent;\n          if (!(!responseBody || !responseBody.data)) {\n            _context2.next = 11;\n            break;\n          }\n          throw new Error('Invalid response from server');\n        case 11:\n          if (!(responseBody.data.operation_status === 'FAILED')) {\n            _context2.next = 13;\n            break;\n          }\n          throw new Error(responseBody.data.operation_message);\n        case 13:\n          if (!(responseBody.data.operation_status === 'SUCCESS')) {\n            _context2.next = 15;\n            break;\n          }\n          return _context2.abrupt(\"return\", {\n            commentId: responseBody.data.comment_id\n          });\n        case 15:\n          throw new Error('Unknown error occurred during creating task comment');\n        case 16:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function createTaskCommentDoboard(_x3, _x4, _x5, _x6, _x7) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar _registerUser = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(projectToken, accountId, email, nickname) {\n    var formData, response, responseBody;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          formData = new FormData();\n          formData.append('project_token', projectToken);\n          formData.append('account_id', accountId);\n          if (email && nickname) {\n            formData.append('email', email);\n            formData.append('nickname', nickname);\n          }\n          _context3.next = 6;\n          return fetch(DOBOARD_API_URL + '/user_registration', {\n            method: 'POST',\n            body: formData\n          });\n        case 6:\n          response = _context3.sent;\n          if (response.ok) {\n            _context3.next = 9;\n            break;\n          }\n          throw new Error('Registration failed');\n        case 9:\n          _context3.next = 11;\n          return response.json();\n        case 11:\n          responseBody = _context3.sent;\n          if (!(!responseBody || !responseBody.data)) {\n            _context3.next = 14;\n            break;\n          }\n          throw new Error('Invalid response from server');\n        case 14:\n          if (!(responseBody.data.operation_status === 'FAILED')) {\n            _context3.next = 16;\n            break;\n          }\n          throw new Error(responseBody.data.operation_message);\n        case 16:\n          if (!(responseBody.data.operation_status === 'SUCCESS')) {\n            _context3.next = 20;\n            break;\n          }\n          if (!(responseBody.data.user_email_confirmed === 1)) {\n            _context3.next = 19;\n            break;\n          }\n          return _context3.abrupt(\"return\", {\n            accountExists: true\n          });\n        case 19:\n          return _context3.abrupt(\"return\", {\n            sessionId: responseBody.data.session_id,\n            userId: responseBody.data.user_id,\n            email: responseBody.data.email\n          });\n        case 20:\n          throw new Error('Unknown error occurred during registration');\n        case 21:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function registerUser(_x8, _x9, _x10, _x11) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar _loginUser = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(email, password) {\n    var formData, response, responseBody;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          formData = new FormData();\n          formData.append('email', email);\n          formData.append('password', password);\n          _context4.next = 5;\n          return fetch(DOBOARD_API_URL + '/user_authorize', {\n            method: 'POST',\n            body: formData\n          });\n        case 5:\n          response = _context4.sent;\n          if (response.ok) {\n            _context4.next = 8;\n            break;\n          }\n          throw new Error('Authorization failed');\n        case 8:\n          _context4.next = 10;\n          return response.json();\n        case 10:\n          responseBody = _context4.sent;\n          if (!(!responseBody || !responseBody.data)) {\n            _context4.next = 13;\n            break;\n          }\n          throw new Error('Invalid response from server');\n        case 13:\n          if (!(responseBody.data.operation_status === 'FAILED')) {\n            _context4.next = 15;\n            break;\n          }\n          throw new Error(responseBody.data.operation_message);\n        case 15:\n          if (!(responseBody.data.operation_status === 'SUCCESS')) {\n            _context4.next = 17;\n            break;\n          }\n          return _context4.abrupt(\"return\", {\n            sessionId: responseBody.data.session_id,\n            userId: responseBody.data.user_id,\n            email: email\n          });\n        case 17:\n          throw new Error('Unknown error occurred during registration');\n        case 18:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function loginUser(_x12, _x13) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar getTasksDoboard = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(projectToken, sessionId, accountId, projectId, userId) {\n    var formData, response, responseBody;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          formData = new FormData();\n          formData.append('project_token', projectToken);\n          formData.append('session_id', sessionId);\n          formData.append('project_id', projectId);\n          formData.append('status', 'ACTIVE');\n          if (userId) {\n            formData.append('user_id', userId);\n          }\n          _context5.next = 8;\n          return fetch(DOBOARD_API_URL + '/' + accountId + '/task_get', {\n            method: 'POST',\n            body: formData\n          });\n        case 8:\n          response = _context5.sent;\n          if (response.ok) {\n            _context5.next = 11;\n            break;\n          }\n          throw new Error('Getting tasks failed');\n        case 11:\n          _context5.next = 13;\n          return response.json();\n        case 13:\n          responseBody = _context5.sent;\n          if (!(!responseBody || !responseBody.data)) {\n            _context5.next = 16;\n            break;\n          }\n          throw new Error('Invalid response from server');\n        case 16:\n          if (!(responseBody.data.operation_status === 'FAILED')) {\n            _context5.next = 18;\n            break;\n          }\n          throw new Error(responseBody.data.operation_message);\n        case 18:\n          if (!(responseBody.data.operation_status === 'SUCCESS')) {\n            _context5.next = 20;\n            break;\n          }\n          return _context5.abrupt(\"return\", responseBody.data.tasks.map(function (task) {\n            return {\n              taskId: task.task_id,\n              taskTitle: task.name,\n              taskLastUpdate: task.updated,\n              taskCreated: task.created,\n              taskCreatorTaskUser: task.creator_user_id,\n              taskMeta: task.meta\n            };\n          }));\n        case 20:\n          throw new Error('Unknown error occurred during getting tasks');\n        case 21:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return function getTasksDoboard(_x14, _x15, _x16, _x17, _x18) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar getTaskCommentsDoboard = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(taskId, sessionId, accountId, projectToken) {\n    var status,\n      response,\n      responseBody,\n      _args6 = arguments;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          status = _args6.length > 4 && _args6[4] !== undefined ? _args6[4] : 'ACTIVE';\n          _context6.next = 3;\n          return fetch(DOBOARD_API_URL + '/' + accountId + '/comment_get' + '?session_id=' + sessionId + '&status=' + status + '&task_id=' + taskId + '&project_token=' + projectToken, {\n            method: 'GET'\n          });\n        case 3:\n          response = _context6.sent;\n          if (response.ok) {\n            _context6.next = 6;\n            break;\n          }\n          throw new Error('Getting logs failed');\n        case 6:\n          _context6.next = 8;\n          return response.json();\n        case 8:\n          responseBody = _context6.sent;\n          if (!(!responseBody || !responseBody.data)) {\n            _context6.next = 11;\n            break;\n          }\n          throw new Error('Invalid response from server');\n        case 11:\n          if (!(responseBody.data.operation_status === 'FAILED')) {\n            _context6.next = 13;\n            break;\n          }\n          throw new Error(responseBody.data.operation_message);\n        case 13:\n          if (!(responseBody.data.operation_status === 'SUCCESS')) {\n            _context6.next = 15;\n            break;\n          }\n          return _context6.abrupt(\"return\", responseBody.data.comments.map(function (comment) {\n            return {\n              commentId: comment.comment_id,\n              userId: comment.user_id,\n              comment: comment.comment,\n              commentBody: comment.comment_text,\n              commentDate: comment.updated,\n              status: comment.status,\n              issueTitle: comment.task_name\n            };\n          }));\n        case 15:\n          throw new Error('Unknown error occurred during getting comments');\n        case 16:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6);\n  }));\n  return function getTaskCommentsDoboard(_x19, _x20, _x21, _x22) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nvar getUserDoboard = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(sessionId, projectToken, accountId) {\n    var response, responseBody;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return fetch(DOBOARD_API_URL + '/' + accountId + '/user_get' + '?session_id=' + sessionId + '&project_token=' + projectToken, {\n            method: 'GET'\n          });\n        case 2:\n          response = _context7.sent;\n          if (response.ok) {\n            _context7.next = 5;\n            break;\n          }\n          throw new Error('Getting user failed');\n        case 5:\n          _context7.next = 7;\n          return response.json();\n        case 7:\n          responseBody = _context7.sent;\n          if (responseBody) {\n            _context7.next = 10;\n            break;\n          }\n          throw new Error('Invalid response from server');\n        case 10:\n          if (!(responseBody.data && responseBody.data.operation_status)) {\n            _context7.next = 17;\n            break;\n          }\n          if (!(responseBody.data.operation_status === 'FAILED')) {\n            _context7.next = 13;\n            break;\n          }\n          throw new Error(responseBody.data.operation_message);\n        case 13:\n          if (!(responseBody.data.operation_status === 'SUCCESS')) {\n            _context7.next = 17;\n            break;\n          }\n          if (!Array.isArray(responseBody.data.users)) {\n            _context7.next = 16;\n            break;\n          }\n          return _context7.abrupt(\"return\", responseBody.data.users);\n        case 16:\n          return _context7.abrupt(\"return\", []);\n        case 17:\n          if (!responseBody.operation_status) {\n            _context7.next = 24;\n            break;\n          }\n          if (!(responseBody.operation_status === 'FAILED')) {\n            _context7.next = 20;\n            break;\n          }\n          throw new Error(responseBody.operation_message);\n        case 20:\n          if (!(responseBody.operation_status === 'SUCCESS')) {\n            _context7.next = 24;\n            break;\n          }\n          if (!Array.isArray(responseBody.users)) {\n            _context7.next = 23;\n            break;\n          }\n          return _context7.abrupt(\"return\", responseBody.users);\n        case 23:\n          return _context7.abrupt(\"return\", []);\n        case 24:\n          throw new Error('Unknown error occurred during getting user');\n        case 25:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7);\n  }));\n  return function getUserDoboard(_x23, _x24, _x25) {\n    return _ref7.apply(this, arguments);\n  };\n}();\nfunction getTaskFullDetails(_x26, _x27) {\n  return _getTaskFullDetails.apply(this, arguments);\n}\nfunction _getTaskFullDetails() {\n  _getTaskFullDetails = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee16(params, taskId) {\n    var sessionId, comments, users, lastComment, author, date, time, dt, avatarSrc, authorName;\n    return _regeneratorRuntime().wrap(function _callee16$(_context16) {\n      while (1) switch (_context16.prev = _context16.next) {\n        case 0:\n          sessionId = localStorage.getItem('spotfix_session_id');\n          _context16.next = 3;\n          return getTaskCommentsDoboard(taskId, sessionId, params.accountId, params.projectToken);\n        case 3:\n          comments = _context16.sent;\n          _context16.next = 6;\n          return getUserDoboard(sessionId, params.projectToken, params.accountId);\n        case 6:\n          users = _context16.sent;\n          // Last comment\n          lastComment = comments.length > 0 ? comments[0] : null; // Author of the last comment\n          author = null;\n          if (lastComment && users && users.length > 0) {\n            author = users.find(function (u) {\n              return String(u.user_id) === String(lastComment.userId);\n            });\n          }\n          // Format date\n          date = '', time = '';\n          if (lastComment) {\n            dt = formatDate(lastComment.commentDate);\n            date = dt.date;\n            time = dt.time;\n          }\n          // Вычисляем аватар и имя через отдельные функции\n          avatarSrc = getAvatarSrc(author);\n          authorName = getAuthorName(author);\n          return _context16.abrupt(\"return\", {\n            taskId: taskId,\n            taskAuthorAvatarImgSrc: avatarSrc,\n            taskAuthorName: authorName,\n            lastMessageText: lastComment ? lastComment.commentBody : 'No messages yet',\n            lastMessageTime: time,\n            issueTitle: comments.length > 0 ? comments[0].issueTitle : 'No Title',\n            issueComments: comments.sort(function (a, b) {\n              return new Date(a.commentDate) - new Date(b.commentDate);\n            }).map(function (comment) {\n              var _formatDate2 = formatDate(comment.commentDate),\n                date = _formatDate2.date,\n                time = _formatDate2.time;\n              var author = null;\n              if (users && users.length > 0) {\n                author = users.find(function (u) {\n                  return String(u.user_id) === String(comment.userId);\n                });\n              }\n              return {\n                commentAuthorAvatarSrc: getAvatarSrc(author),\n                commentAuthorName: getAuthorName(author),\n                commentBody: comment.commentBody,\n                commentDate: date,\n                commentTime: time,\n                commentUserId: comment.userId || 'Unknown User'\n              };\n            })\n          });\n        case 15:\n        case \"end\":\n          return _context16.stop();\n      }\n    }, _callee16);\n  }));\n  return _getTaskFullDetails.apply(this, arguments);\n}\nfunction handleCreateTask(_x28, _x29) {\n  return _handleCreateTask.apply(this, arguments);\n}\nfunction _handleCreateTask() {\n  _handleCreateTask = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee17(sessionId, taskDetails) {\n    var result;\n    return _regeneratorRuntime().wrap(function _callee17$(_context17) {\n      while (1) switch (_context17.prev = _context17.next) {\n        case 0:\n          _context17.prev = 0;\n          _context17.next = 3;\n          return createTaskDoboard(sessionId, taskDetails);\n        case 3:\n          result = _context17.sent;\n          if (!(result && result.taskId && taskDetails.taskDescription)) {\n            _context17.next = 7;\n            break;\n          }\n          _context17.next = 7;\n          return addTaskComment({\n            projectToken: taskDetails.projectToken,\n            accountId: taskDetails.accountId\n          }, result.taskId, taskDetails.taskDescription);\n        case 7:\n          return _context17.abrupt(\"return\", result);\n        case 10:\n          _context17.prev = 10;\n          _context17.t0 = _context17[\"catch\"](0);\n          throw _context17.t0;\n        case 13:\n        case \"end\":\n          return _context17.stop();\n      }\n    }, _callee17, null, [[0, 10]]);\n  }));\n  return _handleCreateTask.apply(this, arguments);\n}\nfunction addTaskComment(_x30, _x31, _x32) {\n  return _addTaskComment.apply(this, arguments);\n}\nfunction _addTaskComment() {\n  _addTaskComment = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee18(params, taskId, commentText) {\n    var sessionId;\n    return _regeneratorRuntime().wrap(function _callee18$(_context18) {\n      while (1) switch (_context18.prev = _context18.next) {\n        case 0:\n          sessionId = localStorage.getItem('spotfix_session_id');\n          if (sessionId) {\n            _context18.next = 3;\n            break;\n          }\n          throw new Error('No session');\n        case 3:\n          if (!(!params.projectToken || !params.accountId)) {\n            _context18.next = 5;\n            break;\n          }\n          throw new Error('Missing params');\n        case 5:\n          _context18.next = 7;\n          return createTaskCommentDoboard(params.accountId, sessionId, taskId, commentText, params.projectToken);\n        case 7:\n          return _context18.abrupt(\"return\", _context18.sent);\n        case 8:\n        case \"end\":\n          return _context18.stop();\n      }\n    }, _callee18);\n  }));\n  return _addTaskComment.apply(this, arguments);\n}\nfunction getUserTasks(params) {\n  if (!localStorage.getItem('spotfix_session_id')) {\n    return {};\n  }\n  var projectToken = params.projectToken;\n  var sessionId = localStorage.getItem('spotfix_session_id');\n  var userId = localStorage.getItem('spotfix_user_id');\n  return getTasksDoboard(projectToken, sessionId, params.accountId, params.projectId, userId);\n}\nfunction getAllTasks(_x33) {\n  return _getAllTasks.apply(this, arguments);\n}\nfunction _getAllTasks() {\n  _getAllTasks = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee19(params) {\n    var projectToken, sessionId, tasksData, filteredTaskData;\n    return _regeneratorRuntime().wrap(function _callee19$(_context19) {\n      while (1) switch (_context19.prev = _context19.next) {\n        case 0:\n          if (localStorage.getItem('spotfix_session_id')) {\n            _context19.next = 2;\n            break;\n          }\n          return _context19.abrupt(\"return\", {});\n        case 2:\n          projectToken = params.projectToken;\n          sessionId = localStorage.getItem('spotfix_session_id');\n          _context19.next = 6;\n          return getTasksDoboard(projectToken, sessionId, params.accountId, params.projectId);\n        case 6:\n          tasksData = _context19.sent;\n          // Get only tasks with metadata\n          filteredTaskData = tasksData.filter(function (task) {\n            return task.taskMeta;\n          });\n          return _context19.abrupt(\"return\", filteredTaskData);\n        case 9:\n        case \"end\":\n          return _context19.stop();\n      }\n    }, _callee19);\n  }));\n  return _getAllTasks.apply(this, arguments);\n}\nfunction formatDate(dateStr) {\n  var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n  // dateStr expected format: 'YYYY-MM-DD HH:mm:ss' or 'YYYY-MM-DDTHH:mm:ssZ'\n  if (!dateStr) return {\n    date: '',\n    time: ''\n  };\n  var dateObj;\n  if (dateStr.includes('T')) {\n    dateObj = new Date(dateStr);\n  } else if (dateStr.includes(' ')) {\n    dateObj = new Date(dateStr.replace(' ', 'T'));\n  } else {\n    dateObj = new Date(dateStr);\n  }\n  if (isNaN(dateObj.getTime())) return {\n    date: '',\n    time: ''\n  };\n  var month = months[dateObj.getMonth()];\n  var day = dateObj.getDate();\n  var date = \"\".concat(month, \" \").concat(day);\n  var hours = dateObj.getHours().toString().padStart(2, '0');\n  var minutes = dateObj.getMinutes().toString().padStart(2, '0');\n  var time = \"\".concat(hours, \":\").concat(minutes);\n  return {\n    date: date,\n    time: time\n  };\n}\nfunction getTaskAuthorDetails(params, taskId) {\n  var sessionId = localStorage.getItem('spotfix_session_id');\n  var mockUsersData = [{\n    'taskId': '1',\n    'taskAuthorAvatarImgSrc': 'https://s3.eu-central-1.amazonaws.com/cleantalk-ctask-atts/accounts/1/avatars/081a1b65d20fe318/m.jpg',\n    'taskAuthorName': 'Test All Issues Single Author Name'\n  }];\n  var defaultData = {\n    'taskId': null,\n    'taskAuthorAvatarImgSrc': null,\n    'taskAuthorName': 'Task Author'\n  };\n  var data = mockUsersData.find(function (element) {\n    return element.taskId === taskId;\n  });\n  return data === undefined ? defaultData : data;\n}\nfunction getIssuesCounterString(onPageSpotsCount, totalSpotsCount) {\n  return \"(\".concat(onPageSpotsCount, \"/\").concat(totalSpotsCount, \")\");\n}\n\n// Получить аватар автора\nfunction getAvatarSrc(author) {\n  if (author && author.avatar) {\n    if (_typeof(author.avatar) === 'object' && author.avatar.m) {\n      return author.avatar.m;\n    } else if (typeof author.avatar === 'string') {\n      return author.avatar;\n    }\n  }\n  return null;\n}\n\n// Получить имя автора\nfunction getAuthorName(author) {\n  if (author) {\n    if (author.name && author.name.trim().length > 0) {\n      return author.name;\n    } else if (author.email && author.email.trim().length > 0) {\n      return author.email;\n    }\n  }\n  return 'Unknown Author';\n}\n\n/**\n * Widget class to create a task widget\n */\nvar CleanTalkWidgetDoboard = /*#__PURE__*/function () {\n  /**\n   * Constructor\n   */\n  function CleanTalkWidgetDoboard(selectedData, type) {\n    _classCallCheck(this, CleanTalkWidgetDoboard);\n    _defineProperty(this, \"selectedText\", '');\n    _defineProperty(this, \"selectedData\", {});\n    _defineProperty(this, \"widgetElement\", null);\n    _defineProperty(this, \"params\", {});\n    _defineProperty(this, \"currentActiveTaskId\", 0);\n    _defineProperty(this, \"savedIssuesQuantityOnPage\", 0);\n    _defineProperty(this, \"savedIssuesQuantityAll\", 0);\n    this.selectedData = selectedData;\n    this.selectedText = selectedData.selectedText;\n    this.init(type);\n  }\n\n  /**\n   * Initialize the widget\n   */\n  return _createClass(CleanTalkWidgetDoboard, [{\n    key: \"init\",\n    value: (function () {\n      var _init = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(type) {\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) switch (_context8.prev = _context8.next) {\n            case 0:\n              this.params = this.getParams();\n              _context8.next = 3;\n              return this.createWidgetElement(type);\n            case 3:\n              this.widgetElement = _context8.sent;\n              this.bindWidgetInputsInteractive();\n            case 5:\n            case \"end\":\n              return _context8.stop();\n          }\n        }, _callee8, this);\n      }));\n      function init(_x34) {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }())\n  }, {\n    key: \"getParams\",\n    value: function getParams() {\n      var script = document.querySelector(\"script[src*=\\\"doboard-widget-bundle.min.js\\\"]\");\n      if (!script || !script.src) {\n        throw new Error('Script not provided');\n      }\n      var url = new URL(script.src);\n      var params = Object.fromEntries(url.searchParams.entries());\n      if (!params) {\n        throw new Error('Script params not provided');\n      }\n      if (!params.projectToken || !params.accountId || !params.projectId) {\n        throw new Error('Necessary script params not provided');\n      }\n      return params;\n    }\n\n    /**\n     * Binding events to create a task\n     */\n  }, {\n    key: \"bindCreateTaskEvents\",\n    value: function bindCreateTaskEvents() {\n      var _this = this;\n      var submitButton = document.getElementById('doboard_task_widget-submit_button');\n      if (submitButton) {\n        submitButton.addEventListener('click', /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n          var taskTitleElement, taskTitle, taskDescriptionElement, taskDescription, userName, userEmail, userPassword, loginSectionElement, _userEmailElement, userNameElement, userPasswordElement, userEmailElement, submitButton, taskDetails, submitTaskResult;\n          return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n            while (1) switch (_context9.prev = _context9.next) {\n              case 0:\n                // Check required fields: Report about and Description\n                taskTitleElement = document.getElementById('doboard_task_widget-title');\n                taskTitle = taskTitleElement.value;\n                if (taskTitle) {\n                  _context9.next = 7;\n                  break;\n                }\n                taskTitleElement.style.borderColor = 'red';\n                taskTitleElement.focus();\n                taskTitleElement.addEventListener('input', function () {\n                  this.style.borderColor = '';\n                });\n                return _context9.abrupt(\"return\");\n              case 7:\n                taskDescriptionElement = document.getElementById('doboard_task_widget-description');\n                taskDescription = taskDescriptionElement.value;\n                if (taskDescription) {\n                  _context9.next = 14;\n                  break;\n                }\n                taskDescriptionElement.style.borderColor = 'red';\n                taskDescriptionElement.focus();\n                taskDescriptionElement.addEventListener('input', function () {\n                  this.style.borderColor = '';\n                });\n                return _context9.abrupt(\"return\");\n              case 14:\n                // If login section is open, check required fields: Nickname, Email\n                userName = '';\n                userEmail = '';\n                userPassword = '';\n                loginSectionElement = document.querySelector('.doboard_task_widget-login');\n                if (!(loginSectionElement && loginSectionElement.classList.contains('active'))) {\n                  _context9.next = 42;\n                  break;\n                }\n                _userEmailElement = document.getElementById('doboard_task_widget-user_email');\n                userNameElement = document.getElementById('doboard_task_widget-user_name');\n                userPasswordElement = document.getElementById('doboard_task_widget-user_password');\n                userEmail = _userEmailElement.value;\n                if (userEmail) {\n                  _context9.next = 28;\n                  break;\n                }\n                _userEmailElement.style.borderColor = 'red';\n                _userEmailElement.focus();\n                _userEmailElement.addEventListener('input', function () {\n                  this.style.borderColor = '';\n                });\n                return _context9.abrupt(\"return\");\n              case 28:\n                if (!(_userEmailElement && userNameElement)) {\n                  _context9.next = 35;\n                  break;\n                }\n                userName = userNameElement.value;\n                if (userName) {\n                  _context9.next = 35;\n                  break;\n                }\n                userNameElement.style.borderColor = 'red';\n                userNameElement.focus();\n                userNameElement.addEventListener('input', function () {\n                  this.style.borderColor = '';\n                });\n                return _context9.abrupt(\"return\");\n              case 35:\n                if (!(_userEmailElement && userPasswordElement && !userNameElement)) {\n                  _context9.next = 42;\n                  break;\n                }\n                userPassword = userPasswordElement.value;\n                if (userPassword) {\n                  _context9.next = 42;\n                  break;\n                }\n                userPasswordElement.style.borderColor = 'red';\n                userPasswordElement.focus();\n                userPasswordElement.addEventListener('input', function () {\n                  this.style.borderColor = '';\n                });\n                return _context9.abrupt(\"return\");\n              case 42:\n                // If it is the login request\n                userEmailElement = document.getElementById('doboard_task_widget-user_email');\n                userEmail = userEmailElement.value;\n\n                // Make the submit button disable with spinner\n                submitButton = document.getElementById('doboard_task_widget-submit_button');\n                submitButton.disabled = true;\n                submitButton.innerText = 'Creating spot...';\n                taskDetails = {\n                  taskTitle: taskTitle,\n                  taskDescription: taskDescription,\n                  //typeSend: typeSend,\n                  selectedData: _this.selectedData,\n                  projectToken: _this.params.projectToken,\n                  projectId: _this.params.projectId,\n                  accountId: _this.params.accountId,\n                  taskMeta: JSON.stringify(_this.selectedData)\n                };\n                if (userEmail) {\n                  taskDetails.userEmail = userEmail;\n                }\n                if (userName) {\n                  taskDetails.userName = userName;\n                }\n                if (userPassword) {\n                  taskDetails.userPassword = userPassword;\n                }\n                _context9.next = 53;\n                return _this.submitTask(taskDetails);\n              case 53:\n                submitTaskResult = _context9.sent;\n                // Return the submit button normal state\n                submitButton.disabled = false;\n                submitButton.style.cursor = 'pointer';\n                if (!submitTaskResult.needToLogin) {\n                  _context9.next = 58;\n                  break;\n                }\n                return _context9.abrupt(\"return\");\n              case 58:\n                if (submitTaskResult.isPublic !== undefined) {\n                  _this.selectedData.isPublic = submitTaskResult.isPublic;\n                }\n                _this.selectedData = {};\n                _context9.next = 62;\n                return _this.createWidgetElement('all_issues');\n              case 62:\n                hideContainersSpinner(false);\n              case 63:\n              case \"end\":\n                return _context9.stop();\n            }\n          }, _callee9);\n        })));\n      }\n    }\n\n    /**\n     * Create widget element\n     * @return {HTMLElement} widget element\n     */\n  }, {\n    key: \"createWidgetElement\",\n    value: (function () {\n      var _createWidgetElement = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(type) {\n        var _this2 = this,\n          _document$querySelect;\n        var showOnlyCurrentPage,\n          widgetContainer,\n          templateName,\n          variables,\n          issuesQuantityOnPage,\n          tasks,\n          i,\n          elTask,\n          taskId,\n          taskTitle,\n          taskDataString,\n          _formatDate,\n          lastMessageTime,\n          taskData,\n          currentPageURL,\n          taskNodePath,\n          taskPublicStatusImgSrc,\n          taskPublicStatusHint,\n          taskFullDetails,\n          avatarData,\n          _variables,\n          taskElement,\n          text,\n          start,\n          end,\n          selectedText,\n          beforeText,\n          afterText,\n          taskDetails,\n          issuesCommentsContainer,\n          dayMessagesData,\n          initIssuerID,\n          userIsIssuer,\n          _iterator,\n          _step,\n          comment,\n          _avatarData,\n          commentData,\n          daysWrapperHTML,\n          day,\n          currentDayMessages,\n          dayMessagesWrapperHTML,\n          messageId,\n          currentMessageData,\n          sendForm,\n          backToAllIssuesController,\n          widgetClass,\n          paperclipController,\n          _args11 = arguments;\n        return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n          while (1) switch (_context11.prev = _context11.next) {\n            case 0:\n              showOnlyCurrentPage = _args11.length > 1 && _args11[1] !== undefined ? _args11[1] : true;\n              widgetContainer = document.querySelector('.doboard_task_widget') ? document.querySelector('.doboard_task_widget') : document.createElement('div');\n              widgetContainer.className = 'doboard_task_widget';\n              widgetContainer.innerHTML = '';\n              templateName = '';\n              variables = {};\n              _context11.t0 = type;\n              _context11.next = _context11.t0 === 'create_issue' ? 9 : _context11.t0 === 'wrap' ? 12 : _context11.t0 === 'all_issues' ? 14 : _context11.t0 === 'concrete_issue' ? 16 : 20;\n              break;\n            case 9:\n              templateName = 'create_issue';\n              variables = {\n                selectedText: this.selectedText,\n                currentDomain: document.location.hostname || ''\n              };\n              return _context11.abrupt(\"break\", 21);\n            case 12:\n              templateName = 'wrap';\n              return _context11.abrupt(\"break\", 21);\n            case 14:\n              templateName = 'all_issues';\n              return _context11.abrupt(\"break\", 21);\n            case 16:\n              templateName = 'concrete_issue';\n              // todo: this is call duplicate!\n              getTaskFullDetails(this.params, this.currentActiveTaskId).then(function (taskDetails) {\n                var issueTitle = taskDetails.issueTitle;\n                var issueTitleElement = document.querySelector('.doboard_task_widget-issue-title');\n                if (issueTitleElement) {\n                  issueTitleElement.innerHTML = issueTitle;\n                }\n              });\n              variables = {\n                issueTitle: '...',\n                issuesCounter: getIssuesCounterString(this.savedIssuesQuantityOnPage, this.savedIssuesQuantityAll),\n                paperclipImgSrc: '/spotfix/img/send-message--paperclip.svg',\n                sendButtonImgSrc: '/spotfix/img/send-message--button.svg',\n                msgFieldBackgroundImgSrc: '/spotfix/img/send-message--input-background.svg'\n              };\n              return _context11.abrupt(\"break\", 21);\n            case 20:\n              return _context11.abrupt(\"break\", 21);\n            case 21:\n              _context11.next = 23;\n              return this.loadTemplate(templateName, variables);\n            case 23:\n              widgetContainer.innerHTML = _context11.sent;\n              document.body.appendChild(widgetContainer);\n              _context11.t1 = type;\n              _context11.next = _context11.t1 === 'create_issue' ? 28 : _context11.t1 === 'wrap' ? 30 : _context11.t1 === 'all_issues' ? 35 : _context11.t1 === 'concrete_issue' ? 78 : 122;\n              break;\n            case 28:\n              this.bindCreateTaskEvents();\n              return _context11.abrupt(\"break\", 123);\n            case 30:\n              _context11.next = 32;\n              return this.getTaskCount();\n            case 32:\n              document.querySelector('.doboard_task_widget-wrap').addEventListener('click', function () {\n                _this2.createWidgetElement('all_issues');\n              });\n              hideContainersSpinner(false);\n              return _context11.abrupt(\"break\", 123);\n            case 35:\n              this.removeTextSelection();\n              issuesQuantityOnPage = 0;\n              _context11.next = 39;\n              return getAllTasks(this.params);\n            case 39:\n              tasks = _context11.sent;\n              if (!(tasks.length > 0)) {\n                _context11.next = 74;\n                break;\n              }\n              document.querySelector(\".doboard_task_widget-all_issues-container\").innerHTML = '';\n              i = 0;\n            case 43:\n              if (!(i < tasks.length)) {\n                _context11.next = 71;\n                break;\n              }\n              elTask = tasks[i]; // Data from api\n              taskId = elTask.taskId;\n              taskTitle = elTask.taskTitle;\n              taskDataString = elTask.taskMeta;\n              _formatDate = formatDate(elTask.taskLastUpdate), lastMessageTime = _formatDate.time;\n              taskData = taskDataString ? JSON.parse(taskDataString) : null;\n              currentPageURL = taskData ? taskData.pageURL : '';\n              taskNodePath = taskData ? taskData.nodePath : ''; // Define publicity details\n              taskPublicStatusImgSrc = '';\n              taskPublicStatusHint = 'Task publicity is unknown';\n              if (taskData && taskData.isPublic !== undefined) {\n                if (taskData.isPublic) {\n                  taskPublicStatusImgSrc = '/spotfix/img/public.svg';\n                  taskPublicStatusHint = 'The task is public';\n                } else {\n                  taskPublicStatusImgSrc = '/spotfix/img/private.svg';\n                  taskPublicStatusHint = 'The task is private and visible only for registered DoBoard users';\n                }\n              }\n              if (!(!showOnlyCurrentPage || currentPageURL === window.location.href)) {\n                _context11.next = 68;\n                break;\n              }\n              issuesQuantityOnPage++;\n              //define last message and update time\n              /* let lastMessageDetails = await getTaskLastMessageDetails(this.params, taskId);\n              const authorDetails = getTaskAuthorDetails(this.params, '1'); // todo MOCK! */\n              _context11.next = 59;\n              return getTaskFullDetails(this.params, taskId);\n            case 59:\n              taskFullDetails = _context11.sent;\n              avatarData = getAvatarData(taskFullDetails);\n              _variables = {\n                taskTitle: taskTitle || '',\n                taskAuthorAvatarImgSrc: taskFullDetails.taskAuthorAvatarImgSrc,\n                taskAuthorName: taskFullDetails.taskAuthorName,\n                taskPublicStatusImgSrc: taskPublicStatusImgSrc,\n                taskPublicStatusHint: taskPublicStatusHint,\n                taskLastMessage: taskFullDetails.lastMessageText,\n                taskLastUpdate: lastMessageTime,\n                nodePath: taskNodePath,\n                taskId: taskId,\n                avatarCSSClass: avatarData.avatarCSSClass,\n                avatarStyle: avatarData.avatarStyle,\n                taskAuthorInitials: avatarData.taskAuthorInitials,\n                initialsClass: avatarData.initialsClass\n              };\n              _context11.t2 = document.querySelector(\".doboard_task_widget-all_issues-container\").innerHTML;\n              _context11.next = 65;\n              return this.loadTemplate('list_issues', _variables);\n            case 65:\n              document.querySelector(\".doboard_task_widget-all_issues-container\").innerHTML = _context11.t2 += _context11.sent;\n              taskElement = taskAnalysis(taskData);\n              if (taskElement) {\n                if (taskData.startSelectPosition !== undefined && taskData.endSelectPosition !== undefined) {\n                  text = taskElement.innerHTML;\n                  start = taskData.startSelectPosition;\n                  end = taskData.endSelectPosition;\n                  selectedText = text.substring(start, end);\n                  beforeText = text.substring(0, start);\n                  afterText = text.substring(end);\n                  taskElement.innerHTML = beforeText + '<span class=\"doboard_task_widget-text_selection\">' + selectedText + '</span>' + afterText;\n                }\n              }\n            case 68:\n              i++;\n              _context11.next = 43;\n              break;\n            case 71:\n              this.savedIssuesQuantityOnPage = issuesQuantityOnPage;\n              this.savedIssuesQuantityAll = tasks.length;\n              document.querySelector('.doboard_task_widget-header span').innerText += ' ' + getIssuesCounterString(this.savedIssuesQuantityOnPage, this.savedIssuesQuantityAll);\n            case 74:\n              if (tasks.length === 0 || issuesQuantityOnPage === 0) {\n                document.querySelector(\".doboard_task_widget-all_issues-container\").innerHTML = '<div class=\"doboard_task_widget-issues_list_empty\">The issues list is empty</div>';\n              }\n\n              // Bind the click event to the task elements for scrolling to the selected text and Go to concrete issue interface by click issue-item row\n              this.bindIssuesClick();\n              hideContainersSpinner(false);\n              return _context11.abrupt(\"break\", 123);\n            case 78:\n              _context11.next = 80;\n              return getTaskFullDetails(this.params, this.currentActiveTaskId);\n            case 80:\n              taskDetails = _context11.sent;\n              variables = {\n                issueTitle: taskDetails.issueTitle,\n                issueComments: taskDetails.issueComments,\n                issuesCounter: getIssuesCounterString(),\n                chevronBackTitle: 'Back to all spots'\n              };\n              issuesCommentsContainer = document.querySelector('.doboard_task_widget-concrete_issues-container');\n              dayMessagesData = [];\n              initIssuerID = localStorage.getItem('spotfix_user_id');\n              console.table('initIssuerID', initIssuerID);\n              userIsIssuer = false;\n              if (!(taskDetails.issueComments.length > 0)) {\n                _context11.next = 117;\n                break;\n              }\n              issuesCommentsContainer.innerHTML = '';\n              _iterator = _createForOfIteratorHelper(taskDetails.issueComments);\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  comment = _step.value;\n                  userIsIssuer = Number(initIssuerID) === Number(comment.commentUserId);\n                  _avatarData = getAvatarData({\n                    taskAuthorAvatarImgSrc: comment.commentAuthorAvatarSrc,\n                    taskAuthorName: comment.commentAuthorName,\n                    userIsIssuer: userIsIssuer\n                  });\n                  commentData = {\n                    commentAuthorName: comment.commentAuthorName,\n                    commentBody: comment.commentBody,\n                    commentDate: comment.commentDate,\n                    commentTime: comment.commentTime,\n                    issueTitle: variables.issueTitle,\n                    issuesCounter: variables.issuesCounter,\n                    commentContainerBackgroundSrc: userIsIssuer ? '/spotfix/img/comment-self-background.png' : '/spotfix/img/comment-other-background.png',\n                    avatarCSSClass: _avatarData.avatarCSSClass,\n                    avatarStyle: _avatarData.avatarStyle,\n                    taskAuthorInitials: _avatarData.taskAuthorInitials,\n                    initialsClass: _avatarData.initialsClass\n                  };\n                  if (dayMessagesData[comment.commentDate] === undefined) {\n                    dayMessagesData[comment.commentDate] = [];\n                    dayMessagesData[comment.commentDate].push(commentData);\n                  } else {\n                    dayMessagesData[comment.commentDate].push(commentData);\n                  }\n                }\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n              daysWrapperHTML = '';\n              _context11.t3 = _regeneratorRuntime().keys(dayMessagesData);\n            case 93:\n              if ((_context11.t4 = _context11.t3()).done) {\n                _context11.next = 114;\n                break;\n              }\n              day = _context11.t4.value;\n              currentDayMessages = dayMessagesData[day];\n              dayMessagesWrapperHTML = '';\n              currentDayMessages.sort(function (a, b) {\n                return a.commentTime.localeCompare(b.commentTime);\n              });\n              _context11.t5 = _regeneratorRuntime().keys(currentDayMessages);\n            case 99:\n              if ((_context11.t6 = _context11.t5()).done) {\n                _context11.next = 108;\n                break;\n              }\n              messageId = _context11.t6.value;\n              currentMessageData = currentDayMessages[messageId];\n              _context11.t7 = dayMessagesWrapperHTML;\n              _context11.next = 105;\n              return this.loadTemplate('concrete_issue_messages', currentMessageData);\n            case 105:\n              dayMessagesWrapperHTML = _context11.t7 += _context11.sent;\n              _context11.next = 99;\n              break;\n            case 108:\n              _context11.t8 = daysWrapperHTML;\n              _context11.next = 111;\n              return this.loadTemplate('concrete_issue_day_content', {\n                dayContentMonthDay: day,\n                dayContentMessages: dayMessagesWrapperHTML\n              });\n            case 111:\n              daysWrapperHTML = _context11.t8 += _context11.sent;\n              _context11.next = 93;\n              break;\n            case 114:\n              issuesCommentsContainer.innerHTML = daysWrapperHTML;\n              _context11.next = 118;\n              break;\n            case 117:\n              issuesCommentsContainer.innerHTML = 'No comments';\n            case 118:\n              // Scroll to the bottom comments\n              setTimeout(function () {\n                var contentContainer = document.querySelector('.doboard_task_widget-content');\n                contentContainer.scrollTo({\n                  top: contentContainer.scrollHeight,\n                  behavior: 'smooth'\n                });\n              }, 0);\n              sendForm = document.querySelector('.doboard_task_widget-send_message form');\n              if (sendForm) {\n                sendForm.addEventListener('submit', /*#__PURE__*/function () {\n                  var _ref9 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(e) {\n                    var input, commentText;\n                    return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n                      while (1) switch (_context10.prev = _context10.next) {\n                        case 0:\n                          e.preventDefault();\n                          input = sendForm.querySelector('.doboard_task_widget-send_message_input');\n                          commentText = input.value.trim();\n                          if (commentText) {\n                            _context10.next = 5;\n                            break;\n                          }\n                          return _context10.abrupt(\"return\");\n                        case 5:\n                          input.disabled = true;\n                          _context10.prev = 6;\n                          _context10.next = 9;\n                          return addTaskComment(_this2.params, _this2.currentActiveTaskId, commentText);\n                        case 9:\n                          input.value = '';\n                          _context10.next = 12;\n                          return _this2.createWidgetElement('concrete_issue');\n                        case 12:\n                          hideContainersSpinner(false);\n                          _context10.next = 18;\n                          break;\n                        case 15:\n                          _context10.prev = 15;\n                          _context10.t0 = _context10[\"catch\"](6);\n                          alert('Error when adding a comment: ' + _context10.t0.message);\n                        case 18:\n                          input.disabled = false;\n                        case 19:\n                        case \"end\":\n                          return _context10.stop();\n                      }\n                    }, _callee10, null, [[6, 15]]);\n                  }));\n                  return function (_x36) {\n                    return _ref9.apply(this, arguments);\n                  };\n                }());\n              }\n              return _context11.abrupt(\"break\", 123);\n            case 122:\n              return _context11.abrupt(\"break\", 123);\n            case 123:\n              backToAllIssuesController = document.querySelector('.doboard_task_widget_return_to_all');\n              if (backToAllIssuesController) {\n                widgetClass = this;\n                backToAllIssuesController.addEventListener('click', function (e) {\n                  var self = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : widgetClass;\n                  self.createWidgetElement('all_issues');\n                });\n              }\n              paperclipController = document.querySelector('.doboard_task_widget-send_message_paperclip');\n              if (paperclipController) {\n                paperclipController.addEventListener('click', function (e) {\n                  e.preventDefault();\n                  alert('This action is not implemented yet..');\n                });\n              }\n              ((_document$querySelect = document.querySelector('.doboard_task_widget-close_btn')) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.addEventListener('click', function () {\n                _this2.hide();\n              })) || '';\n              return _context11.abrupt(\"return\", widgetContainer);\n            case 129:\n            case \"end\":\n              return _context11.stop();\n          }\n        }, _callee11, this);\n      }));\n      function createWidgetElement(_x35) {\n        return _createWidgetElement.apply(this, arguments);\n      }\n      return createWidgetElement;\n    }())\n  }, {\n    key: \"bindIssuesClick\",\n    value: function bindIssuesClick() {\n      var _this3 = this;\n      document.querySelectorAll('.issue-item').forEach(function (item) {\n        item.addEventListener('click', /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {\n          var nodePath;\n          return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n            while (1) switch (_context12.prev = _context12.next) {\n              case 0:\n                nodePath = JSON.parse(item.getAttribute('data-node-path'));\n                scrollToNodePath(nodePath);\n                _this3.currentActiveTaskId = item.getAttribute('data-task-id');\n                _context12.next = 5;\n                return _this3.createWidgetElement('concrete_issue');\n              case 5:\n                hideContainersSpinner(false);\n              case 6:\n              case \"end\":\n                return _context12.stop();\n            }\n          }, _callee12);\n        })));\n      });\n    }\n\n    /**\n     * Load the template\n     *\n     * @param templateName\n     * @param variables\n     * @return {Promise<string>}\n     * @ToDo have to refactor templates loaded method: need to be templates included into the bundle\n     *\n     */\n  }, {\n    key: \"loadTemplate\",\n    value: (function () {\n      var _loadTemplate = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13(templateName) {\n        var variables,\n          response,\n          template,\n          _i,\n          _Object$entries,\n          _Object$entries$_i,\n          key,\n          value,\n          placeholder,\n          _args13 = arguments;\n        return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n          while (1) switch (_context13.prev = _context13.next) {\n            case 0:\n              variables = _args13.length > 1 && _args13[1] !== undefined ? _args13[1] : {};\n              _context13.next = 3;\n              return fetch(\"/spotfix/templates/\".concat(templateName, \".html\"));\n            case 3:\n              response = _context13.sent;\n              _context13.next = 6;\n              return response.text();\n            case 6:\n              template = _context13.sent;\n              for (_i = 0, _Object$entries = Object.entries(variables); _i < _Object$entries.length; _i++) {\n                _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2), key = _Object$entries$_i[0], value = _Object$entries$_i[1];\n                placeholder = \"{{\".concat(key, \"}}\");\n                template = template.replaceAll(placeholder, value);\n              }\n              return _context13.abrupt(\"return\", template);\n            case 9:\n            case \"end\":\n              return _context13.stop();\n          }\n        }, _callee13);\n      }));\n      function loadTemplate(_x37) {\n        return _loadTemplate.apply(this, arguments);\n      }\n      return loadTemplate;\n    }())\n  }, {\n    key: \"getTaskCount\",\n    value: function () {\n      var _getTaskCount = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14() {\n        var projectToken, sessionId, tasks, taskCountElement;\n        return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n          while (1) switch (_context14.prev = _context14.next) {\n            case 0:\n              if (localStorage.getItem('spotfix_session_id')) {\n                _context14.next = 2;\n                break;\n              }\n              return _context14.abrupt(\"return\", {});\n            case 2:\n              projectToken = this.params.projectToken;\n              sessionId = localStorage.getItem('spotfix_session_id');\n              _context14.next = 6;\n              return getTasksDoboard(projectToken, sessionId, this.params.accountId, this.params.projectId);\n            case 6:\n              tasks = _context14.sent;\n              taskCountElement = document.getElementById('doboard_task_widget-task_count');\n              if (taskCountElement) {\n                taskCountElement.innerText = tasks.length;\n                taskCountElement.classList.remove('hidden');\n              }\n            case 9:\n            case \"end\":\n              return _context14.stop();\n          }\n        }, _callee14, this);\n      }));\n      function getTaskCount() {\n        return _getTaskCount.apply(this, arguments);\n      }\n      return getTaskCount;\n    }()\n    /**\n     * Bind events to the widget\n     */\n    /*bindEvents() {\n        this.submitButton.addEventListener('click', () => this.submitTask());\n    }*/\n    /**\n     * Submit the task\n     */\n  }, {\n    key: \"submitTask\",\n    value: (function () {\n      var _submitTask = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee15(taskDetails) {\n        var sessionId;\n        return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n          while (1) switch (_context15.prev = _context15.next) {\n            case 0:\n              if (localStorage.getItem('spotfix_session_id')) {\n                _context15.next = 6;\n                break;\n              }\n              _context15.next = 3;\n              return this.registerUser(taskDetails);\n            case 3:\n              if (!taskDetails.userPassword) {\n                _context15.next = 6;\n                break;\n              }\n              _context15.next = 6;\n              return this.loginUser(taskDetails);\n            case 6:\n              sessionId = localStorage.getItem('spotfix_session_id');\n              if (sessionId) {\n                _context15.next = 9;\n                break;\n              }\n              return _context15.abrupt(\"return\", {\n                needToLogin: true\n              });\n            case 9:\n              _context15.next = 11;\n              return handleCreateTask(sessionId, taskDetails);\n            case 11:\n              return _context15.abrupt(\"return\", _context15.sent);\n            case 12:\n            case \"end\":\n              return _context15.stop();\n          }\n        }, _callee15, this);\n      }));\n      function submitTask(_x38) {\n        return _submitTask.apply(this, arguments);\n      }\n      return submitTask;\n    }())\n  }, {\n    key: \"registerUser\",\n    value: function registerUser(taskDetails) {\n      var userEmail = taskDetails.userEmail;\n      var userName = taskDetails.userName;\n      var projectToken = taskDetails.projectToken;\n      var accountId = taskDetails.accountId;\n      return _registerUser(projectToken, accountId, userEmail, userName).then(function (response) {\n        if (response.accountExists) {\n          document.querySelector(\".doboard_task_widget-accordion>.doboard_task_widget-input-container\").innerText = 'Account already exists. Please, login usin your password.';\n          document.querySelector(\".doboard_task_widget-accordion>.doboard_task_widget-input-container.hidden\").classList.remove('hidden');\n          document.getElementById(\"doboard_task_widget-user_password\").focus();\n        } else if (response.sessionId) {\n          localStorage.setItem('spotfix_session_id', response.sessionId);\n          localStorage.setItem('spotfix_user_id', response.userId);\n          localStorage.setItem('spotfix_email', response.email);\n        } else {\n          throw new Error('Session ID not found in response');\n        }\n      }).catch(function (error) {\n        throw error;\n      });\n    }\n  }, {\n    key: \"loginUser\",\n    value: function loginUser(taskDetails) {\n      var userEmail = taskDetails.userEmail;\n      var userPassword = taskDetails.userPassword;\n      return _loginUser(userEmail, userPassword).then(function (response) {\n        if (response.sessionId) {\n          localStorage.setItem('spotfix_session_id', response.sessionId);\n          localStorage.setItem('spotfix_user_id', response.userId);\n          localStorage.setItem('spotfix_email', response.email);\n        } else {\n          throw new Error('Session ID not found in response');\n        }\n      }).catch(function (error) {\n        throw error;\n      });\n    }\n\n    /**\n     * Hide the widget\n     */\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.removeTextSelection();\n      this.createWidgetElement('wrap');\n    }\n  }, {\n    key: \"removeTextSelection\",\n    value: function removeTextSelection() {\n      var textSelectionclassName = 'doboard_task_widget-text_selection';\n      var spans = document.querySelectorAll('.' + textSelectionclassName);\n      spans.forEach(function (span) {\n        var parent = span.parentNode;\n        while (span.firstChild) {\n          parent.insertBefore(span.firstChild, span);\n        }\n        parent.removeChild(span);\n      });\n    }\n  }, {\n    key: \"bindWidgetInputsInteractive\",\n    value: function bindWidgetInputsInteractive() {\n      // Customising placeholders\n      var inputs = document.querySelectorAll('.doboard_task_widget-field');\n      inputs.forEach(function (input) {\n        if (input.value) {\n          input.classList.add('has-value');\n        }\n        input.addEventListener('input', function () {\n          if (input.value) {\n            input.classList.add('has-value');\n          } else {\n            input.classList.remove('has-value');\n          }\n        });\n        input.addEventListener('blur', function () {\n          if (!input.value) {\n            input.classList.remove('has-value');\n          }\n        });\n      });\n\n      // Customising accordion dropdown\n      var accordionController = document.querySelector('.doboard_task_widget-login span');\n      if (accordionController) {\n        accordionController.addEventListener('click', function () {\n          this.closest('.doboard_task_widget-login').classList.toggle('active');\n        });\n      }\n    }\n  }]);\n}();\nvar selectedData = {};\nvar widgetTimeout = null;\ndocument.addEventListener('DOMContentLoaded', function () {\n  new CleanTalkWidgetDoboard({}, 'wrap');\n});\ndocument.addEventListener('selectionchange', function (e) {\n  if (widgetTimeout) {\n    clearTimeout(widgetTimeout);\n  }\n  widgetTimeout = setTimeout(function () {\n    var selection = window.getSelection();\n    if (selection.type === 'Range') {\n      var _selectedData = getSelectedData(selection);\n      var widgetExist = document.querySelector('.doboard_task_widget-container');\n      openWidget(_selectedData, widgetExist, 'create_issue');\n    }\n  }, 1000);\n});\n\n/**\n * Open the widget to create a task.\n * @param {*} selectedData\n * @param {*} widgetExist\n * @param {*} type\n */\nfunction openWidget(selectedData, widgetExist, type) {\n  if (selectedData && !widgetExist) {\n    new CleanTalkWidgetDoboard(selectedData, type);\n  }\n}\n\n/**\n * Get the selected data from the DOM\n * @param {Selection} selectedData\n * @returns {Object}\n */\nfunction getSelectedData(selectedData) {\n  var pageURL = window.location.href;\n  var selectedText = selectedData.toString();\n  var anchorOffset = selectedData.anchorOffset;\n  var focusOffset = selectedData.focusOffset;\n  return {\n    startSelectPosition: Math.min(anchorOffset, focusOffset),\n    endSelectPosition: Math.max(anchorOffset, focusOffset),\n    selectedText: selectedText,\n    pageURL: pageURL,\n    nodePath: calculateNodePath(selectedData.focusNode.parentNode)\n  };\n}\n\n/**\n * Calculate the path of a DOM node\n *\n * @param {Node} node\n * @return {int[]}\n */\nfunction calculateNodePath(node) {\n  var path = [];\n  while (node) {\n    var index = 0;\n    var sibling = node.previousSibling;\n    while (sibling) {\n      if (sibling.nodeType === 1) {\n        index++;\n      }\n      sibling = sibling.previousSibling;\n    }\n    path.unshift(index);\n    node = node.parentNode;\n  }\n\n  // Hard fix - need to remove first element to work correctly\n  path.shift();\n  return path;\n}\n\n/**\n * Retrieve a DOM node from a path\n *\n * @param {int[]} path\n * @return {*|null}\n */\nfunction retrieveNodeFromPath(path) {\n  // @ToDo check if the path is correct\n  if (!path) {\n    return null;\n  }\n  var node = document;\n  for (var i = 0; i < path.length; i++) {\n    node = node.children[path[i]];\n    if (!node) {\n      return null;\n    }\n  }\n  return node;\n}\n\n/**\n * Analyze the task selected data\n * @param {Object} taskSelectedData\n * @return {Element|null}\n */\nfunction taskAnalysis(taskSelectedData) {\n  var nodePath = taskSelectedData ? taskSelectedData.nodePath : '';\n  return retrieveNodeFromPath(nodePath);\n}\n\n/**\n * Scroll to an element by tag, class, and text content\n * @param {string} path - The path to the element\n * @return {boolean} - True if the element was found and scrolled to, false otherwise\n */\nfunction scrollToNodePath(path) {\n  var node = retrieveNodeFromPath(path);\n  if (node && node.scrollIntoView) {\n    node.scrollIntoView({\n      behavior: 'smooth',\n      block: 'center'\n    });\n    return true;\n  }\n  return false;\n}\nfunction hideContainersSpinner() {\n  var spinners = document.getElementsByClassName('doboard_task_widget-spinner_wrapper_for_containers');\n  if (spinners.length > 0) {\n    for (var i = 0; i < spinners.length; i++) {\n      spinners[i].style.display = 'none';\n    }\n  }\n  var containerClassesToShow = ['doboard_task_widget-all_issues-container', 'doboard_task_widget-concrete_issues-container'];\n  for (var _i2 = 0; _i2 < containerClassesToShow.length; _i2++) {\n    var containers = document.getElementsByClassName(containerClassesToShow[_i2]);\n    if (containers.length > 0) {\n      for (var _i3 = 0; _i3 < containers.length; _i3++) {\n        containers[_i3].style.display = 'block';\n      }\n    }\n  }\n}\nfunction getAvatarData(authorDetails) {\n  var avatarStyle;\n  var avatarCSSClass;\n  var taskAuthorInitials;\n  var hideAvatar = authorDetails.hasOwnProperty('userIsIssuer') && authorDetails.userIsIssuer === true;\n  var initialsClass = 'doboard_task_widget-avatar-initials';\n  if (authorDetails.taskAuthorAvatarImgSrc === null) {\n    avatarStyle = hideAvatar ? 'opacity:0;' : '';\n    avatarCSSClass = 'doboard_task_widget-avatar_placeholder';\n    taskAuthorInitials = authorDetails.taskAuthorName.substring(0, 2).toUpperCase();\n  } else {\n    avatarStyle = \"background-image:url('\".concat(authorDetails.taskAuthorAvatarImgSrc, \"');\");\n    avatarCSSClass = 'doboard_task_widget-avatar_container';\n    initialsClass += ' doboard_task_widget-hidden_element';\n  }\n  return {\n    avatarStyle: avatarStyle,\n    avatarCSSClass: avatarCSSClass,\n    taskAuthorInitials: taskAuthorInitials,\n    initialsClass: initialsClass\n  };\n}"],"names":["_slicedToArray","r","e","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","l","t","Symbol","iterator","n","i","u","a","f","o","call","next","Object","done","push","value","length","return","Array","isArray","_createForOfIteratorHelper","_n","s","F","_arrayLikeToArray","toString","slice","constructor","name","from","test","_classCallCheck","_defineProperties","enumerable","configurable","writable","defineProperty","_toPropertyKey","key","_createClass","prototype","_defineProperty","_toPrimitive","_typeof","toPrimitive","String","Number","_regeneratorRuntime","hasOwnProperty","c","asyncIterator","toStringTag","define","wrap","Generator","create","Context","h","Error","method","arg","delegate","maybeInvokeDelegate","y","tryCatch","type","resultName","nextLoc","sent","_sent","dispatchException","abrupt","p","GeneratorFunction","GeneratorFunctionPrototype","d","this","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","callInvokeWithMethodAndArg","invoke","resolve","__await","then","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","stop","rval","handle","complete","finish","catch","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","DOBOARD_API_URL","createTaskDoboard","_ref","_callee","sessionId","taskDetails","accountId","formData","response","responseBody","_context","FormData","append","projectToken","projectId","localStorage","getItem","taskTitle","taskDescription","taskMeta","fetch","body","ok","json","data","operation_status","operation_message","taskId","task_id","isPublic","_x","_x2","createTaskCommentDoboard","_ref2","_callee2","comment","status","_args2","_context2","undefined","commentId","comment_id","_x3","_x4","_x5","_x6","_x7","_registerUser","_ref3","_callee3","email","nickname","_context3","user_email_confirmed","accountExists","session_id","userId","user_id","_x8","_x9","_x10","_x11","_loginUser","_ref4","_callee4","password","_context4","_x12","_x13","getTasksDoboard","_ref5","_callee5","_context5","tasks","map","task","taskLastUpdate","updated","taskCreated","created","taskCreatorTaskUser","creator_user_id","meta","_x14","_x15","_x16","_x17","_x18","getTaskCommentsDoboard","_ref6","_callee6","_args6","_context6","comments","commentBody","comment_text","commentDate","issueTitle","task_name","_x19","_x20","_x21","_x22","getUserDoboard","_ref7","_callee7","_context7","users","_x23","_x24","_x25","getTaskFullDetails","_x26","_x27","_getTaskFullDetails","_callee16","params","lastComment","time","avatarSrc","authorName","_context16","author","find","dt","formatDate","date","getAvatarSrc","getAuthorName","taskAuthorAvatarImgSrc","taskAuthorName","lastMessageText","lastMessageTime","issueComments","sort","b","Date","_formatDate2","commentAuthorAvatarSrc","commentAuthorName","commentTime","commentUserId","handleCreateTask","_x28","_x29","_handleCreateTask","_callee17","result","_context17","addTaskComment","t0","_x30","_x31","_x32","_addTaskComment","_callee18","commentText","_context18","getUserTasks","getAllTasks","_x33","_getAllTasks","_callee19","tasksData","filteredTaskData","_context19","filter","dateStr","hours","dateObj","includes","replace","getTime","month","getMonth","day","getDate","concat","getHours","padStart","minutes","getMinutes","getTaskAuthorDetails","element","getIssuesCounterString","onPageSpotsCount","totalSpotsCount","avatar","m","trim","CleanTalkWidgetDoboard","selectedData","selectedText","init","_init","_callee8","_context8","getParams","createWidgetElement","widgetElement","bindWidgetInputsInteractive","_x34","script","document","querySelector","src","url","URL","fromEntries","searchParams","entries","_this","submitButton","getElementById","addEventListener","_callee9","taskDescriptionElement","userName","userEmail","userPassword","_userEmailElement","userNameElement","userPasswordElement","userEmailElement","submitTaskResult","_context9","taskTitleElement","style","borderColor","focus","loginSectionElement","classList","contains","disabled","innerText","JSON","stringify","submitTask","cursor","needToLogin","hideContainersSpinner","_createWidgetElement","_callee11","showOnlyCurrentPage","widgetContainer","templateName","variables","issuesQuantityOnPage","taskData","taskNodePath","taskPublicStatusImgSrc","taskPublicStatusHint","taskFullDetails","taskElement","issuesCommentsContainer","dayMessagesData","initIssuerID","userIsIssuer","_iterator","_step","_avatarData","commentData","daysWrapperHTML","currentDayMessages","dayMessagesWrapperHTML","messageId","currentMessageData","sendForm","backToAllIssuesController","widgetClass","paperclipController","_this2","_args11","_context11","createElement","className","innerHTML","currentDomain","location","hostname","currentActiveTaskId","issueTitleElement","issuesCounter","savedIssuesQuantityOnPage","savedIssuesQuantityAll","paperclipImgSrc","sendButtonImgSrc","msgFieldBackgroundImgSrc","loadTemplate","appendChild","t1","bindCreateTaskEvents","getTaskCount","removeTextSelection","elTask","taskDataString","_formatDate","parse","currentPageURL","pageURL","nodePath","window","href","avatarData","getAvatarData","_variables","taskLastMessage","avatarCSSClass","avatarStyle","taskAuthorInitials","initialsClass","t2","taskAnalysis","startSelectPosition","endSelectPosition","text","start","end","substring","beforeText","afterText","bindIssuesClick","chevronBackTitle","console","table","commentContainerBackgroundSrc","err","t3","t4","localeCompare","t5","t6","t7","t8","dayContentMonthDay","dayContentMessages","setTimeout","contentContainer","scrollTo","top","scrollHeight","behavior","_ref9","_callee10","input","_context10","preventDefault","alert","message","_x36","_document$querySelect","hide","_x35","_this3","querySelectorAll","item","_callee12","_context12","scrollToNodePath","getAttribute","_loadTemplate","_callee13","template","_i","_Object$entries","placeholder","_args13","_context13","_Object$entries$_i","replaceAll","_x37","_getTaskCount","_callee14","taskCountElement","_context14","remove","_submitTask","_callee15","_context15","registerUser","loginUser","_x38","setItem","error","span","parent","parentNode","firstChild","insertBefore","removeChild","add","accordionController","closest","toggle","widgetTimeout","openWidget","widgetExist","getSelectedData","anchorOffset","focusOffset","Math","min","max","calculateNodePath","focusNode","node","path","index","sibling","previousSibling","nodeType","unshift","shift","retrieveNodeFromPath","children","taskSelectedData","scrollIntoView","block","spinners","getElementsByClassName","display","containerClassesToShow","_i2","containers","_i3","authorDetails","hideAvatar","toUpperCase","clearTimeout","selection","getSelection"],"mappings":"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"}