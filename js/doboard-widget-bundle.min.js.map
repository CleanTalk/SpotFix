{"version":3,"file":"doboard-widget-bundle.min.js","sources":["doboard-widget-bundle.js"],"sourcesContent":["\"use strict\";\n\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t.return || t.return(); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i.return && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, catch: function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar DOBOARD_API_URL = 'https://api-next.doboard.com';\nvar createTaskDoboard = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(sessionId, taskDetails) {\n    var accountId, formData, response, responseBody;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          accountId = taskDetails.accountId;\n          formData = new FormData();\n          formData.append('session_id', sessionId);\n          formData.append('project_token', taskDetails.projectToken);\n          formData.append('project_id', taskDetails.projectId);\n          formData.append('user_id', localStorage.getItem('spotfix_user_id'));\n          formData.append('name', taskDetails.taskTitle);\n          formData.append('comment', taskDetails.taskDescription);\n          formData.append('meta', taskDetails.taskMeta);\n          _context.next = 11;\n          return fetch(DOBOARD_API_URL + '/' + accountId + '/task_add', {\n            method: 'POST',\n            body: formData\n          });\n        case 11:\n          response = _context.sent;\n          if (response.ok) {\n            _context.next = 14;\n            break;\n          }\n          throw new Error('Failed to create task');\n        case 14:\n          _context.next = 16;\n          return response.json();\n        case 16:\n          responseBody = _context.sent;\n          if (!(!responseBody || !responseBody.data)) {\n            _context.next = 19;\n            break;\n          }\n          throw new Error('Invalid response from server');\n        case 19:\n          if (!(responseBody.data.operation_status === 'FAILED')) {\n            _context.next = 21;\n            break;\n          }\n          throw new Error(responseBody.data.operation_message);\n        case 21:\n          if (!(responseBody.data.operation_status === 'SUCCESS')) {\n            _context.next = 23;\n            break;\n          }\n          return _context.abrupt(\"return\", {\n            taskId: responseBody.data.task_id,\n            isPublic: 1 //todo MOCK!\n          });\n        case 23:\n          throw new Error('Unknown error occurred during creating task');\n        case 24:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function createTaskDoboard(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar createTaskCommentDoboard = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(accountId, sessionId, taskId, comment, projectToken) {\n    var status,\n      response,\n      responseBody,\n      _args2 = arguments;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          status = _args2.length > 5 && _args2[5] !== undefined ? _args2[5] : 'ACTIVE';\n          _context2.next = 3;\n          return fetch(DOBOARD_API_URL + '/' + accountId + '/comment_add' + '?session_id=' + sessionId + '&task_id=' + taskId + '&comment=' + comment + '&project_token=' + projectToken + '&status=' + status, {\n            method: 'GET'\n          });\n        case 3:\n          response = _context2.sent;\n          if (response.ok) {\n            _context2.next = 6;\n            break;\n          }\n          throw new Error('Failed to create task comment');\n        case 6:\n          _context2.next = 8;\n          return response.json();\n        case 8:\n          responseBody = _context2.sent;\n          if (!(!responseBody || !responseBody.data)) {\n            _context2.next = 11;\n            break;\n          }\n          throw new Error('Invalid response from server');\n        case 11:\n          if (!(responseBody.data.operation_status === 'FAILED')) {\n            _context2.next = 13;\n            break;\n          }\n          throw new Error(responseBody.data.operation_message);\n        case 13:\n          if (!(responseBody.data.operation_status === 'SUCCESS')) {\n            _context2.next = 15;\n            break;\n          }\n          return _context2.abrupt(\"return\", {\n            commentId: responseBody.data.comment_id\n          });\n        case 15:\n          throw new Error('Unknown error occurred during creating task comment');\n        case 16:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function createTaskCommentDoboard(_x3, _x4, _x5, _x6, _x7) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar registerUserDoboard = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(projectToken, accountId, email, nickname) {\n    var formData, response, responseBody;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          formData = new FormData();\n          formData.append('project_token', projectToken);\n          formData.append('account_id', accountId);\n          if (email && nickname) {\n            formData.append('email', email);\n            formData.append('nickname', nickname);\n          }\n          _context3.next = 6;\n          return fetch(DOBOARD_API_URL + '/user_registration', {\n            method: 'POST',\n            body: formData\n          });\n        case 6:\n          response = _context3.sent;\n          if (response.ok) {\n            _context3.next = 9;\n            break;\n          }\n          throw new Error('Registration failed');\n        case 9:\n          _context3.next = 11;\n          return response.json();\n        case 11:\n          responseBody = _context3.sent;\n          if (!(!responseBody || !responseBody.data)) {\n            _context3.next = 14;\n            break;\n          }\n          throw new Error('Invalid response from server');\n        case 14:\n          if (!(responseBody.data.operation_status === 'FAILED')) {\n            _context3.next = 16;\n            break;\n          }\n          throw new Error(responseBody.data.operation_message);\n        case 16:\n          if (!(responseBody.data.operation_status === 'SUCCESS')) {\n            _context3.next = 20;\n            break;\n          }\n          if (!(responseBody.data.user_email_confirmed === 1)) {\n            _context3.next = 19;\n            break;\n          }\n          return _context3.abrupt(\"return\", {\n            accountExists: true\n          });\n        case 19:\n          return _context3.abrupt(\"return\", {\n            sessionId: responseBody.data.session_id,\n            userId: responseBody.data.user_id,\n            email: responseBody.data.email\n          });\n        case 20:\n          throw new Error('Unknown error occurred during registration');\n        case 21:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function registerUserDoboard(_x8, _x9, _x0, _x1) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar _loginUser = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(email, password) {\n    var formData, response, responseBody;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          formData = new FormData();\n          formData.append('email', email);\n          formData.append('password', password);\n          _context4.next = 5;\n          return fetch(DOBOARD_API_URL + '/user_authorize', {\n            method: 'POST',\n            body: formData\n          });\n        case 5:\n          response = _context4.sent;\n          if (response.ok) {\n            _context4.next = 8;\n            break;\n          }\n          throw new Error('Authorization failed');\n        case 8:\n          _context4.next = 10;\n          return response.json();\n        case 10:\n          responseBody = _context4.sent;\n          if (!(!responseBody || !responseBody.data)) {\n            _context4.next = 13;\n            break;\n          }\n          throw new Error('Invalid response from server');\n        case 13:\n          if (!(responseBody.data.operation_status === 'FAILED')) {\n            _context4.next = 15;\n            break;\n          }\n          throw new Error(responseBody.data.operation_message);\n        case 15:\n          if (!(responseBody.data.operation_status === 'SUCCESS')) {\n            _context4.next = 17;\n            break;\n          }\n          return _context4.abrupt(\"return\", {\n            sessionId: responseBody.data.session_id,\n            userId: responseBody.data.user_id,\n            email: email\n          });\n        case 17:\n          throw new Error('Unknown error occurred during registration');\n        case 18:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function loginUser(_x10, _x11) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar getTasksDoboard = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(projectToken, sessionId, accountId, projectId, userId) {\n    var formData, response, responseBody;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          formData = new FormData();\n          formData.append('project_token', projectToken);\n          formData.append('session_id', sessionId);\n          formData.append('project_id', projectId);\n          formData.append('status', 'ACTIVE');\n          if (userId) {\n            formData.append('user_id', userId);\n          }\n          _context5.next = 8;\n          return fetch(DOBOARD_API_URL + '/' + accountId + '/task_get', {\n            method: 'POST',\n            body: formData\n          });\n        case 8:\n          response = _context5.sent;\n          if (response.ok) {\n            _context5.next = 11;\n            break;\n          }\n          throw new Error('Getting tasks failed');\n        case 11:\n          _context5.next = 13;\n          return response.json();\n        case 13:\n          responseBody = _context5.sent;\n          if (!(!responseBody || !responseBody.data)) {\n            _context5.next = 16;\n            break;\n          }\n          throw new Error('Invalid response from server');\n        case 16:\n          if (!(responseBody.data.operation_status === 'FAILED')) {\n            _context5.next = 18;\n            break;\n          }\n          throw new Error(responseBody.data.operation_message);\n        case 18:\n          if (!(responseBody.data.operation_status === 'SUCCESS')) {\n            _context5.next = 20;\n            break;\n          }\n          return _context5.abrupt(\"return\", responseBody.data.tasks.map(function (task) {\n            return {\n              taskId: task.task_id,\n              taskTitle: task.name,\n              taskLastUpdate: task.updated,\n              taskCreated: task.created,\n              taskCreatorTaskUser: task.creator_user_id,\n              taskMeta: task.meta\n            };\n          }));\n        case 20:\n          throw new Error('Unknown error occurred during getting tasks');\n        case 21:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return function getTasksDoboard(_x12, _x13, _x14, _x15, _x16) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar getTaskCommentsDoboard = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(taskId, sessionId, accountId, projectToken) {\n    var status,\n      response,\n      responseBody,\n      _args6 = arguments;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          status = _args6.length > 4 && _args6[4] !== undefined ? _args6[4] : 'ACTIVE';\n          _context6.next = 3;\n          return fetch(DOBOARD_API_URL + '/' + accountId + '/comment_get' + '?session_id=' + sessionId + '&status=' + status + '&task_id=' + taskId + '&project_token=' + projectToken, {\n            method: 'GET'\n          });\n        case 3:\n          response = _context6.sent;\n          if (response.ok) {\n            _context6.next = 6;\n            break;\n          }\n          throw new Error('Getting logs failed');\n        case 6:\n          _context6.next = 8;\n          return response.json();\n        case 8:\n          responseBody = _context6.sent;\n          if (!(!responseBody || !responseBody.data)) {\n            _context6.next = 11;\n            break;\n          }\n          throw new Error('Invalid response from server');\n        case 11:\n          if (!(responseBody.data.operation_status === 'FAILED')) {\n            _context6.next = 13;\n            break;\n          }\n          throw new Error(responseBody.data.operation_message);\n        case 13:\n          if (!(responseBody.data.operation_status === 'SUCCESS')) {\n            _context6.next = 16;\n            break;\n          }\n          console.log(responseBody.data);\n          return _context6.abrupt(\"return\", responseBody.data.comments.map(function (comment) {\n            return {\n              commentId: comment.comment_id,\n              userId: comment.user_id,\n              comment: comment.comment,\n              commentBody: comment.comment_text,\n              commentDate: comment.updated,\n              status: comment.status,\n              issueTitle: comment.task_name\n            };\n          }));\n        case 16:\n          throw new Error('Unknown error occurred during getting comments');\n        case 17:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6);\n  }));\n  return function getTaskCommentsDoboard(_x17, _x18, _x19, _x20) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nvar getUserDoboard = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(sessionId, projectToken, accountId) {\n    var response, responseBody;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return fetch(DOBOARD_API_URL + '/' + accountId + '/user_get' + '?session_id=' + sessionId + '&project_token=' + projectToken, {\n            method: 'GET'\n          });\n        case 2:\n          response = _context7.sent;\n          if (response.ok) {\n            _context7.next = 5;\n            break;\n          }\n          throw new Error('Getting user failed');\n        case 5:\n          _context7.next = 7;\n          return response.json();\n        case 7:\n          responseBody = _context7.sent;\n          if (responseBody) {\n            _context7.next = 10;\n            break;\n          }\n          throw new Error('Invalid response from server');\n        case 10:\n          if (!(responseBody.data && responseBody.data.operation_status)) {\n            _context7.next = 17;\n            break;\n          }\n          if (!(responseBody.data.operation_status === 'FAILED')) {\n            _context7.next = 13;\n            break;\n          }\n          throw new Error(responseBody.data.operation_message);\n        case 13:\n          if (!(responseBody.data.operation_status === 'SUCCESS')) {\n            _context7.next = 17;\n            break;\n          }\n          if (!Array.isArray(responseBody.data.users)) {\n            _context7.next = 16;\n            break;\n          }\n          return _context7.abrupt(\"return\", responseBody.data.users);\n        case 16:\n          return _context7.abrupt(\"return\", []);\n        case 17:\n          if (!responseBody.operation_status) {\n            _context7.next = 24;\n            break;\n          }\n          if (!(responseBody.operation_status === 'FAILED')) {\n            _context7.next = 20;\n            break;\n          }\n          throw new Error(responseBody.operation_message);\n        case 20:\n          if (!(responseBody.operation_status === 'SUCCESS')) {\n            _context7.next = 24;\n            break;\n          }\n          if (!Array.isArray(responseBody.users)) {\n            _context7.next = 23;\n            break;\n          }\n          return _context7.abrupt(\"return\", responseBody.users);\n        case 23:\n          return _context7.abrupt(\"return\", []);\n        case 24:\n          throw new Error('Unknown error occurred during getting user');\n        case 25:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7);\n  }));\n  return function getUserDoboard(_x21, _x22, _x23) {\n    return _ref7.apply(this, arguments);\n  };\n}();\nvar userUpdateDoboard = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(projectToken, accountId, sessionId, userId, timezone) {\n    var response, responseBody;\n    return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.next = 2;\n          return fetch(DOBOARD_API_URL + '/' + accountId + '/user_update' + '?session_id=' + sessionId + '&project_token=' + projectToken + '&user_id=' + userId + '&timezone=' + timezone, {\n            method: 'GET'\n          });\n        case 2:\n          response = _context8.sent;\n          if (response.ok) {\n            _context8.next = 5;\n            break;\n          }\n          throw new Error('User update failed');\n        case 5:\n          _context8.next = 7;\n          return response.json();\n        case 7:\n          responseBody = _context8.sent;\n          if (!(!responseBody || !responseBody.data)) {\n            _context8.next = 10;\n            break;\n          }\n          throw new Error('Invalid response from server');\n        case 10:\n          if (!(responseBody.data.operation_status === 'FAILED')) {\n            _context8.next = 12;\n            break;\n          }\n          throw new Error(responseBody.data.operation_message);\n        case 12:\n          if (!(responseBody.data.operation_status === 'SUCCESS')) {\n            _context8.next = 14;\n            break;\n          }\n          return _context8.abrupt(\"return\", {\n            success: true\n          });\n        case 14:\n          throw new Error('Unknown error occurred during user update');\n        case 15:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee8);\n  }));\n  return function userUpdateDoboard(_x24, _x25, _x26, _x27, _x28) {\n    return _ref8.apply(this, arguments);\n  };\n}();\nfunction getTaskFullDetails(_x29, _x30) {\n  return _getTaskFullDetails.apply(this, arguments);\n}\nfunction _getTaskFullDetails() {\n  _getTaskFullDetails = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee15(params, taskId) {\n    var sessionId, comments, users, lastComment, author, date, time, dt, avatarSrc, authorName;\n    return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n      while (1) switch (_context15.prev = _context15.next) {\n        case 0:\n          sessionId = localStorage.getItem('spotfix_session_id');\n          _context15.next = 3;\n          return getTaskCommentsDoboard(taskId, sessionId, params.accountId, params.projectToken);\n        case 3:\n          comments = _context15.sent;\n          _context15.next = 6;\n          return getUserDoboard(sessionId, params.projectToken, params.accountId);\n        case 6:\n          users = _context15.sent;\n          /*console.log(users);\n          console.log(comments);*/\n          // Last comment\n          lastComment = comments.length > 0 ? comments[0] : null; // Author of the last comment\n          author = null;\n          if (lastComment && users && users.length > 0) {\n            author = users.find(function (u) {\n              return String(u.user_id) === String(lastComment.userId);\n            });\n          }\n          // Format date\n          date = '', time = '';\n          if (lastComment) {\n            dt = formatDate(lastComment.commentDate);\n            date = dt.date;\n            time = dt.time;\n          }\n          // Get the avatar and the name through separate functions\n          avatarSrc = getAvatarSrc(author);\n          authorName = getAuthorName(author);\n          return _context15.abrupt(\"return\", {\n            taskId: taskId,\n            taskAuthorAvatarImgSrc: avatarSrc,\n            taskAuthorName: authorName,\n            lastMessageText: lastComment ? lastComment.commentBody : 'No messages yet',\n            lastMessageTime: time,\n            issueTitle: comments.length > 0 ? comments[0].issueTitle : 'No Title',\n            issueComments: comments.sort(function (a, b) {\n              return new Date(a.commentDate) - new Date(b.commentDate);\n            }).map(function (comment) {\n              var _formatDate2 = formatDate(comment.commentDate),\n                date = _formatDate2.date,\n                time = _formatDate2.time;\n              var author = null;\n              if (users && users.length > 0) {\n                author = users.find(function (u) {\n                  return String(u.user_id) === String(comment.userId);\n                });\n              }\n              return {\n                commentAuthorAvatarSrc: getAvatarSrc(author),\n                commentAuthorName: getAuthorName(author),\n                commentBody: comment.commentBody,\n                commentDate: date,\n                commentTime: time,\n                commentUserId: comment.userId || 'Unknown User'\n              };\n            })\n          });\n        case 15:\n        case \"end\":\n          return _context15.stop();\n      }\n    }, _callee15);\n  }));\n  return _getTaskFullDetails.apply(this, arguments);\n}\nfunction handleCreateTask(_x31, _x32) {\n  return _handleCreateTask.apply(this, arguments);\n}\nfunction _handleCreateTask() {\n  _handleCreateTask = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee16(sessionId, taskDetails) {\n    var result;\n    return _regeneratorRuntime().wrap(function _callee16$(_context16) {\n      while (1) switch (_context16.prev = _context16.next) {\n        case 0:\n          _context16.prev = 0;\n          _context16.next = 3;\n          return createTaskDoboard(sessionId, taskDetails);\n        case 3:\n          result = _context16.sent;\n          if (!(result && result.taskId && taskDetails.taskDescription)) {\n            _context16.next = 7;\n            break;\n          }\n          _context16.next = 7;\n          return addTaskComment({\n            projectToken: taskDetails.projectToken,\n            accountId: taskDetails.accountId\n          }, result.taskId, taskDetails.taskDescription);\n        case 7:\n          return _context16.abrupt(\"return\", result);\n        case 10:\n          _context16.prev = 10;\n          _context16.t0 = _context16[\"catch\"](0);\n          throw _context16.t0;\n        case 13:\n        case \"end\":\n          return _context16.stop();\n      }\n    }, _callee16, null, [[0, 10]]);\n  }));\n  return _handleCreateTask.apply(this, arguments);\n}\nfunction addTaskComment(_x33, _x34, _x35) {\n  return _addTaskComment.apply(this, arguments);\n}\nfunction _addTaskComment() {\n  _addTaskComment = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee17(params, taskId, commentText) {\n    var sessionId;\n    return _regeneratorRuntime().wrap(function _callee17$(_context17) {\n      while (1) switch (_context17.prev = _context17.next) {\n        case 0:\n          sessionId = localStorage.getItem('spotfix_session_id');\n          if (sessionId) {\n            _context17.next = 3;\n            break;\n          }\n          throw new Error('No session');\n        case 3:\n          if (!(!params.projectToken || !params.accountId)) {\n            _context17.next = 5;\n            break;\n          }\n          throw new Error('Missing params');\n        case 5:\n          _context17.next = 7;\n          return createTaskCommentDoboard(params.accountId, sessionId, taskId, commentText, params.projectToken);\n        case 7:\n          return _context17.abrupt(\"return\", _context17.sent);\n        case 8:\n        case \"end\":\n          return _context17.stop();\n      }\n    }, _callee17);\n  }));\n  return _addTaskComment.apply(this, arguments);\n}\nfunction getUserTasks(params) {\n  if (!localStorage.getItem('spotfix_session_id')) {\n    return {};\n  }\n  var projectToken = params.projectToken;\n  var sessionId = localStorage.getItem('spotfix_session_id');\n  var userId = localStorage.getItem('spotfix_user_id');\n  return getTasksDoboard(projectToken, sessionId, params.accountId, params.projectId, userId);\n}\nfunction getAllTasks(_x36) {\n  return _getAllTasks.apply(this, arguments);\n}\nfunction _getAllTasks() {\n  _getAllTasks = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee18(params) {\n    var projectToken, sessionId, tasksData, filteredTaskData;\n    return _regeneratorRuntime().wrap(function _callee18$(_context18) {\n      while (1) switch (_context18.prev = _context18.next) {\n        case 0:\n          if (localStorage.getItem('spotfix_session_id')) {\n            _context18.next = 2;\n            break;\n          }\n          return _context18.abrupt(\"return\", {});\n        case 2:\n          projectToken = params.projectToken;\n          sessionId = localStorage.getItem('spotfix_session_id');\n          _context18.next = 6;\n          return getTasksDoboard(projectToken, sessionId, params.accountId, params.projectId);\n        case 6:\n          tasksData = _context18.sent;\n          // Get only tasks with metadata\n          filteredTaskData = tasksData.filter(function (task) {\n            return task.taskMeta;\n          });\n          return _context18.abrupt(\"return\", filteredTaskData);\n        case 9:\n        case \"end\":\n          return _context18.stop();\n      }\n    }, _callee18);\n  }));\n  return _getAllTasks.apply(this, arguments);\n}\nfunction formatDate(dateStr) {\n  var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n  // dateStr expected format: 'YYYY-MM-DD HH:mm:ss' or 'YYYY-MM-DDTHH:mm:ssZ'\n  if (!dateStr) return {\n    date: '',\n    time: ''\n  };\n  var dateObj;\n  if (dateStr.includes('T')) {\n    dateObj = new Date(dateStr);\n  } else if (dateStr.includes(' ')) {\n    dateObj = new Date(dateStr.replace(' ', 'T'));\n  } else {\n    dateObj = new Date(dateStr);\n  }\n  if (isNaN(dateObj.getTime())) return {\n    date: '',\n    time: ''\n  };\n\n  // Adjust to local timezone\n  var offsetMinutes = dateObj.getTimezoneOffset();\n  var localDateObj = new Date(dateObj.getTime() - offsetMinutes * 60000);\n  var month = months[localDateObj.getMonth()];\n  var day = localDateObj.getDate();\n  var date = \"\".concat(month, \" \").concat(day);\n  var hours = localDateObj.getHours().toString().padStart(2, '0');\n  var minutes = localDateObj.getMinutes().toString().padStart(2, '0');\n  var time = \"\".concat(hours, \":\").concat(minutes);\n  return {\n    date: date,\n    time: time\n  };\n}\nfunction getTaskAuthorDetails(params, taskId) {\n  var sessionId = localStorage.getItem('spotfix_session_id');\n  var mockUsersData = [{\n    'taskId': '1',\n    'taskAuthorAvatarImgSrc': 'https://s3.eu-central-1.amazonaws.com/cleantalk-ctask-atts/accounts/1/avatars/081a1b65d20fe318/m.jpg',\n    'taskAuthorName': 'Test All Issues Single Author Name'\n  }];\n  var defaultData = {\n    'taskId': null,\n    'taskAuthorAvatarImgSrc': null,\n    'taskAuthorName': 'Task Author'\n  };\n  var data = mockUsersData.find(function (element) {\n    return element.taskId === taskId;\n  });\n  return data === undefined ? defaultData : data;\n}\nfunction getIssuesCounterString(onPageSpotsCount, totalSpotsCount) {\n  return \"(\".concat(onPageSpotsCount, \"/\").concat(totalSpotsCount, \")\");\n}\n\n// Get the author's avatar\nfunction getAvatarSrc(author) {\n  if (author && author.avatar) {\n    if (_typeof(author.avatar) === 'object' && author.avatar.m) {\n      return author.avatar.m;\n    } else if (typeof author.avatar === 'string') {\n      return author.avatar;\n    }\n  }\n  return null;\n}\n\n// Get the author's name\nfunction getAuthorName(author) {\n  if (author) {\n    if (author.name && author.name.trim().length > 0) {\n      return author.name;\n    } else if (author.email && author.email.trim().length > 0) {\n      return author.email;\n    }\n  }\n  return 'Unknown Author';\n}\nfunction registerUser(taskDetails) {\n  var userEmail = taskDetails.userEmail;\n  var userName = taskDetails.userName;\n  var projectToken = taskDetails.projectToken;\n  var accountId = taskDetails.accountId;\n  var resultRegisterUser = registerUserDoboard(projectToken, accountId, userEmail, userName).then(function (response) {\n    if (response.accountExists) {\n      document.querySelector(\".doboard_task_widget-accordion>.doboard_task_widget-input-container\").innerText = 'Account already exists. Please, login usin your password.';\n      document.querySelector(\".doboard_task_widget-accordion>.doboard_task_widget-input-container.hidden\").classList.remove('hidden');\n      document.getElementById(\"doboard_task_widget-user_password\").focus();\n    } else if (response.sessionId) {\n      localStorage.setItem('spotfix_session_id', response.sessionId);\n      localStorage.setItem('spotfix_user_id', response.userId);\n      localStorage.setItem('spotfix_email', response.email);\n      userUpdate(projectToken, accountId);\n    } else {\n      throw new Error('Session ID not found in response');\n    }\n  }).catch(function (error) {\n    throw error;\n  });\n  return resultRegisterUser;\n}\nfunction userUpdate(projectToken, accountId) {\n  var sessionId = localStorage.getItem('spotfix_session_id');\n  var userId = localStorage.getItem('spotfix_user_id');\n  var timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n  return userUpdateDoboard(projectToken, accountId, sessionId, userId, timezone);\n}\n\n/**\n * Widget class to create a task widget\n */\nvar CleanTalkWidgetDoboard = /*#__PURE__*/function () {\n  /**\n   * Constructor\n   */\n  function CleanTalkWidgetDoboard(selectedData, type) {\n    _classCallCheck(this, CleanTalkWidgetDoboard);\n    _defineProperty(this, \"selectedText\", '');\n    _defineProperty(this, \"selectedData\", {});\n    _defineProperty(this, \"widgetElement\", null);\n    _defineProperty(this, \"params\", {});\n    _defineProperty(this, \"currentActiveTaskId\", 0);\n    _defineProperty(this, \"savedIssuesQuantityOnPage\", 0);\n    _defineProperty(this, \"savedIssuesQuantityAll\", 0);\n    this.selectedData = selectedData;\n    this.selectedText = selectedData.selectedText;\n    this.init(type);\n  }\n\n  /**\n   * Initialize the widget\n   */\n  return _createClass(CleanTalkWidgetDoboard, [{\n    key: \"init\",\n    value: (function () {\n      var _init = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(type) {\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) switch (_context9.prev = _context9.next) {\n            case 0:\n              this.params = this.getParams();\n              _context9.next = 3;\n              return this.createWidgetElement(type);\n            case 3:\n              this.widgetElement = _context9.sent;\n              this.bindWidgetInputsInteractive();\n            case 5:\n            case \"end\":\n              return _context9.stop();\n          }\n        }, _callee9, this);\n      }));\n      function init(_x37) {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }())\n  }, {\n    key: \"getParams\",\n    value: function getParams() {\n      var script = document.querySelector(\"script[src*=\\\"doboard-widget-bundle.min.js\\\"]\");\n      if (!script || !script.src) {\n        throw new Error('Script not provided');\n      }\n      var url = new URL(script.src);\n      var params = Object.fromEntries(url.searchParams.entries());\n      if (!params) {\n        throw new Error('Script params not provided');\n      }\n      if (!params.projectToken || !params.accountId || !params.projectId) {\n        throw new Error('Necessary script params not provided');\n      }\n      return params;\n    }\n\n    /**\n     * Binding events to create a task\n     */\n  }, {\n    key: \"bindCreateTaskEvents\",\n    value: function bindCreateTaskEvents() {\n      var _this = this;\n      var submitButton = document.getElementById('doboard_task_widget-submit_button');\n      if (submitButton) {\n        submitButton.addEventListener('click', /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee0() {\n          var taskTitleElement, taskTitle, taskDescriptionElement, taskDescription, userName, userEmail, userPassword, loginSectionElement, _userEmailElement, userNameElement, userPasswordElement, userEmailElement, submitButton, taskDetails, submitTaskResult;\n          return _regeneratorRuntime().wrap(function _callee0$(_context0) {\n            while (1) switch (_context0.prev = _context0.next) {\n              case 0:\n                // Check required fields: Report about and Description\n                taskTitleElement = document.getElementById('doboard_task_widget-title');\n                taskTitle = taskTitleElement.value;\n                if (taskTitle) {\n                  _context0.next = 7;\n                  break;\n                }\n                taskTitleElement.style.borderColor = 'red';\n                taskTitleElement.focus();\n                taskTitleElement.addEventListener('input', function () {\n                  this.style.borderColor = '';\n                });\n                return _context0.abrupt(\"return\");\n              case 7:\n                taskDescriptionElement = document.getElementById('doboard_task_widget-description');\n                taskDescription = taskDescriptionElement.value;\n                if (taskDescription) {\n                  _context0.next = 14;\n                  break;\n                }\n                taskDescriptionElement.style.borderColor = 'red';\n                taskDescriptionElement.focus();\n                taskDescriptionElement.addEventListener('input', function () {\n                  this.style.borderColor = '';\n                });\n                return _context0.abrupt(\"return\");\n              case 14:\n                // If login section is open, check required fields: Nickname, Email\n                userName = '';\n                userEmail = '';\n                userPassword = '';\n                loginSectionElement = document.querySelector('.doboard_task_widget-login');\n                if (!(loginSectionElement && loginSectionElement.classList.contains('active'))) {\n                  _context0.next = 42;\n                  break;\n                }\n                _userEmailElement = document.getElementById('doboard_task_widget-user_email');\n                userNameElement = document.getElementById('doboard_task_widget-user_name');\n                userPasswordElement = document.getElementById('doboard_task_widget-user_password');\n                userEmail = _userEmailElement.value;\n                if (userEmail) {\n                  _context0.next = 28;\n                  break;\n                }\n                _userEmailElement.style.borderColor = 'red';\n                _userEmailElement.focus();\n                _userEmailElement.addEventListener('input', function () {\n                  this.style.borderColor = '';\n                });\n                return _context0.abrupt(\"return\");\n              case 28:\n                if (!(_userEmailElement && userNameElement)) {\n                  _context0.next = 35;\n                  break;\n                }\n                userName = userNameElement.value;\n                if (userName) {\n                  _context0.next = 35;\n                  break;\n                }\n                userNameElement.style.borderColor = 'red';\n                userNameElement.focus();\n                userNameElement.addEventListener('input', function () {\n                  this.style.borderColor = '';\n                });\n                return _context0.abrupt(\"return\");\n              case 35:\n                if (!(_userEmailElement && userPasswordElement && !userNameElement)) {\n                  _context0.next = 42;\n                  break;\n                }\n                userPassword = userPasswordElement.value;\n                if (userPassword) {\n                  _context0.next = 42;\n                  break;\n                }\n                userPasswordElement.style.borderColor = 'red';\n                userPasswordElement.focus();\n                userPasswordElement.addEventListener('input', function () {\n                  this.style.borderColor = '';\n                });\n                return _context0.abrupt(\"return\");\n              case 42:\n                // If it is the login request\n                userEmailElement = document.getElementById('doboard_task_widget-user_email');\n                userEmail = userEmailElement.value;\n\n                // Make the submit button disable with spinner\n                submitButton = document.getElementById('doboard_task_widget-submit_button');\n                submitButton.disabled = true;\n                submitButton.innerText = 'Creating spot...';\n                taskDetails = {\n                  taskTitle: taskTitle,\n                  taskDescription: taskDescription,\n                  //typeSend: typeSend,\n                  selectedData: _this.selectedData,\n                  projectToken: _this.params.projectToken,\n                  projectId: _this.params.projectId,\n                  accountId: _this.params.accountId,\n                  taskMeta: JSON.stringify(_this.selectedData)\n                };\n                if (userEmail) {\n                  taskDetails.userEmail = userEmail;\n                }\n                if (userName) {\n                  taskDetails.userName = userName;\n                }\n                if (userPassword) {\n                  taskDetails.userPassword = userPassword;\n                }\n                _context0.next = 53;\n                return _this.submitTask(taskDetails);\n              case 53:\n                submitTaskResult = _context0.sent;\n                // Return the submit button normal state\n                submitButton.disabled = false;\n                submitButton.style.cursor = 'pointer';\n                if (!submitTaskResult.needToLogin) {\n                  _context0.next = 58;\n                  break;\n                }\n                return _context0.abrupt(\"return\");\n              case 58:\n                if (submitTaskResult.isPublic !== undefined) {\n                  _this.selectedData.isPublic = submitTaskResult.isPublic;\n                }\n                _this.selectedData = {};\n                _context0.next = 62;\n                return _this.createWidgetElement('all_issues');\n              case 62:\n                hideContainersSpinner(false);\n              case 63:\n              case \"end\":\n                return _context0.stop();\n            }\n          }, _callee0);\n        })));\n      }\n    }\n\n    /**\n     * Create widget element\n     * @return {HTMLElement} widget element\n     */\n  }, {\n    key: \"createWidgetElement\",\n    value: (function () {\n      var _createWidgetElement = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(type) {\n        var _this2 = this,\n          _document$querySelect;\n        var showOnlyCurrentPage,\n          widgetContainer,\n          templateName,\n          variables,\n          issuesQuantityOnPage,\n          tasks,\n          spotsToBeHighlighted,\n          i,\n          elTask,\n          taskId,\n          taskTitle,\n          taskDataString,\n          _formatDate,\n          lastMessageTime,\n          taskData,\n          currentPageURL,\n          taskNodePath,\n          taskPublicStatusImgSrc,\n          taskPublicStatusHint,\n          taskFullDetails,\n          avatarData,\n          _variables,\n          taskDetails,\n          issuesCommentsContainer,\n          dayMessagesData,\n          initIssuerID,\n          userIsIssuer,\n          _iterator,\n          _step,\n          comment,\n          _avatarData,\n          commentData,\n          daysWrapperHTML,\n          day,\n          currentDayMessages,\n          dayMessagesWrapperHTML,\n          messageId,\n          currentMessageData,\n          sendForm,\n          backToAllIssuesController,\n          widgetClass,\n          paperclipController,\n          _args10 = arguments;\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) switch (_context10.prev = _context10.next) {\n            case 0:\n              showOnlyCurrentPage = _args10.length > 1 && _args10[1] !== undefined ? _args10[1] : true;\n              widgetContainer = document.querySelector('.doboard_task_widget') ? document.querySelector('.doboard_task_widget') : document.createElement('div');\n              widgetContainer.className = 'doboard_task_widget';\n              widgetContainer.innerHTML = '';\n              templateName = '';\n              variables = {};\n              _context10.t0 = type;\n              _context10.next = _context10.t0 === 'create_issue' ? 9 : _context10.t0 === 'wrap' ? 12 : _context10.t0 === 'all_issues' ? 14 : _context10.t0 === 'concrete_issue' ? 16 : 20;\n              break;\n            case 9:\n              templateName = 'create_issue';\n              variables = {\n                selectedText: this.selectedText,\n                currentDomain: document.location.hostname || ''\n              };\n              return _context10.abrupt(\"break\", 21);\n            case 12:\n              templateName = 'wrap';\n              return _context10.abrupt(\"break\", 21);\n            case 14:\n              templateName = 'all_issues';\n              return _context10.abrupt(\"break\", 21);\n            case 16:\n              templateName = 'concrete_issue';\n              // todo: this is call duplicate!\n              getTaskFullDetails(this.params, this.currentActiveTaskId).then(function (taskDetails) {\n                var issueTitle = taskDetails.issueTitle;\n                var issueTitleElement = document.querySelector('.doboard_task_widget-issue-title');\n                if (issueTitleElement) {\n                  issueTitleElement.innerHTML = issueTitle;\n                }\n              });\n              variables = {\n                issueTitle: '...',\n                issuesCounter: getIssuesCounterString(this.savedIssuesQuantityOnPage, this.savedIssuesQuantityAll),\n                paperclipImgSrc: '/spotfix/img/send-message--paperclip.svg',\n                sendButtonImgSrc: '/spotfix/img/send-message--button.svg',\n                msgFieldBackgroundImgSrc: '/spotfix/img/send-message--input-background.svg'\n              };\n              return _context10.abrupt(\"break\", 21);\n            case 20:\n              return _context10.abrupt(\"break\", 21);\n            case 21:\n              _context10.next = 23;\n              return this.loadTemplate(templateName, variables);\n            case 23:\n              widgetContainer.innerHTML = _context10.sent;\n              document.body.appendChild(widgetContainer);\n              _context10.t1 = type;\n              _context10.next = _context10.t1 === 'create_issue' ? 28 : _context10.t1 === 'wrap' ? 30 : _context10.t1 === 'all_issues' ? 35 : _context10.t1 === 'concrete_issue' ? 79 : 122;\n              break;\n            case 28:\n              this.bindCreateTaskEvents();\n              return _context10.abrupt(\"break\", 123);\n            case 30:\n              _context10.next = 32;\n              return this.getTaskCount();\n            case 32:\n              document.querySelector('.doboard_task_widget-wrap').addEventListener('click', function () {\n                _this2.createWidgetElement('all_issues');\n              });\n              hideContainersSpinner(false);\n              return _context10.abrupt(\"break\", 123);\n            case 35:\n              this.removeTextSelection();\n              issuesQuantityOnPage = 0;\n              _context10.next = 39;\n              return getAllTasks(this.params);\n            case 39:\n              tasks = _context10.sent;\n              spotsToBeHighlighted = [];\n              if (!(tasks.length > 0)) {\n                _context10.next = 75;\n                break;\n              }\n              document.querySelector(\".doboard_task_widget-all_issues-container\").innerHTML = '';\n              i = 0;\n            case 44:\n              if (!(i < tasks.length)) {\n                _context10.next = 71;\n                break;\n              }\n              elTask = tasks[i]; // Data from api\n              taskId = elTask.taskId;\n              taskTitle = elTask.taskTitle;\n              taskDataString = elTask.taskMeta;\n              _formatDate = formatDate(elTask.taskLastUpdate), lastMessageTime = _formatDate.time;\n              taskData = taskDataString ? JSON.parse(taskDataString) : null;\n              currentPageURL = taskData ? taskData.pageURL : '';\n              taskNodePath = taskData ? taskData.nodePath : ''; // Define publicity details\n              taskPublicStatusImgSrc = '';\n              taskPublicStatusHint = 'Task publicity is unknown';\n              if (taskData && taskData.isPublic !== undefined) {\n                if (taskData.isPublic) {\n                  taskPublicStatusImgSrc = '/spotfix/img/public.svg';\n                  taskPublicStatusHint = 'The task is public';\n                } else {\n                  taskPublicStatusImgSrc = '/spotfix/img/private.svg';\n                  taskPublicStatusHint = 'The task is private and visible only for registered DoBoard users';\n                }\n              }\n              if (!(!showOnlyCurrentPage || currentPageURL === window.location.href)) {\n                _context10.next = 68;\n                break;\n              }\n              issuesQuantityOnPage++;\n              //define last message and update time\n              /* let lastMessageDetails = await getTaskLastMessageDetails(this.params, taskId);\n              const authorDetails = getTaskAuthorDetails(this.params, '1'); // todo MOCK! */\n              _context10.next = 60;\n              return getTaskFullDetails(this.params, taskId);\n            case 60:\n              taskFullDetails = _context10.sent;\n              avatarData = getAvatarData(taskFullDetails);\n              _variables = {\n                taskTitle: taskTitle || '',\n                taskAuthorAvatarImgSrc: taskFullDetails.taskAuthorAvatarImgSrc,\n                taskAuthorName: taskFullDetails.taskAuthorName,\n                taskPublicStatusImgSrc: taskPublicStatusImgSrc,\n                taskPublicStatusHint: taskPublicStatusHint,\n                taskLastMessage: taskFullDetails.lastMessageText,\n                taskLastUpdate: lastMessageTime,\n                nodePath: taskNodePath,\n                taskId: taskId,\n                avatarCSSClass: avatarData.avatarCSSClass,\n                avatarStyle: avatarData.avatarStyle,\n                taskAuthorInitials: avatarData.taskAuthorInitials,\n                initialsClass: avatarData.initialsClass\n              };\n              _context10.t2 = document.querySelector(\".doboard_task_widget-all_issues-container\").innerHTML;\n              _context10.next = 66;\n              return this.loadTemplate('list_issues', _variables);\n            case 66:\n              document.querySelector(\".doboard_task_widget-all_issues-container\").innerHTML = _context10.t2 += _context10.sent;\n              spotsToBeHighlighted.push(taskData);\n            case 68:\n              i++;\n              _context10.next = 44;\n              break;\n            case 71:\n              this.savedIssuesQuantityOnPage = issuesQuantityOnPage;\n              this.savedIssuesQuantityAll = tasks.length;\n              this.highlightElements(spotsToBeHighlighted);\n              document.querySelector('.doboard_task_widget-header span').innerText += ' ' + getIssuesCounterString(this.savedIssuesQuantityOnPage, this.savedIssuesQuantityAll);\n            case 75:\n              if (tasks.length === 0 || issuesQuantityOnPage === 0) {\n                document.querySelector(\".doboard_task_widget-all_issues-container\").innerHTML = '<div class=\"doboard_task_widget-issues_list_empty\">The issues list is empty</div>';\n              }\n\n              // Bind the click event to the task elements for scrolling to the selected text and Go to concrete issue interface by click issue-item row\n              this.bindIssuesClick();\n              hideContainersSpinner(false);\n              return _context10.abrupt(\"break\", 123);\n            case 79:\n              _context10.next = 81;\n              return getTaskFullDetails(this.params, this.currentActiveTaskId);\n            case 81:\n              taskDetails = _context10.sent;\n              variables = {\n                issueTitle: taskDetails.issueTitle,\n                issueComments: taskDetails.issueComments,\n                issuesCounter: getIssuesCounterString(),\n                chevronBackTitle: 'Back to all spots'\n              };\n              issuesCommentsContainer = document.querySelector('.doboard_task_widget-concrete_issues-container');\n              dayMessagesData = [];\n              initIssuerID = localStorage.getItem('spotfix_user_id');\n              userIsIssuer = false;\n              if (!(taskDetails.issueComments.length > 0)) {\n                _context10.next = 117;\n                break;\n              }\n              issuesCommentsContainer.innerHTML = '';\n              _iterator = _createForOfIteratorHelper(taskDetails.issueComments);\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  comment = _step.value;\n                  userIsIssuer = Number(initIssuerID) === Number(comment.commentUserId);\n                  _avatarData = getAvatarData({\n                    taskAuthorAvatarImgSrc: comment.commentAuthorAvatarSrc,\n                    taskAuthorName: comment.commentAuthorName,\n                    userIsIssuer: userIsIssuer\n                  });\n                  commentData = {\n                    commentAuthorName: comment.commentAuthorName,\n                    commentBody: comment.commentBody,\n                    commentDate: comment.commentDate,\n                    commentTime: comment.commentTime,\n                    issueTitle: variables.issueTitle,\n                    issuesCounter: variables.issuesCounter,\n                    commentContainerBackgroundSrc: userIsIssuer ? '/spotfix/img/comment-self-background.png' : '/spotfix/img/comment-other-background.png',\n                    avatarCSSClass: _avatarData.avatarCSSClass,\n                    avatarStyle: _avatarData.avatarStyle,\n                    taskAuthorInitials: _avatarData.taskAuthorInitials,\n                    initialsClass: _avatarData.initialsClass\n                  };\n                  if (dayMessagesData[comment.commentDate] === undefined) {\n                    dayMessagesData[comment.commentDate] = [];\n                    dayMessagesData[comment.commentDate].push(commentData);\n                  } else {\n                    dayMessagesData[comment.commentDate].push(commentData);\n                  }\n                }\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n              daysWrapperHTML = '';\n              _context10.t3 = _regeneratorRuntime().keys(dayMessagesData);\n            case 93:\n              if ((_context10.t4 = _context10.t3()).done) {\n                _context10.next = 114;\n                break;\n              }\n              day = _context10.t4.value;\n              currentDayMessages = dayMessagesData[day];\n              dayMessagesWrapperHTML = '';\n              currentDayMessages.sort(function (a, b) {\n                return a.commentTime.localeCompare(b.commentTime);\n              });\n              _context10.t5 = _regeneratorRuntime().keys(currentDayMessages);\n            case 99:\n              if ((_context10.t6 = _context10.t5()).done) {\n                _context10.next = 108;\n                break;\n              }\n              messageId = _context10.t6.value;\n              currentMessageData = currentDayMessages[messageId];\n              _context10.t7 = dayMessagesWrapperHTML;\n              _context10.next = 105;\n              return this.loadTemplate('concrete_issue_messages', currentMessageData);\n            case 105:\n              dayMessagesWrapperHTML = _context10.t7 += _context10.sent;\n              _context10.next = 99;\n              break;\n            case 108:\n              _context10.t8 = daysWrapperHTML;\n              _context10.next = 111;\n              return this.loadTemplate('concrete_issue_day_content', {\n                dayContentMonthDay: day,\n                dayContentMessages: dayMessagesWrapperHTML\n              });\n            case 111:\n              daysWrapperHTML = _context10.t8 += _context10.sent;\n              _context10.next = 93;\n              break;\n            case 114:\n              issuesCommentsContainer.innerHTML = daysWrapperHTML;\n              _context10.next = 118;\n              break;\n            case 117:\n              issuesCommentsContainer.innerHTML = 'No comments';\n            case 118:\n              // Scroll to the bottom comments\n              setTimeout(function () {\n                var contentContainer = document.querySelector('.doboard_task_widget-content');\n                contentContainer.scrollTo({\n                  top: contentContainer.scrollHeight,\n                  behavior: 'smooth'\n                });\n              }, 0);\n              sendForm = document.querySelector('.doboard_task_widget-send_message form');\n              if (sendForm) {\n                sendForm.addEventListener('submit', /*#__PURE__*/function () {\n                  var _ref0 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee1(e) {\n                    var input, commentText;\n                    return _regeneratorRuntime().wrap(function _callee1$(_context1) {\n                      while (1) switch (_context1.prev = _context1.next) {\n                        case 0:\n                          e.preventDefault();\n                          input = sendForm.querySelector('.doboard_task_widget-send_message_input');\n                          commentText = input.value.trim();\n                          if (commentText) {\n                            _context1.next = 5;\n                            break;\n                          }\n                          return _context1.abrupt(\"return\");\n                        case 5:\n                          input.disabled = true;\n                          _context1.prev = 6;\n                          _context1.next = 9;\n                          return addTaskComment(_this2.params, _this2.currentActiveTaskId, commentText);\n                        case 9:\n                          input.value = '';\n                          _context1.next = 12;\n                          return _this2.createWidgetElement('concrete_issue');\n                        case 12:\n                          hideContainersSpinner(false);\n                          _context1.next = 18;\n                          break;\n                        case 15:\n                          _context1.prev = 15;\n                          _context1.t0 = _context1[\"catch\"](6);\n                          alert('Error when adding a comment: ' + _context1.t0.message);\n                        case 18:\n                          input.disabled = false;\n                        case 19:\n                        case \"end\":\n                          return _context1.stop();\n                      }\n                    }, _callee1, null, [[6, 15]]);\n                  }));\n                  return function (_x39) {\n                    return _ref0.apply(this, arguments);\n                  };\n                }());\n              }\n              return _context10.abrupt(\"break\", 123);\n            case 122:\n              return _context10.abrupt(\"break\", 123);\n            case 123:\n              backToAllIssuesController = document.querySelector('.doboard_task_widget_return_to_all');\n              if (backToAllIssuesController) {\n                widgetClass = this;\n                backToAllIssuesController.addEventListener('click', function (e) {\n                  var self = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : widgetClass;\n                  self.createWidgetElement('all_issues');\n                });\n              }\n              paperclipController = document.querySelector('.doboard_task_widget-send_message_paperclip');\n              if (paperclipController) {\n                paperclipController.addEventListener('click', function (e) {\n                  e.preventDefault();\n                  alert('This action is not implemented yet..');\n                });\n              }\n              ((_document$querySelect = document.querySelector('.doboard_task_widget-close_btn')) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.addEventListener('click', function () {\n                _this2.hide();\n              })) || '';\n              return _context10.abrupt(\"return\", widgetContainer);\n            case 129:\n            case \"end\":\n              return _context10.stop();\n          }\n        }, _callee10, this);\n      }));\n      function createWidgetElement(_x38) {\n        return _createWidgetElement.apply(this, arguments);\n      }\n      return createWidgetElement;\n    }())\n  }, {\n    key: \"bindIssuesClick\",\n    value: function bindIssuesClick() {\n      var _this3 = this;\n      document.querySelectorAll('.issue-item').forEach(function (item) {\n        item.addEventListener('click', /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11() {\n          var nodePath;\n          return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n            while (1) switch (_context11.prev = _context11.next) {\n              case 0:\n                nodePath = JSON.parse(item.getAttribute('data-node-path'));\n                scrollToNodePath(nodePath);\n                _this3.currentActiveTaskId = item.getAttribute('data-task-id');\n                _context11.next = 5;\n                return _this3.createWidgetElement('concrete_issue');\n              case 5:\n                hideContainersSpinner(false);\n              case 6:\n              case \"end\":\n                return _context11.stop();\n            }\n          }, _callee11);\n        })));\n      });\n    }\n\n    /**\n     * Load the template\n     *\n     * @param templateName\n     * @param variables\n     * @return {Promise<string>}\n     * @ToDo have to refactor templates loaded method: need to be templates included into the bundle\n     *\n     */\n  }, {\n    key: \"loadTemplate\",\n    value: (function () {\n      var _loadTemplate = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12(templateName) {\n        var variables,\n          response,\n          template,\n          _i,\n          _Object$entries,\n          _Object$entries$_i,\n          key,\n          value,\n          placeholder,\n          _args12 = arguments;\n        return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n          while (1) switch (_context12.prev = _context12.next) {\n            case 0:\n              variables = _args12.length > 1 && _args12[1] !== undefined ? _args12[1] : {};\n              _context12.next = 3;\n              return fetch(\"/spotfix/templates/\".concat(templateName, \".html\"));\n            case 3:\n              response = _context12.sent;\n              _context12.next = 6;\n              return response.text();\n            case 6:\n              template = _context12.sent;\n              for (_i = 0, _Object$entries = Object.entries(variables); _i < _Object$entries.length; _i++) {\n                _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2), key = _Object$entries$_i[0], value = _Object$entries$_i[1];\n                placeholder = \"{{\".concat(key, \"}}\");\n                template = template.replaceAll(placeholder, value);\n              }\n              return _context12.abrupt(\"return\", template);\n            case 9:\n            case \"end\":\n              return _context12.stop();\n          }\n        }, _callee12);\n      }));\n      function loadTemplate(_x40) {\n        return _loadTemplate.apply(this, arguments);\n      }\n      return loadTemplate;\n    }())\n  }, {\n    key: \"getTaskCount\",\n    value: function () {\n      var _getTaskCount = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13() {\n        var projectToken, sessionId, tasks, filteredTasks, taskCountElement;\n        return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n          while (1) switch (_context13.prev = _context13.next) {\n            case 0:\n              if (localStorage.getItem('spotfix_session_id')) {\n                _context13.next = 2;\n                break;\n              }\n              return _context13.abrupt(\"return\", {});\n            case 2:\n              projectToken = this.params.projectToken;\n              sessionId = localStorage.getItem('spotfix_session_id');\n              _context13.next = 6;\n              return getTasksDoboard(projectToken, sessionId, this.params.accountId, this.params.projectId);\n            case 6:\n              tasks = _context13.sent;\n              filteredTasks = tasks.filter(function (task) {\n                return task.taskMeta;\n              });\n              taskCountElement = document.getElementById('doboard_task_widget-task_count');\n              if (taskCountElement) {\n                taskCountElement.innerText = filteredTasks.length;\n                taskCountElement.classList.remove('hidden');\n              }\n            case 10:\n            case \"end\":\n              return _context13.stop();\n          }\n        }, _callee13, this);\n      }));\n      function getTaskCount() {\n        return _getTaskCount.apply(this, arguments);\n      }\n      return getTaskCount;\n    }()\n    /**\n     * Bind events to the widget\n     */\n    /*bindEvents() {\n        this.submitButton.addEventListener('click', () => this.submitTask());\n    }*/\n    /**\n     * Submit the task\n     */\n  }, {\n    key: \"submitTask\",\n    value: (function () {\n      var _submitTask = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14(taskDetails) {\n        var sessionId;\n        return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n          while (1) switch (_context14.prev = _context14.next) {\n            case 0:\n              if (localStorage.getItem('spotfix_session_id')) {\n                _context14.next = 6;\n                break;\n              }\n              _context14.next = 3;\n              return registerUser(taskDetails);\n            case 3:\n              if (!taskDetails.userPassword) {\n                _context14.next = 6;\n                break;\n              }\n              _context14.next = 6;\n              return this.loginUser(taskDetails);\n            case 6:\n              sessionId = localStorage.getItem('spotfix_session_id');\n              if (sessionId) {\n                _context14.next = 9;\n                break;\n              }\n              return _context14.abrupt(\"return\", {\n                needToLogin: true\n              });\n            case 9:\n              _context14.next = 11;\n              return handleCreateTask(sessionId, taskDetails);\n            case 11:\n              return _context14.abrupt(\"return\", _context14.sent);\n            case 12:\n            case \"end\":\n              return _context14.stop();\n          }\n        }, _callee14, this);\n      }));\n      function submitTask(_x41) {\n        return _submitTask.apply(this, arguments);\n      }\n      return submitTask;\n    }())\n  }, {\n    key: \"loginUser\",\n    value: function loginUser(taskDetails) {\n      var userEmail = taskDetails.userEmail;\n      var userPassword = taskDetails.userPassword;\n      return _loginUser(userEmail, userPassword).then(function (response) {\n        if (response.sessionId) {\n          localStorage.setItem('spotfix_session_id', response.sessionId);\n          localStorage.setItem('spotfix_user_id', response.userId);\n          localStorage.setItem('spotfix_email', response.email);\n        } else {\n          throw new Error('Session ID not found in response');\n        }\n      }).catch(function (error) {\n        throw error;\n      });\n    }\n\n    /**\n     * Hide the widget\n     */\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.removeTextSelection();\n      this.createWidgetElement('wrap');\n    }\n  }, {\n    key: \"removeTextSelection\",\n    value: function removeTextSelection() {\n      var textSelectionclassName = 'doboard_task_widget-text_selection';\n      var spans = document.querySelectorAll('.' + textSelectionclassName);\n      spans.forEach(function (span) {\n        var parent = span.parentNode;\n        while (span.firstChild) {\n          parent.insertBefore(span.firstChild, span);\n        }\n        parent.removeChild(span);\n      });\n    }\n  }, {\n    key: \"highlightElements\",\n    value: function highlightElements(spotsToBeHighlighted) {\n      if (spotsToBeHighlighted.length === 0) {\n        return;\n      }\n      var sortedSpots = new Map();\n      // Aggregate selections by HtmlElement: [Element1 => [selection1, selection2], Element2 => [selection3]]\n      spotsToBeHighlighted.forEach(function (spot) {\n        var element = retrieveNodeFromPath(spot.nodePath);\n        if (!sortedSpots.has(element)) {\n          sortedSpots.set(element, []);\n        }\n        var currentData = sortedSpots.get(element);\n        currentData.push({\n          selectStartPosition: spot.startSelectPosition,\n          selectEndPosition: spot.endSelectPosition\n        });\n      });\n      // Render selections for the HtmlElement\n      var highlightWrapperOpen = '<span class=\"doboard_task_widget-text_selection\">';\n      var highlightWrapperClose = '</span>';\n      sortedSpots.forEach(function (spotSelectionsPositions, element) {\n        // If the element no provided\n        if (!element) {\n          return;\n        }\n        //Is the element is the not simple text one\n        if (element.children.length > 0) {\n          // @ToDo make selection for the difficult elements\n          //console.log('Try to highlight difficult element: ' + element.innerHTML); // The debug statement\n          return;\n        }\n        var positions = [];\n        spotSelectionsPositions.forEach(function (spotSelectionPositions) {\n          positions.push({\n            pos: spotSelectionPositions.selectStartPosition,\n            type: 'start'\n          }, {\n            pos: spotSelectionPositions.selectEndPosition,\n            type: 'end'\n          });\n        });\n        positions.sort(function (a, b) {\n          return b.pos - a.pos;\n        });\n        var text = element.innerHTML;\n        var prevSlicePosition = null;\n        var slicedStringWithSelections = [];\n        positions.forEach(function (position) {\n          var afterText = text.substring(position.pos, prevSlicePosition ? prevSlicePosition : position.pos);\n          prevSlicePosition = position.pos;\n          var span = position.type === 'start' ? highlightWrapperOpen : highlightWrapperClose;\n          slicedStringWithSelections.unshift(afterText);\n          slicedStringWithSelections.unshift(span);\n        });\n        element.innerHTML = text.substring(0, prevSlicePosition) + slicedStringWithSelections.join('');\n      });\n    }\n  }, {\n    key: \"bindWidgetInputsInteractive\",\n    value: function bindWidgetInputsInteractive() {\n      // Customising placeholders\n      var inputs = document.querySelectorAll('.doboard_task_widget-field');\n      inputs.forEach(function (input) {\n        if (input.value) {\n          input.classList.add('has-value');\n        }\n        input.addEventListener('input', function () {\n          if (input.value) {\n            input.classList.add('has-value');\n          } else {\n            input.classList.remove('has-value');\n          }\n        });\n        input.addEventListener('blur', function () {\n          if (!input.value) {\n            input.classList.remove('has-value');\n          }\n        });\n      });\n\n      // Customising accordion dropdown\n      var accordionController = document.querySelector('.doboard_task_widget-login span');\n      if (accordionController) {\n        accordionController.addEventListener('click', function () {\n          this.closest('.doboard_task_widget-login').classList.toggle('active');\n        });\n      }\n    }\n  }]);\n}();\nvar selectedData = {};\nvar widgetTimeout = null;\ndocument.addEventListener('DOMContentLoaded', function () {\n  new CleanTalkWidgetDoboard({}, 'wrap');\n});\ndocument.addEventListener('selectionchange', function (e) {\n  if (widgetTimeout) {\n    clearTimeout(widgetTimeout);\n  }\n  widgetTimeout = setTimeout(function () {\n    var selection = window.getSelection();\n    if (selection.type === 'Range') {\n      var _selectedData = getSelectedData(selection);\n      var widgetExist = document.querySelector('.doboard_task_widget-container');\n      openWidget(_selectedData, widgetExist, 'create_issue');\n    }\n  }, 1000);\n});\n\n/**\n * Open the widget to create a task.\n * @param {*} selectedData\n * @param {*} widgetExist\n * @param {*} type\n */\nfunction openWidget(selectedData, widgetExist, type) {\n  if (selectedData && !widgetExist) {\n    new CleanTalkWidgetDoboard(selectedData, type);\n  }\n}\n\n/**\n * Get the selected data from the DOM\n * @param {Selection} selectedData\n * @returns {Object}\n */\nfunction getSelectedData(selectedData) {\n  var pageURL = window.location.href;\n  var selectedText = selectedData.toString();\n  var anchorOffset = selectedData.anchorOffset;\n  var focusOffset = selectedData.focusOffset;\n  var nodeToCalculate = selectedData.focusNode.nodeName === '#text' ? selectedData.focusNode.parentNode : selectedData.focusNode;\n  return {\n    startSelectPosition: Math.min(anchorOffset, focusOffset),\n    endSelectPosition: Math.max(anchorOffset, focusOffset),\n    selectedText: selectedText,\n    pageURL: pageURL,\n    nodePath: calculateNodePath(nodeToCalculate)\n  };\n}\n\n/**\n * Calculate the path of a DOM node\n *\n * @param {Node} node\n * @return {int[]}\n */\nfunction calculateNodePath(node) {\n  var path = [];\n  while (node) {\n    var index = 0;\n    var sibling = node.previousSibling;\n    while (sibling) {\n      if (sibling.nodeType === 1) {\n        index++;\n      }\n      sibling = sibling.previousSibling;\n    }\n    path.unshift(index);\n    node = node.parentNode;\n  }\n\n  // Hard fix - need to remove first element to work correctly\n  path.shift();\n  return path;\n}\n\n/**\n * Retrieve a DOM node from a path\n *\n * @param {int[]} path\n * @return {*|null}\n */\nfunction retrieveNodeFromPath(path) {\n  // @ToDo check if the path is correct\n  if (!path) {\n    return null;\n  }\n  var node = document;\n  for (var i = 0; i < path.length; i++) {\n    node = node.children[path[i]];\n    if (!node) {\n      return null;\n    }\n  }\n  return node;\n}\n\n/**\n * Analyze the task selected data\n * @param {Object} taskSelectedData\n * @return {Element|null}\n */\nfunction taskAnalysis(taskSelectedData) {\n  var nodePath = taskSelectedData ? taskSelectedData.nodePath : '';\n  return retrieveNodeFromPath(nodePath);\n}\n\n/**\n * Scroll to an element by tag, class, and text content\n * @param {string} path - The path to the element\n * @return {boolean} - True if the element was found and scrolled to, false otherwise\n */\nfunction scrollToNodePath(path) {\n  var node = retrieveNodeFromPath(path);\n  if (node && node.scrollIntoView) {\n    node.scrollIntoView({\n      behavior: 'smooth',\n      block: 'center'\n    });\n    return true;\n  }\n  return false;\n}\nfunction hideContainersSpinner() {\n  var spinners = document.getElementsByClassName('doboard_task_widget-spinner_wrapper_for_containers');\n  if (spinners.length > 0) {\n    for (var i = 0; i < spinners.length; i++) {\n      spinners[i].style.display = 'none';\n    }\n  }\n  var containerClassesToShow = ['doboard_task_widget-all_issues-container', 'doboard_task_widget-concrete_issues-container'];\n  for (var _i2 = 0; _i2 < containerClassesToShow.length; _i2++) {\n    var containers = document.getElementsByClassName(containerClassesToShow[_i2]);\n    if (containers.length > 0) {\n      for (var _i3 = 0; _i3 < containers.length; _i3++) {\n        containers[_i3].style.display = 'block';\n      }\n    }\n  }\n}\nfunction getAvatarData(authorDetails) {\n  var avatarStyle;\n  var avatarCSSClass;\n  var taskAuthorInitials;\n  var hideAvatar = authorDetails.hasOwnProperty('userIsIssuer') && authorDetails.userIsIssuer === true;\n  var initialsClass = 'doboard_task_widget-avatar-initials';\n  if (authorDetails.taskAuthorAvatarImgSrc === null) {\n    avatarStyle = \"background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAE9GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4wLWMwMDAgNzkuMTcxYzI3ZmFiLCAyMDIyLzA4LzE2LTIyOjM1OjQxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjQuMCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjQtMDQtMTBUMTk6MDg6MDkrMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDI0LTA0LTEwVDE5OjIxOjA4KzA1OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDI0LTA0LTEwVDE5OjIxOjA4KzA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxNWRjOWI0Yy04ZWVmLTRkNTEtYmE0MS1kOTkzZTZmNjNmMTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTVkYzliNGMt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');\";\n    avatarCSSClass = 'doboard_task_widget-avatar_container';\n    initialsClass += ' doboard_task_widget-hidden_element';\n  } else {\n    avatarStyle = \"background-image:url('\".concat(authorDetails.taskAuthorAvatarImgSrc, \"');\");\n    avatarCSSClass = 'doboard_task_widget-avatar_container';\n    initialsClass += ' doboard_task_widget-hidden_element';\n  }\n  return {\n    avatarStyle: avatarStyle,\n    avatarCSSClass: avatarCSSClass,\n    taskAuthorInitials: taskAuthorInitials,\n    initialsClass: initialsClass\n  };\n}"],"names":["_slicedToArray","r","e","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","l","t","Symbol","iterator","n","i","u","a","f","o","call","next","Object","done","push","value","length","return","Array","isArray","_createForOfIteratorHelper","_n","s","F","_arrayLikeToArray","toString","slice","constructor","name","from","test","_classCallCheck","_defineProperties","enumerable","configurable","writable","defineProperty","_toPropertyKey","key","_createClass","prototype","_defineProperty","_toPrimitive","_typeof","toPrimitive","String","Number","_regeneratorRuntime","hasOwnProperty","asyncIterator","toStringTag","c","h","Generator","create","Context","Error","method","arg","delegate","d","type","sent","_sent","dispatchException","abrupt","wrap","GeneratorFunction","GeneratorFunctionPrototype","p","this","getPrototypeOf","y","x","v","g","forEach","_invoke","AsyncIterator","resolve","__await","then","w","tryEntries","m","reset","isNaN","displayName","isGeneratorFunction","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","unshift","pop","values","prev","charAt","stop","rval","complete","finish","catch","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","DOBOARD_API_URL","createTaskDoboard","_ref","_callee","sessionId","taskDetails","accountId","formData","response","responseBody","_context","FormData","append","projectToken","projectId","localStorage","getItem","taskTitle","taskDescription","taskMeta","fetch","body","ok","json","data","operation_status","operation_message","taskId","task_id","isPublic","_x","_x2","createTaskCommentDoboard","_ref2","_callee2","comment","status","_args2","_context2","undefined","commentId","comment_id","_x3","_x4","_x5","_x6","_x7","registerUserDoboard","_ref3","_callee3","email","nickname","_context3","user_email_confirmed","accountExists","session_id","userId","user_id","_x8","_x9","_x0","_x1","_loginUser","_ref4","_callee4","password","_context4","_x10","_x11","getTasksDoboard","_ref5","_callee5","_context5","tasks","map","task","taskLastUpdate","updated","taskCreated","created","taskCreatorTaskUser","creator_user_id","meta","_x12","_x13","_x14","_x15","_x16","getTaskCommentsDoboard","_ref6","_callee6","_args6","_context6","console","log","comments","commentBody","comment_text","commentDate","issueTitle","task_name","_x17","_x18","_x19","_x20","getUserDoboard","_ref7","_callee7","_context7","users","_x21","_x22","_x23","userUpdateDoboard","_ref8","_callee8","timezone","_context8","success","_x24","_x25","_x26","_x27","_x28","getTaskFullDetails","_x29","_x30","_getTaskFullDetails","_callee15","params","lastComment","time","avatarSrc","authorName","_context15","author","find","dt","formatDate","date","getAvatarSrc","getAuthorName","taskAuthorAvatarImgSrc","taskAuthorName","lastMessageText","lastMessageTime","issueComments","sort","b","Date","_formatDate2","commentAuthorAvatarSrc","commentAuthorName","commentTime","commentUserId","handleCreateTask","_x31","_x32","_handleCreateTask","_callee16","result","_context16","addTaskComment","t0","_x33","_x34","_x35","_addTaskComment","_callee17","commentText","_context17","getUserTasks","getAllTasks","_x36","_getAllTasks","_callee18","tasksData","filteredTaskData","_context18","filter","dateStr","hours","dateObj","includes","replace","getTime","offsetMinutes","getTimezoneOffset","month","localDateObj","getMonth","day","getDate","concat","getHours","padStart","minutes","getMinutes","getTaskAuthorDetails","element","getIssuesCounterString","onPageSpotsCount","totalSpotsCount","avatar","trim","registerUser","userEmail","userName","document","querySelector","innerText","classList","remove","getElementById","focus","setItem","userUpdate","error","Intl","DateTimeFormat","resolvedOptions","timeZone","CleanTalkWidgetDoboard","selectedData","selectedText","init","_init","_callee9","_context9","getParams","createWidgetElement","widgetElement","bindWidgetInputsInteractive","_x37","script","src","url","URL","fromEntries","searchParams","entries","_this","submitButton","addEventListener","_callee0","taskDescriptionElement","userPassword","_userEmailElement","userNameElement","userPasswordElement","userEmailElement","submitTaskResult","_context0","taskTitleElement","style","borderColor","loginSectionElement","contains","disabled","JSON","stringify","submitTask","cursor","needToLogin","hideContainersSpinner","_createWidgetElement","_callee10","showOnlyCurrentPage","widgetContainer","templateName","variables","issuesQuantityOnPage","spotsToBeHighlighted","taskData","taskNodePath","taskPublicStatusImgSrc","taskPublicStatusHint","taskFullDetails","issuesCommentsContainer","dayMessagesData","initIssuerID","userIsIssuer","_iterator","_step","_avatarData","commentData","daysWrapperHTML","currentDayMessages","dayMessagesWrapperHTML","sendForm","backToAllIssuesController","widgetClass","paperclipController","_this2","_args10","_context10","createElement","className","innerHTML","currentDomain","location","hostname","currentActiveTaskId","issueTitleElement","issuesCounter","savedIssuesQuantityOnPage","savedIssuesQuantityAll","paperclipImgSrc","sendButtonImgSrc","msgFieldBackgroundImgSrc","loadTemplate","appendChild","t1","bindCreateTaskEvents","getTaskCount","removeTextSelection","elTask","taskDataString","_formatDate","parse","currentPageURL","pageURL","nodePath","window","href","avatarData","getAvatarData","_variables","taskLastMessage","avatarCSSClass","avatarStyle","taskAuthorInitials","initialsClass","t2","highlightElements","bindIssuesClick","chevronBackTitle","commentContainerBackgroundSrc","err","t3","t4","localeCompare","t5","t6","messageId","currentMessageData","t7","t8","dayContentMonthDay","dayContentMessages","setTimeout","contentContainer","scrollTo","top","scrollHeight","behavior","_ref0","_callee1","input","_context1","preventDefault","alert","message","_x39","_document$querySelect","hide","_x38","_this3","querySelectorAll","item","_callee11","_context11","scrollToNodePath","getAttribute","_loadTemplate","_callee12","template","_i","_Object$entries","placeholder","_args12","_context12","text","_Object$entries$_i","replaceAll","_x40","_getTaskCount","_callee13","filteredTasks","taskCountElement","_context13","_submitTask","_callee14","_context14","loginUser","_x41","span","parent","parentNode","firstChild","insertBefore","removeChild","sortedSpots","Map","spot","retrieveNodeFromPath","has","set","get","selectStartPosition","startSelectPosition","selectEndPosition","endSelectPosition","spotSelectionsPositions","positions","prevSlicePosition","slicedStringWithSelections","children","spotSelectionPositions","pos","position","afterText","substring","join","add","accordionController","closest","toggle","widgetTimeout","openWidget","widgetExist","getSelectedData","anchorOffset","focusOffset","nodeToCalculate","focusNode","nodeName","Math","min","max","calculateNodePath","node","path","index","sibling","previousSibling","nodeType","shift","taskAnalysis","taskSelectedData","scrollIntoView","block","spinners","getElementsByClassName","display","containerClassesToShow","_i2","containers","_i3","authorDetails","clearTimeout","selection","getSelection"],"mappings":"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"}