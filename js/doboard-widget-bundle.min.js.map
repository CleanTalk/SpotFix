{"version":3,"file":"doboard-widget-bundle.min.js","sources":["doboard-widget-bundle.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator.return && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, catch: function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar createTaskDoboard = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(taskDetails) {\n    var response;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return fetch('https://api.yourtaskboard.com/tasks', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(taskDetails)\n          });\n        case 2:\n          response = _context.sent;\n          if (response.ok) {\n            _context.next = 5;\n            break;\n          }\n          throw new Error('Failed to create task');\n        case 5:\n          _context.next = 7;\n          return response.json();\n        case 7:\n          return _context.abrupt(\"return\", _context.sent);\n        case 8:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function createTaskDoboard(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar getTasksDoboard = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n    var response;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return fetch('https://api.yourtaskboard.com/tasks');\n        case 2:\n          response = _context2.sent;\n          if (response.ok) {\n            _context2.next = 5;\n            break;\n          }\n          throw new Error('Failed to fetch tasks');\n        case 5:\n          _context2.next = 7;\n          return response.json();\n        case 7:\n          return _context2.abrupt(\"return\", _context2.sent);\n        case 8:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function getTasksDoboard() {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar createTaskLS = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(taskDetails) {\n    var keyTask;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          keyTask = 'doboard_task-' + Date.now();\n          localStorage.setItem(keyTask, JSON.stringify(taskDetails));\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function createTaskLS(_x2) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nfunction getTasksLS() {\n  var tasks = [];\n  var i = 0;\n  for (var key in localStorage) {\n    if (key.indexOf(\"doboard_task-\") == 0) {\n      tasks[i] = JSON.parse(localStorage[key]);\n      i++;\n    }\n  }\n  ;\n  return tasks;\n}\n;\n/**\n * Widget class to create a task widget\n */\nvar CleanTalkWidgetDoboard = /*#__PURE__*/function () {\n  /**\n   * Constructor\n   */\n  function CleanTalkWidgetDoboard(selectedData, type) {\n    _classCallCheck(this, CleanTalkWidgetDoboard);\n    _defineProperty(this, \"selectedText\", '');\n    this.selectedText = selectedData.selectedText;\n    this.widgetElement = this.createWidgetElement(type);\n    this.taskDescription = this.widgetElement.querySelector('#doboard_task_description');\n    this.submitButton = this.widgetElement.querySelector('#doboard_task_widget-submit_button');\n    //this.bindEvents();\n  }\n\n  /**\n   * Create widget element\n   * @return {HTMLElement} widget element\n   */\n  return _createClass(CleanTalkWidgetDoboard, [{\n    key: \"createWidgetElement\",\n    value: function createWidgetElement(type) {\n      var _this = this;\n      var auth = true;\n      if (!auth) {\n        type = 'auth';\n      }\n      var widgetContainer = document.querySelector('.doboard_task_widget') ? document.querySelector('.doboard_task_widget') : document.createElement('div');\n      widgetContainer.className = 'doboard_task_widget';\n      widgetContainer.innerHTML = '';\n      switch (type) {\n        case 'create_task':\n          widgetContainer.innerHTML = \"\\n                    <div class=\\\"doboard_task_widget-container doboard_task_widget-create\\\">\\n                        <div class=\\\"doboard_task_widget-close_btn\\\">X</div>\\n                        <h2>Doboard</h2>\\n                        <input id=\\\"doboard_task_widget-title\\\" class=\\\"doboard_task_widget-title-input\\\" name=\\\"title\\\" placeholder=\\\"Title...\\\">\\n                        <textarea id=\\\"doboard_task_widget-description\\\" class=\\\"doboard_task_widget-description-textarea\\\" name=\\\"description\\\" placeholder=\\\"Task description...\\\">\".concat(this.selectedText, \"</textarea>\\n                        <button id=\\\"doboard_task_widget-submit_button\\\" class=\\\"doboard_task_widget-submit_button\\\">Create Task</button>\\n                    </div>\\n                \");\n          break;\n        case 'wrap':\n          widgetContainer.innerHTML = \"\\n                    <div class=\\\"doboard_task_widget-container doboard_task_widget-wrap\\\">\\n                        <img src=\\\"/spotfix/img/doboard-widget-logo.svg\\\" alt=\\\"Doboard logo\\\">\\n                    </div>\\n                \";\n          break;\n        case 'auth':\n          widgetContainer.innerHTML = \"\\n                    <div class=\\\"doboard_task_widget-container doboard_task_widget-authorization\\\">\\n                        <div class=\\\"doboard_task_widget-close_btn\\\">X</div>\\n                        <h2>Doboard</h2>\\n                        <input id=\\\"doboard_task_login\\\" name=\\\"login\\\" placeholder=\\\"Login or email\\\">\\n                        <input id=\\\"doboard_task_password\\\" name=\\\"password\\\" placeholder=\\\"Password\\\">\\n                        <button id=\\\"doboard_task_widget-submit_button\\\" class=\\\"doboard_task_widget-submit_button\\\">Authorization</button>\\n                    </div>\\n                \";\n          break;\n        case 'task_list':\n          widgetContainer.innerHTML = \"\\n                    <div class=\\\"doboard_task_widget-container doboard_task_widget-task_list\\\">\\n                        <div class=\\\"doboard_task_widget-close_btn\\\">X</div>\\n                        <h2>Doboard</h2>\\n                        <div class=\\\"doboard_task_widget-task_list-container\\\"></div>\\n                    </div>\\n                \";\n          break;\n        default:\n          break;\n      }\n      document.body.appendChild(widgetContainer);\n      switch (type) {\n        case 'create_task':\n          document.getElementById('doboard_task_widget-submit_button').addEventListener('click', function () {\n            var taskTitle = document.getElementById('doboard_task_widget-title').value;\n            var taskDescription = document.getElementById('doboard_task_widget-description').value;\n            var typeSend = 'private';\n            var taskDetails = {\n              taskTitle: taskTitle,\n              taskDescription: taskDescription,\n              typeSend: typeSend,\n              selectedData: selectedData\n            };\n            _this.submitTask(taskDetails);\n            selectedData = {};\n          });\n          document.querySelector('.doboard_task_widget-close_btn').addEventListener('click', function () {\n            _this.hide();\n          });\n          break;\n        case 'wrap':\n          document.querySelector('.doboard_task_widget-wrap').addEventListener('click', function () {\n            _this.createWidgetElement('task_list');\n          });\n          break;\n        case 'auth':\n          document.querySelector('.doboard_task_widget-close_btn').addEventListener('click', function () {\n            _this.hide();\n          });\n          break;\n        case 'task_list':\n          var tasks = this.getTasks();\n          for (var i = 0; i < tasks.length; i++) {\n            var elTask = tasks[i];\n            var taskTitle = elTask.taskTitle;\n            var taskDescription = elTask.taskDescription;\n            var currentPageURL = elTask.selectedData.pageURL;\n            var selectedPageURL = window.location.href;\n            //console.log(elTask);\n\n            if (currentPageURL == selectedPageURL) {\n              document.querySelector(\".doboard_task_widget-task_list-container\").innerHTML += \"\\n                        <div class=\\\"doboard_task_widget-task_row\\\">\\n                            <div class=\\\"doboard_task_widget-task_title\\\">\\n                                <span class=\\\"doboard_task_widget-task-text_bold\\\">Title: </span>\\n                                <span>\".concat(taskTitle, \"</span>\\n                            </div>\\n                            <div class=\\\"doboard_task_widget-task_description\\\">\\n                                <span class=\\\"doboard_task_widget-task-text_bold\\\">Description: </span>\\n                                <span>\").concat(taskDescription, \"</span>\\n                            </div>\\n                        </div>\\n                        \");\n              var taskElement = taskAnalysis(elTask.selectedData);\n              if (taskElement) {\n                taskElement.classList.add('doboard_task_widget-text_selection');\n              }\n            }\n          }\n          ;\n          document.querySelector('.doboard_task_widget-close_btn').addEventListener('click', function () {\n            _this.hide();\n          });\n          break;\n        default:\n          break;\n      }\n      return widgetContainer;\n    }\n\n    /**\n     * Bind events to the widget\n     */\n    /*bindEvents() {\n        this.submitButton.addEventListener('click', () => this.submitTask());\n    }*/\n\n    /**\n     * Submit the task\n     */\n  }, {\n    key: \"submitTask\",\n    value: function submitTask(taskDetails) {\n      if (taskDetails && taskDetails.taskTitle) {\n        this.createTask(taskDetails);\n        //this.taskInput.value = ''; нужна очистка полей\n        this.hide();\n      } else {\n        alert('Please enter task title.');\n      }\n    }\n\n    /**\n     * Create a task\n     * @param {*} taskDetails\n     */\n  }, {\n    key: \"createTask\",\n    value: function createTask(taskDetails) {\n      // Call the API to create a task\n      // This function should be implemented in api.js\n      if (taskDetails.typeSend == 'private') {\n        createTaskLS(taskDetails);\n      } else {\n        createTaskDoboard(taskDetails);\n      }\n    }\n\n    /**\n     * Get the task\n     * @return {JSON}\n     */\n  }, {\n    key: \"getTasks\",\n    value: function getTasks() {\n      //let tasksDoboard = getTasksDoboard();\n      var tasksLS = getTasksLS();\n      return tasksLS;\n    }\n\n    /**\n     * Hide the widget\n     */\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.createWidgetElement('wrap');\n      var textSelectionclassName = 'doboard_task_widget-text_selection';\n      document.querySelectorAll('.' + textSelectionclassName).forEach(function (n) {\n        n.classList.remove(textSelectionclassName);\n      });\n    }\n  }]);\n}();\nvar selectedData = {};\nvar cssLink = document.createElement('link');\ncssLink.rel = 'stylesheet';\ncssLink.href = '/spotfix/styles/doboard-widget.css';\ndocument.head.appendChild(cssLink);\ndocument.addEventListener('DOMContentLoaded', function () {\n  new CleanTalkWidgetDoboard('', 'wrap');\n});\ndocument.addEventListener('selectionchange', function (e) {\n  console.log(document.getSelection());\n  /*if (e.target.parentElement && e.target.parentElement.className.indexOf('doboard_task_widget') < 0) {\n      selectedData = getSelectedData(window.getSelection(), e.target);\n      let widgetExist = document.querySelector('.task-widget');\n      openWidget(selectedData, widgetExist, 'create_task');\n  }*/\n});\n\n/**\n * Open the widget to create a task.\n * @param {*} selectedText\n */\nfunction openWidget(selectedData, widgetExist, type) {\n  if (selectedData && !widgetExist) {\n    new CleanTalkWidgetDoboard(selectedData, type);\n  }\n}\nfunction getSelectedData(selectedData, selectedTarget) {\n  var pageURL = window.location.href;\n  var selectedTagName = selectedTarget.tagName;\n  var selectedText = selectedData.toString();\n  var selectedDataObj = {\n    startSelectPosition: selectedData.anchorOffset,\n    endSelectPosition: selectedData.focusOffset,\n    selectedText: selectedText,\n    pageURL: pageURL,\n    selectedTagName: selectedTagName,\n    selectedClassName: selectedTarget.className,\n    selectedParentClassName: selectedTarget.parentNode.className\n  };\n  return selectedDataObj;\n}\nfunction findSelectElem(elem, parentClassName, tagName, selectedText) {\n  var taskElement = '';\n  if (elem.length > 0) {\n    for (var i = 0; i < elem.length; i++) {\n      var el = elem[i];\n      if (el.parentNode.className == parentClassName && el.tagName == tagName && el.outerHTML.match(selectedText)) {\n        taskElement = el;\n      } else {\n        console.log('Not match element');\n      }\n    }\n    ;\n  } else {\n    console.log('Empty element');\n  }\n  return taskElement;\n}\nfunction taskAnalysis(task) {\n  var className = task.selectedClassName;\n  var parentClassName = task.selectedParentClassName;\n  var tagName = task.selectedTagName;\n  var selectedText = task.selectedText;\n  var taskElement = '';\n  console.log(task);\n  if (className && parentClassName) {\n    var elemByClassName = document.getElementsByClassName(className);\n    taskElement = findSelectElem(elemByClassName, parentClassName, tagName, selectedText);\n  }\n  if (!className && parentClassName) {\n    var elemByparentClassName = document.getElementsByClassName(parentClassName);\n    for (var i = 0; i < elemByparentClassName.length; i++) {\n      var childrenEl = elemByparentClassName[i].children;\n      taskElement = findSelectElem(childrenEl, parentClassName, tagName, selectedText);\n    }\n  }\n  return taskElement;\n}"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","_classCallCheck","a","n","TypeError","_defineProperties","e","r","t","length","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","_defineProperty","value","i","_toPrimitive","toPrimitive","String","Number","call","_regeneratorRuntime","hasOwnProperty","c","asyncIterator","u","toStringTag","define","wrap","Generator","create","Context","h","f","Error","s","done","method","arg","delegate","maybeInvokeDelegate","return","y","tryCatch","type","resultName","next","nextLoc","sent","_sent","dispatchException","abrupt","p","l","GeneratorFunction","GeneratorFunctionPrototype","d","this","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","callInvokeWithMethodAndArg","invoke","resolve","__await","then","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","catch","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","createTaskDoboard","_ref","_callee","taskDetails","response","_context","fetch","headers","Content-Type","body","JSON","stringify","ok","json","_x","getTasksDoboard","_ref2","_callee2","_context2","createTaskLS","_ref3","_callee3","keyTask","_context3","Date","now","localStorage","setItem","_x2","getTasksLS","tasks","indexOf","parse","CleanTalkWidgetDoboard","selectedData","selectedText","widgetElement","createWidgetElement","taskDescription","querySelector","submitButton","_this","widgetContainer","document","createElement","className","innerHTML","concat","appendChild","getElementById","addEventListener","taskTitle","typeSend","submitTask","hide","getTasks","elTask","pageURL","window","location","href","taskElement","taskAnalysis","classList","add","createTask","alert","textSelectionclassName","querySelectorAll","remove","cssLink","openWidget","widgetExist","getSelectedData","selectedTarget","selectedTagName","tagName","toString","startSelectPosition","anchorOffset","endSelectPosition","focusOffset","selectedClassName","selectedParentClassName","parentNode","findSelectElem","elem","parentClassName","el","outerHTML","match","console","log","task","getElementsByClassName","elemByparentClassName","children","rel","head","getSelection"],"mappings":"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"}