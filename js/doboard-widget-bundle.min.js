let DOBOARD_API_URL="https://api-next.doboard.com",createTaskDoboard=async(e,t)=>{var a=t.accountId,o=new FormData,e=(o.append("session_id",e),o.append("project_token",t.projectToken),o.append("project_id",t.projectId),o.append("user_id",localStorage.getItem("spotfix_user_id")),o.append("name",t.taskTitle),o.append("comment",t.taskDescription),o.append("meta",t.taskMeta),await fetch(DOBOARD_API_URL+"/"+a+"/task_add",{method:"POST",body:o}));if(!e.ok)throw new Error("Failed to create task");t=await e.json();if(!t||!t.data)throw new Error("Invalid response from server");if("FAILED"===t.data.operation_status)throw new Error(t.data.operation_message);if("SUCCESS"===t.data.operation_status)return{taskId:t.data.task_id,isPublic:1};throw new Error("Unknown error occurred during creating task")},createTaskCommentDoboard=async(e,t,a,o,s,i="ACTIVE")=>{e=await fetch(DOBOARD_API_URL+"/"+e+"/comment_add?session_id="+t+"&task_id="+a+"&comment="+o+"&project_token="+s+"&status="+i,{method:"GET"});if(!e.ok)throw new Error("Failed to create task comment");t=await e.json();if(!t||!t.data)throw new Error("Invalid response from server");if("FAILED"===t.data.operation_status)throw new Error(t.data.operation_message);if("SUCCESS"===t.data.operation_status)return{commentId:t.data.comment_id};throw new Error("Unknown error occurred during creating task comment")},registerUserDoboard=async(e,t,a,o)=>{var s=new FormData,e=(s.append("project_token",e),s.append("account_id",t),a&&o&&(s.append("email",a),s.append("nickname",o)),await fetch(DOBOARD_API_URL+"/user_registration",{method:"POST",body:s}));if(!e.ok)throw new Error("Registration failed");t=await e.json();if(!t||!t.data)throw new Error("Invalid response from server");if("FAILED"===t.data.operation_status)throw new Error(t.data.operation_message);if("SUCCESS"===t.data.operation_status)return 1===t.data.user_email_confirmed?{accountExists:!0}:{sessionId:t.data.session_id,userId:t.data.user_id,email:t.data.email};throw new Error("Unknown error occurred during registration")},loginUser=async(e,t)=>{var a=new FormData,t=(a.append("email",e),a.append("password",t),await fetch(DOBOARD_API_URL+"/user_authorize",{method:"POST",body:a}));if(!t.ok)throw new Error("Authorization failed");a=await t.json();if(!a||!a.data)throw new Error("Invalid response from server");if("FAILED"===a.data.operation_status)throw new Error(a.data.operation_message);if("SUCCESS"===a.data.operation_status)return{sessionId:a.data.session_id,userId:a.data.user_id,email:e};throw new Error("Unknown error occurred during registration")},getTasksDoboard=async(e,t,a,o,s)=>{var i=new FormData,e=(i.append("project_token",e),i.append("session_id",t),i.append("project_id",o),i.append("status","ACTIVE"),s&&i.append("user_id",s),await fetch(DOBOARD_API_URL+"/"+a+"/task_get",{method:"POST",body:i}));if(!e.ok)throw new Error("Getting tasks failed");t=await e.json();if(!t||!t.data)throw new Error("Invalid response from server");if("FAILED"===t.data.operation_status)throw new Error(t.data.operation_message);if("SUCCESS"===t.data.operation_status)return t.data.tasks.map(e=>({taskId:e.task_id,taskTitle:e.name,taskLastUpdate:e.updated,taskCreated:e.created,taskCreatorTaskUser:e.creator_user_id,taskMeta:e.meta}));throw new Error("Unknown error occurred during getting tasks")},getTaskCommentsDoboard=async(e,t,a,o,s="ACTIVE")=>{a=await fetch(DOBOARD_API_URL+"/"+a+"/comment_get?session_id="+t+"&status="+s+"&task_id="+e+"&project_token="+o,{method:"GET"});if(!a.ok)throw new Error("Getting logs failed");t=await a.json();if(!t||!t.data)throw new Error("Invalid response from server");if("FAILED"===t.data.operation_status)throw new Error(t.data.operation_message);if("SUCCESS"===t.data.operation_status)return t.data.comments.map(e=>({commentId:e.comment_id,userId:e.user_id,comment:e.comment,commentBody:e.comment_text,commentDate:e.updated,status:e.status,issueTitle:e.task_name}));throw new Error("Unknown error occurred during getting comments")},getUserDoboard=async(e,t,a)=>{a=await fetch(DOBOARD_API_URL+"/"+a+"/user_get?session_id="+e+"&project_token="+t,{method:"GET"});if(!a.ok)throw new Error("Getting user failed");e=await a.json();if(!e)throw new Error("Invalid response from server");if(e.data&&e.data.operation_status){if("FAILED"===e.data.operation_status)throw new Error(e.data.operation_message);if("SUCCESS"===e.data.operation_status)return Array.isArray(e.data.users)?e.data.users:[]}if(e.operation_status){if("FAILED"===e.operation_status)throw new Error(e.operation_message);if("SUCCESS"===e.operation_status)return Array.isArray(e.users)?e.users:[]}throw new Error("Unknown error occurred during getting user")},userUpdateDoboard=async(e,t,a,o,s)=>{t=await fetch(DOBOARD_API_URL+"/"+t+"/user_update?session_id="+a+"&project_token="+e+"&user_id="+o+"&timezone="+s,{method:"GET"});if(!t.ok)throw new Error("User update failed");a=await t.json();if(!a||!a.data)throw new Error("Invalid response from server");if("FAILED"===a.data.operation_status)throw new Error(a.data.operation_message);if("SUCCESS"===a.data.operation_status)return{success:!0};throw new Error("Unknown error occurred during user update")};async function getTaskFullDetails(e,t){var a=localStorage.getItem("spotfix_session_id"),o=await getTaskCommentsDoboard(t,a,e.accountId,e.projectToken);let s=await getUserDoboard(a,e.projectToken,e.accountId),i=0<o.length?o[0]:null,r=null,d=(i&&s&&0<s.length&&(r=s.find(e=>String(e.user_id)===String(i.userId))),"");return i&&((a=formatDate(i.commentDate)).date,d=a.time),{taskId:t,taskAuthorAvatarImgSrc:getAvatarSrc(r),taskAuthorName:getAuthorName(r),lastMessageText:i?i.commentBody:"No messages yet",lastMessageTime:d,issueTitle:0<o.length?o[0].issueTitle:"No Title",issueComments:o.sort((e,t)=>new Date(e.commentDate)-new Date(t.commentDate)).map(t=>{var{date:e,time:a}=formatDate(t.commentDate);let o=null;return{commentAuthorAvatarSrc:getAvatarSrc(o=s&&0<s.length?s.find(e=>String(e.user_id)===String(t.userId)):o),commentAuthorName:getAuthorName(o),commentBody:t.commentBody,commentDate:e,commentTime:a,commentUserId:t.userId||"Unknown User"}})}}async function handleCreateTask(e,t){try{var a=await createTaskDoboard(e,t);return a&&a.taskId&&t.taskDescription&&await addTaskComment({projectToken:t.projectToken,accountId:t.accountId},a.taskId,t.taskDescription),a}catch(e){throw e}}async function addTaskComment(e,t,a){var o=localStorage.getItem("spotfix_session_id");if(!o)throw new Error("No session");if(e.projectToken&&e.accountId)return createTaskCommentDoboard(e.accountId,o,t,a,e.projectToken);throw new Error("Missing params")}function getUserTasks(e){var t,a,o;return localStorage.getItem("spotfix_session_id")?(t=e.projectToken,a=localStorage.getItem("spotfix_session_id"),o=localStorage.getItem("spotfix_user_id"),getTasksDoboard(t,a,e.accountId,e.projectId,o)):{}}async function getAllTasks(e){var t,a;return localStorage.getItem("spotfix_session_id")?(t=e.projectToken,a=localStorage.getItem("spotfix_session_id"),(await getTasksDoboard(t,a,e.accountId,e.projectId)).filter(e=>e.taskMeta)):{}}function formatDate(e){if(!e)return{date:"",time:""};let t;return t=!e.includes("T")&&e.includes(" ")?new Date(e.replace(" ","T")):new Date(e),isNaN(t.getTime())?{date:"",time:""}:(e=t.getTimezoneOffset(),{date:["January","February","March","April","May","June","July","August","September","October","November","December"][(e=new Date(t.getTime()-6e4*e)).getMonth()]+" "+e.getDate(),time:e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")})}function getTaskAuthorDetails(e,t){localStorage.getItem("spotfix_session_id");var a=[{taskId:"1",taskAuthorAvatarImgSrc:"https://s3.eu-central-1.amazonaws.com/cleantalk-ctask-atts/accounts/1/avatars/081a1b65d20fe318/m.jpg",taskAuthorName:"Test All Issues Single Author Name"}].find(e=>e.taskId===t);return void 0===a?{taskId:null,taskAuthorAvatarImgSrc:null,taskAuthorName:"Task Author"}:a}function getIssuesCounterString(e,t){return`(${e}/${t})`}function getAvatarSrc(e){if(e&&e.avatar){if("object"==typeof e.avatar&&e.avatar.m)return e.avatar.m;if("string"==typeof e.avatar)return e.avatar}return null}function getAuthorName(e){if(e){if(e.name&&0<e.name.trim().length)return e.name;if(e.email&&0<e.email.trim().length)return e.email}return"Unknown Author"}function registerUser(e){var t=e.userEmail,a=e.userName;let o=e.projectToken,s=e.accountId;return registerUserDoboard(o,s,t,a).then(e=>{if(e.accountExists)document.querySelector(".doboard_task_widget-accordion>.doboard_task_widget-input-container").innerText="Account already exists. Please, login usin your password.",document.querySelector(".doboard_task_widget-accordion>.doboard_task_widget-input-container.hidden").classList.remove("hidden"),document.getElementById("doboard_task_widget-user_password").focus();else{if(!e.sessionId)throw new Error("Session ID not found in response");localStorage.setItem("spotfix_session_id",e.sessionId),localStorage.setItem("spotfix_user_id",e.userId),localStorage.setItem("spotfix_email",e.email),userUpdate(o,s)}}).catch(e=>{throw e})}function userUpdate(e,t){var a=localStorage.getItem("spotfix_session_id"),o=localStorage.getItem("spotfix_user_id"),s=Intl.DateTimeFormat().resolvedOptions().timeZone;return userUpdateDoboard(e,t,a,o,s)}class CleanTalkWidgetDoboard{selectedText="";selectedData={};widgetElement=null;params={};currentActiveTaskId=0;savedIssuesQuantityOnPage=0;savedIssuesQuantityAll=0;allTasksData={};constructor(e,t){this.selectedData=e,this.selectedText=e.selectedText,this.init(t)}async init(e){this.params=this.getParams(),this.allTasksData=await getAllTasks(this.params);var t=isAnyTaskUpdated(this.allTasksData);storageSaveTasksUpdateData(this.allTasksData),storageWidgetCloseIsSet()||storageSetWidgetIsClosed(!0),t&&storageSetWidgetIsClosed(!1),this.widgetElement=await this.createWidgetElement(e),this.bindWidgetInputsInteractive()}getParams(){var e=document.querySelector('script[src*="doboard-widget-bundle.min.js"]');if(!e||!e.src)throw new Error("Script not provided");e=new URL(e.src),e=Object.fromEntries(e.searchParams.entries());if(!e)throw new Error("Script params not provided");if(e.projectToken&&e.accountId&&e.projectId)return e;throw new Error("Necessary script params not provided")}bindCreateTaskEvents(){var e=document.getElementById("doboard_task_widget-submit_button");e&&e.addEventListener("click",async()=>{var e=document.getElementById("doboard_task_widget-title"),i=e.value;if(i){var t=document.getElementById("doboard_task_widget-description"),r=t.value;if(r){let t="",a="",o="";var d=document.querySelector(".doboard_task_widget-login");if(d&&d.classList.contains("active")){let e=document.getElementById("doboard_task_widget-user_email");var d=document.getElementById("doboard_task_widget-user_name"),n=document.getElementById("doboard_task_widget-user_password");if(!(a=e.value))return e.style.borderColor="red",e.focus(),void e.addEventListener("input",function(){this.style.borderColor=""});if(e&&d&&!(t=d.value))return d.style.borderColor="red",d.focus(),void d.addEventListener("input",function(){this.style.borderColor=""});if(e&&n&&!d&&!(o=n.value))return n.style.borderColor="red",n.focus(),void n.addEventListener("input",function(){this.style.borderColor=""})}let e=document.getElementById("doboard_task_widget-user_email");a=e.value;d=document.getElementById("doboard_task_widget-submit_button"),n=(d.disabled=!0,d.innerText="Creating spot...",{taskTitle:i,taskDescription:r,selectedData:this.selectedData,projectToken:this.params.projectToken,projectId:this.params.projectId,accountId:this.params.accountId,taskMeta:JSON.stringify(this.selectedData)});a&&(n.userEmail=a),t&&(n.userName=t),o&&(n.userPassword=o);let s;try{s=await this.submitTask(n)}catch(e){return void this.registrationErrorShow(e.message)}d.disabled=!1,d.style.cursor="pointer",s.needToLogin||(void 0!==s.isPublic&&(this.selectedData.isPublic=s.isPublic),this.allTasksData=await getAllTasks(this.params),this.selectedData={},await this.createWidgetElement("all_issues"),hideContainersSpinner(!1))}else t.style.borderColor="red",t.focus(),t.addEventListener("input",function(){this.style.borderColor=""})}else e.style.borderColor="red",e.focus(),e.addEventListener("input",function(){this.style.borderColor=""})})}async createWidgetElement(e,s=!0){var t=document.querySelector(".doboard_task_widget")?document.querySelector(".doboard_task_widget"):document.createElement("div");t.className="doboard_task_widget";let a=t.innerHTML="",i={};switch(e){case"create_issue":a="create_issue",i={selectedText:this.selectedText,currentDomain:document.location.hostname||""},storageGetUserIsDefined()&&storageSetWidgetIsClosed(!1);break;case"wrap":if(storageGetWidgetIsClosed())return;a="wrap";break;case"all_issues":a="all_issues";break;case"concrete_issue":a="concrete_issue",getTaskFullDetails(this.params,this.currentActiveTaskId).then(e=>{var e=e.issueTitle,t=document.querySelector(".doboard_task_widget-issue-title");t&&(t.innerHTML=e)}),i={issueTitle:"...",issuesCounter:getIssuesCounterString(this.savedIssuesQuantityOnPage,this.savedIssuesQuantityAll),paperclipImgSrc:"/spotfix/img/send-message--paperclip.svg",sendButtonImgSrc:"/spotfix/img/send-message--button.svg",msgFieldBackgroundImgSrc:"/spotfix/img/send-message--input-background.svg"}}switch(t.innerHTML=Templater.loadTemplate(a,i),document.body.appendChild(t),e){case"create_issue":this.bindCreateTaskEvents();break;case"wrap":await this.getTaskCount(),document.querySelector(".doboard_task_widget-wrap").addEventListener("click",e=>{e=e.currentTarget.classList;e&&!e.contains("hidden")&&this.createWidgetElement("all_issues")}),hideContainersSpinner(!1);break;case"all_issues":this.removeTextSelection();let o=0;var r=this.allTasksData,d=[];if(0<r.length){document.querySelector(".doboard_task_widget-all_issues-container").innerHTML="";for(let e=0;e<r.length;e++){var n=r[e],l=n.taskId,c=n.taskTitle,g=n.taskMeta,n=formatDate(n.taskLastUpdate).time,g=g?JSON.parse(g):null,u=g?g.pageURL:"",_=g?g.nodePath:"";let t="",a="Task publicity is unknown";if(g&&void 0!==g.isPublic&&(a=g.isPublic?(t="/spotfix/img/public.svg","The task is public"):(t="/spotfix/img/private.svg","The task is private and visible only for registered DoBoard users")),!s||u===window.location.href){o++;var u=await getTaskFullDetails(this.params,l),p=getAvatarData(u);let e={taskTitle:c||"",taskAuthorAvatarImgSrc:u.taskAuthorAvatarImgSrc,taskAuthorName:u.taskAuthorName,taskPublicStatusImgSrc:t,taskPublicStatusHint:a,taskLastMessage:u.lastMessageText,taskLastUpdate:n,nodePath:_,taskId:l,avatarCSSClass:p.avatarCSSClass,avatarStyle:p.avatarStyle,taskAuthorInitials:p.taskAuthorInitials,initialsClass:p.initialsClass};document.querySelector(".doboard_task_widget-all_issues-container").innerHTML+=Templater.loadTemplate("list_issues",e),d.push(g)}}this.savedIssuesQuantityOnPage=o,this.savedIssuesQuantityAll=r.length,this.highlightElements(d),document.querySelector(".doboard_task_widget-header span").innerText+=" "+getIssuesCounterString(this.savedIssuesQuantityOnPage,this.savedIssuesQuantityAll)}0!==r.length&&0!==o||(document.querySelector(".doboard_task_widget-all_issues-container").innerHTML='<div class="doboard_task_widget-issues_list_empty">The issues list is empty</div>'),this.bindIssuesClick(),hideContainersSpinner(!1);break;case"concrete_issue":var m=await getTaskFullDetails(this.params,this.currentActiveTaskId),w=(i={issueTitle:m.issueTitle,issueComments:m.issueComments,issuesCounter:getIssuesCounterString(),chevronBackTitle:"Back to all spots"},document.querySelector(".doboard_task_widget-concrete_issues-container")),b=[],k=localStorage.getItem("spotfix_user_id");if(0<m.issueComments.length){w.innerHTML="";for(var h of m.issueComments){(f=Number(k)===Number(h.commentUserId))||storageSetWidgetIsClosed(!1);var A=getAvatarData({taskAuthorAvatarImgSrc:h.commentAuthorAvatarSrc,taskAuthorName:h.commentAuthorName,userIsIssuer:f}),f={commentAuthorName:h.commentAuthorName,commentBody:h.commentBody,commentDate:h.commentDate,commentTime:h.commentTime,issueTitle:i.issueTitle,issuesCounter:i.issuesCounter,commentContainerBackgroundSrc:f?"/spotfix/img/comment-self-background.png":"/spotfix/img/comment-other-background.png",avatarCSSClass:A.avatarCSSClass,avatarStyle:A.avatarStyle,taskAuthorInitials:A.taskAuthorInitials,initialsClass:A.initialsClass};void 0===b[h.commentDate]&&(b[h.commentDate]=[]),b[h.commentDate].push(f)}let t="";for(var v in b){var x,I=b[v];let e="";for(x in I.sort((e,t)=>e.commentTime.localeCompare(t.commentTime)),I){var y=I[x];e+=Templater.loadTemplate("concrete_issue_messages",y)}t+=Templater.loadTemplate("concrete_issue_day_content",{dayContentMonthDay:v,dayContentMessages:e})}w.innerHTML=t}else w.innerHTML="No comments";setTimeout(()=>{var e=document.querySelector(".doboard_task_widget-content");e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},0);let a=document.querySelector(".doboard_task_widget-send_message form");a&&a.addEventListener("submit",async e=>{e.preventDefault();var e=a.querySelector(".doboard_task_widget-send_message_input"),t=e.value.trim();if(t){e.disabled=!0;try{await addTaskComment(this.params,this.currentActiveTaskId,t),e.value="",await this.createWidgetElement("concrete_issue"),hideContainersSpinner(!1)}catch(e){alert("Error when adding a comment: "+e.message)}e.disabled=!1}})}e=document.querySelector(".doboard_task_widget_return_to_all");let o=this;e&&e.addEventListener("click",function(e,t=o){t.createWidgetElement("all_issues")});e=document.querySelector(".doboard_task_widget-send_message_paperclip");return e&&e.addEventListener("click",function(e){e.preventDefault(),alert("This action is not implemented yet..")}),document.querySelector(".doboard_task_widget-close_btn")?.addEventListener("click",()=>{this.hide()}),document.querySelector("#doboard_task_widget-task_count")?.addEventListener("click",()=>{document.querySelector(".doboard_task_widget-wrap").classList.add("hidden"),storageSetWidgetIsClosed(!0)}),t}bindIssuesClick(){document.querySelectorAll(".issue-item").forEach(t=>{t.addEventListener("click",async()=>{scrollToNodePath(JSON.parse(t.getAttribute("data-node-path"))),this.currentActiveTaskId=t.getAttribute("data-task-id"),await this.createWidgetElement("concrete_issue");var e=this.getTaskHighlightData(this.currentActiveTaskId);e&&(this.removeTextSelection(),this.highlightElements([e])),hideContainersSpinner(!1)})})}async getTaskCount(){if(!localStorage.getItem("spotfix_session_id"))return{};var e=this.params.projectToken,t=localStorage.getItem("spotfix_session_id"),e=(await getTasksDoboard(e,t,this.params.accountId,this.params.projectId)).filter(e=>e.taskMeta),t=document.getElementById("doboard_task_widget-task_count");t&&(t.innerText=e.length,t.classList.remove("hidden"))}async submitTask(e){localStorage.getItem("spotfix_session_id")||(await registerUser(e),e.userPassword&&await this.loginUser(e));var t=localStorage.getItem("spotfix_session_id");return t?handleCreateTask(t,e):{needToLogin:!0}}loginUser(e){var t=e.userEmail,e=e.userPassword;return loginUser(t,e).then(e=>{if(!e.sessionId)throw new Error("Session ID not found in response");localStorage.setItem("spotfix_session_id",e.sessionId),localStorage.setItem("spotfix_user_id",e.userId),localStorage.setItem("spotfix_email",e.email)}).catch(e=>{throw e})}hide(){this.removeTextSelection(),this.createWidgetElement("wrap")}removeTextSelection(){var e=document.querySelectorAll(".doboard_task_widget-text_selection");let a=new Set;e.forEach(e=>{var t=e.parentNode;for(a.add(t);e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}),a.forEach(e=>e.normalize())}wrapElementWithSpotfixHighlight(e){var t=e.cloneNode(),a=document.createElement("span");return a.className="doboard_task_widget-text_selection image-highlight",e.insertAdjacentElement("beforebegin",a),a.appendChild(t),a}getTaskHighlightData(t){var e=this.allTasksData.find(e=>e.taskId.toString()===t.toString());if(e&&void 0!==e.taskMeta){e=JSON.parse(e.taskMeta);if(null!==e&&"object"==typeof e)return e}return null}highlightElements(e){if(0!==e.length){let a=new Map;e.forEach(e=>{var t=retrieveNodeFromPath(e.nodePath);t&&(a.has(t)||a.set(t,[]),a.get(t).push(e))}),a.forEach((e,t)=>{var a=e[0].isTagOfImageType;!1!==a&&"IMG"===a&&(a=this.wrapElementWithSpotfixHighlight(t),t.replaceWith(a));let o=t.textContent,s=[],i=(e.forEach(e=>{e.isWholeTagSelected?(s.push({position:0,type:"start"}),s.push({position:o.length,type:"end"})):(s.push({position:e.startSelectPosition,type:"start"}),s.push({position:e.endSelectPosition,type:"end"}))}),s.sort((e,t)=>t.position-e.position),o);s.forEach(e=>{var t="start"===e.type?'<span class="doboard_task_widget-text_selection">':"</span>";i=i.slice(0,e.position)+t+i.slice(e.position)}),t.innerHTML=i})}}bindWidgetInputsInteractive(){document.querySelectorAll(".doboard_task_widget-field").forEach(e=>{e.value&&e.classList.add("has-value"),e.addEventListener("input",()=>{e.value?e.classList.add("has-value"):e.classList.remove("has-value")}),e.addEventListener("blur",()=>{e.value||e.classList.remove("has-value")})});var e=document.querySelector(".doboard_task_widget-login span");e&&e.addEventListener("click",function(){this.closest(".doboard_task_widget-login").classList.toggle("active")})}registrationErrorShow(e){var t=document.getElementById("doboard_task_widget-error_message"),a=document.querySelector(".doboard_task_widget-error_message-wrapper");"string"==typeof e&&null!==t&&null!==a&&(t.innerText=e,a.classList.remove("hidden"))}}var widgetTimeout=null;function openWidget(e,t,a){e&&!t&&new CleanTalkWidgetDoboard(e,a)}function taskAnalysis(e){return retrieveNodeFromPath(e?e.nodePath:"")}function scrollToNodePath(e){e=retrieveNodeFromPath(e);return!(!e||!e.scrollIntoView||(e.scrollIntoView({behavior:"smooth",block:"center"}),0))}function hideContainersSpinner(){var t=document.getElementsByClassName("doboard_task_widget-spinner_wrapper_for_containers");if(0<t.length)for(let e=0;e<t.length;e++)t[e].style.display="none";var a=["doboard_task_widget-all_issues-container","doboard_task_widget-concrete_issues-container"];for(let e=0;e<a.length;e++){var o=document.getElementsByClassName(a[e]);if(0<o.length)for(let e=0;e<o.length;e++)o[e].style.display="block"}}function getAvatarData(e){let t,a;e.hasOwnProperty("userIsIssuer")&&e.userIsIssuer;let o="doboard_task_widget-avatar-initials";return a=(t=null===e.taskAuthorAvatarImgSrc?"background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAE9GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4wLWMwMDAgNzkuMTcxYzI3ZmFiLCAyMDIyLzA4LzE2LTIyOjM1OjQxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjQuMCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjQtMDQtMTBUMTk6MDg6MDkrMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDI0LTA0LTEwVDE5OjIxOjA4KzA1OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDI0LTA0LTEwVDE5OjIxOjA4KzA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxNWRjOWI0Yy04ZWVmLTRkNTEtYmE0MS1kOTkzZTZmNjNmMTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTVkYzliNGMt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');":`background-image:url('${e.taskAuthorAvatarImgSrc}');`,"doboard_task_widget-avatar_container"),o+=" doboard_task_widget-hidden_element",{avatarStyle:t,avatarCSSClass:a,taskAuthorInitials:void 0,initialsClass:o}}function isAnyTaskUpdated(e){let t=!1;for(var a in e){a=e[a];if(a.taskId&&a.taskLastUpdate&&(t=storageCheckTaskUpdate(a.taskId,a.taskLastUpdate)))break}return t}function getSelectedImage(e){if(e&&0!==e.rangeCount&&!e.isCollapsed){let t=e.getRangeAt(0);if(t.startContainer===t.endContainer&&t.startContainer.nodeType===Node.ELEMENT_NODE&&"IMG"===t.startContainer.tagName)return t.startContainer;e=document.createTreeWalker(t.commonAncestorContainer,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){return"IMG"===e.tagName&&isElementInRange(e,t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}).nextNode();if(e)return e;var a,e=getElementFromNode(t.startContainer),o=getElementFromNode(t.endContainer);if(e&&"IMG"===e.tagName&&isElementPartiallySelected(e,t))return e;if(o&&"IMG"===o.tagName&&isElementPartiallySelected(o,t))return o;for(a of findNearbyElements(t))if("IMG"===a.tagName)return a}return null}function isElementInRange(e,t){var a=document.createRange();return a.selectNode(e),t.compareBoundaryPoints(Range.START_TO_START,a)<=0&&0<=t.compareBoundaryPoints(Range.END_TO_END,a)}function isElementPartiallySelected(e,t){e=e.getBoundingClientRect(),t=t.getBoundingClientRect();return!(e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function getElementFromNode(e){return e.nodeType===Node.ELEMENT_NODE?e:e.parentElement}function findNearbyElements(t){var a=[],e=t.commonAncestorContainer,o=e.previousElementSibling,s=e.nextElementSibling;if(o&&a.push(o),s&&a.push(s),e.nodeType===Node.ELEMENT_NODE){var i=e.children;for(let e=0;e<i.length;e++)isElementPartiallySelected(i[e],t)&&a.push(i[e])}return a}function getSelectedData(e){var{anchorOffset:t,focusOffset:a}=e;let o=e.toString(),s=!1;var i=getSelectedImage(e),r=window.location.href;if(!o){if(null===i)return createEmptySelectionData(r);o=`${i.tagName.toUpperCase()} ${e.anchorNode.offsetHeight.toString()} * `+e.anchorNode.offsetWidth.toString(),s=i.tagName}var d=0===t&&0===a&&0<o.length,e=determineTargetNode(e,d,s,i);return{startSelectPosition:Math.min(t,a),endSelectPosition:Math.max(t,a),selectedText:o,pageURL:r,nodePath:calculateNodePath(e),isTagOfImageType:s,isWholeTagSelected:d}}function determineTargetNode(e,t=!1,a=!1,o=null){var{focusNode:e,anchorNode:s}=e;return t?s.parentElement:a&&o?o:"#text"!==e.nodeName?e:e.parentNode}function calculateNodePath(a){for(var o=[];a;){let e=0,t=a.previousSibling;for(;t;)1===t.nodeType&&e++,t=t.previousSibling;o.unshift(e),a=a.parentNode}return o.shift(),o}function retrieveNodeFromPath(t){if(!t)return null;let a=document;for(let e=0;e<t.length;e++)if(!(a=a.children[t[e]]))return null;return a}function createEmptySelectionData(e){return{startSelectPosition:0,endSelectPosition:0,selectedText:"",pageURL:e,nodePath:"",isWholeTagSelected:!1,isTagOfImageType:!1}}function storageGetWidgetIsClosed(){return"1"===localStorage.getItem("spotfix_widget_is_closed")}function storageWidgetCloseIsSet(){return null!==localStorage.getItem("spotfix_widget_is_closed")}function storageSetWidgetIsClosed(e){localStorage.setItem("spotfix_widget_is_closed",e?"1":"0")}function storageGetUserIsDefined(){return null!==localStorage.getItem("spotfix_user_id")}function storageSaveTasksUpdateData(e){if(e&&Array.isArray(e)){let t=JSON.parse(localStorage.getItem("tasks")||"{}");e.forEach(e=>{e.taskId&&e.taskLastUpdate&&(t[e.taskId]={taskId:e.taskId,taskLastUpdate:e.taskLastUpdate})}),localStorage.setItem("spotfix_task_updates",JSON.stringify(t))}}function storageCheckTaskUpdate(e,t){return e&&t?!!(e=JSON.parse(localStorage.getItem("spotfix_task_updates")||"{}")[e])&&new Date(e.taskLastUpdate)<new Date(t):null}document.addEventListener("DOMContentLoaded",()=>{new SourcesLoader,new CleanTalkWidgetDoboard({},"wrap")}),document.addEventListener("selectionchange",function(e){widgetTimeout&&clearTimeout(widgetTimeout),widgetTimeout=setTimeout(()=>{var e=window.getSelection();"Range"===e.type&&openWidget(getSelectedData(e),document.querySelector(".doboard_task_widget-container"),"create_issue")},1e3)});class Templater{static loadTemplate(e,t){var a,o,s=this[e];if("function"!=typeof s)throw new Error(`Template method '${e}' not found`);let i=s.call(this);for([a,o]of Object.entries(t)){var r=`{{${a}}}`;i=i.replaceAll(r,o)}return i}static all_issues(){return`<div class="doboard_task_widget-container">
    <div class="doboard_task_widget-header">
        <div style="display: flex;align-items: center;gap: 8px;">
            <img src="/spotfix/img/white-logo-doboard.svg"  alt="">
            <span>All spots</span>
        </div>
        <img src="/spotfix/img/close.svg"  alt="" class="doboard_task_widget-close_btn doboard_task_widget_cursor-pointer">
    </div>
    <div class="doboard_task_widget-content doboard_task_widget-all_issues">
        <div class="doboard_task_widget-spinner_wrapper_for_containers">
            <div class="doboard_task_widget-spinner_for_containers"></div>
        </div>
        <div class="doboard_task_widget-all_issues-container">
        </div>
    </div>
</div>`}static concrete_issue(){return`<div class="doboard_task_widget-container">
    <div class="doboard_task_widget-header">
        <div class="doboard_task_widget_return_to_all doboard_task_widget_cursor-pointer">
            <img src="/spotfix/img/chevron-back.svg" alt="" title="{{chevronBackTitle}}">
            <span title="Return to all spots list"> All {{issuesCounter}}</span>
        </div>
        <div class="doboard_task_widget-issue-title">{{issueTitle}}</div>
        <img src="/spotfix/img/close.svg"  alt="" class="doboard_task_widget-close_btn doboard_task_widget_cursor-pointer">
    </div>
    <div class="doboard_task_widget-content doboard_task_widget-all_issues">
        <div class="doboard_task_widget-spinner_wrapper_for_containers">
            <div class="doboard_task_widget-spinner_for_containers"></div>
        </div>
        <div class="doboard_task_widget-concrete_issues-container">
        </div>
        <div class="doboard_task_widget-send_message">
            <form>
                <div class="doboard_task_widget-send_message_elements_wrapper">
                <button type="button" class="doboard_task_widget-send_message_paperclip">
                    <img src="{{paperclipImgSrc}}" alt="Attach a file" title="Attach a file">
                </button>

                <div class="doboard_task_widget-send_message_input_wrapper">
                    <img class="doboard_task_widget-send_message_input-icon" src="{{msgFieldBackgroundImgSrc}}" alt="" title="">
                    <input type="text" class="doboard_task_widget-send_message_input" placeholder="Write a message...">
                </div>

                <button type="submit" class="doboard_task_widget-send_message_button">
                    <img src="{{sendButtonImgSrc}}" alt="Send message" title="Send message">
                </button>
                </div>
            </form>
        </div>
    </div>
</div>
`}static concrete_issue_day_content(){return`<div class="doboard_task_widget-concrete_issue-day_content">
    <div class="doboard_task_widget-concrete_issue_day_content-month_day">{{dayContentMonthDay}}</div>
    <div class="doboard_task_widget-concrete_issue_day_content-messages_wrapper">{{dayContentMessages}}</div>
</div>
`}static concrete_issue_messages(){return`<div class="doboard_task_widget-comment_data_wrapper">
    <div class="{{avatarCSSClass}}" style="{{avatarStyle}}">
        <span class="doboard_task_widget-avatar-initials {{initialsClass}}">{{taskAuthorInitials}}</span>
    </div>
    <div class="doboard_task_widget-comment_text_container">
        <img src="{{commentContainerBackgroundSrc}}" alt="">
        <div class="doboard_task_widget-comment_body">{{commentBody}}</div>
        <div class="doboard_task_widget-comment_time">{{commentTime}}</div>
    </div>
</div>

`}static create_issue(){return`<div class="doboard_task_widget-container">
    <div class="doboard_task_widget-header">
        <div style="display: flex;align-items: center;gap: 8px;">
            <img src="/spotfix/img/white-logo-doboard.svg"  alt="">
            <span>Report an issue</span>
        </div>
        <img src="/spotfix/img/close.svg"  alt="" class="doboard_task_widget-close_btn doboard_task_widget_cursor-pointer">
    </div>
    <div class="doboard_task_widget-content">

        <div class="doboard_task_widget-element-container">
            <span>
                If you found issue with <span style="color: #000000;">{{currentDomain}}</span> page, you are in right place. Please use this form to tell us about the issue you’re experiencing.
                <a href="https://doboard.com" target="_blank">doboard.com</a>
            </span>
        </div>

        <div class="doboard_task_widget-input-container">
            <input id="doboard_task_widget-title" class="doboard_task_widget-field" name="title" value="{{selectedText}}" required>
            <label for="doboard_task_widget-title">Report about</label>
        </div>

        <div class="doboard_task_widget-input-container">
            <textarea id="doboard_task_widget-description" class="doboard_task_widget-field" name="description" required></textarea>
            <label for="doboard_task_widget-description">Description</label>
        </div>

        <div class="doboard_task_widget-login">

            <span>If you want to receive notifications by email write here you email contacts.</span>

            <div class="doboard_task_widget-accordion">

                <div class="doboard_task_widget-input-container">
                    <input id="doboard_task_widget-user_name" class="doboard_task_widget-field" type="text" name="user_name">
                    <label for="doboard_task_widget-user_name">Nickname</label>
                </div>

                <div class="doboard_task_widget-input-container">
                    <input id="doboard_task_widget-user_email" class="doboard_task_widget-field" type="email" name="user_email">
                    <label for="doboard_task_widget-user_email">Email</label>
                </div>

                <div class="doboard_task_widget-input-container hidden">
                    <input id="doboard_task_widget-user_password" class="doboard_task_widget-field" type="password" name="user_password">
                    <label for="doboard_task_widget-user_password">Password</label>
                </div>

                <i>Note about DoBoard register and accepting email notifications about tasks have to be here.</i>

            </div>

        </div>

        <div class="doboard_task_widget-field">
            <button id="doboard_task_widget-submit_button" class="doboard_task_widget-submit_button">Submit</button>
        </div>

        <div class="doboard_task_widget-error_message-wrapper hidden">
            <span id="doboard_task_widget-error_message-header">Registration error</span>
            <div id="doboard_task_widget-error_message"></div>
        </div>
    </div>
</div>
`}static list_issues(){return`<div class="doboard_task_widget-task_row issue-item" data-node-path='[{{nodePath}}]' data-task-id='{{taskId}}'>
    <div class="{{avatarCSSClass}}" style="{{avatarStyle}}">
        <span class="doboard_task_widget-avatar-initials {{initialsClass}}">{{taskAuthorInitials}}</span>
    </div>
    <div class="doboard_task_widget-description_container">
        <div class="doboard_task_widget-task_title">
            <div class="doboard_task_widget-task_title-details">
                <span class="doboard_task_widget-task_title-text">{{taskTitle}}</span>
                <div class="doboard_task_widget-task_title_public_status_img">
                    <img src="{{taskPublicStatusImgSrc}}" alt="" title="{{taskPublicStatusHint}}">
                </div>
            </div>
            <div class="doboard_task_widget-task_title-last_update_time">{{taskLastUpdate}}</div>
        </div>
        <div class="doboard_task_widget-task_last_message">
            <span>{{taskLastMessage}}</span>
        </div>
    </div>
</div>
`}static wrap(){return`<div class="doboard_task_widget-wrap">
    <img src="/spotfix/img/doboard-widget-logo.svg" alt="Doboard logo">
    <div id="doboard_task_widget-task_count" class="hidden"></div>
</div>
`}}class SourcesLoader{constructor(){this.loadAll()}loadAll(){this.loadFonts(),this.loadCSS()}loadFonts(){var e=document.createElement("link"),e=(e.rel="preconnect",e.href="https://fonts.googleapis.com",document.head.appendChild(e),document.createElement("link")),e=(e.rel="preconnect",e.href="https://fonts.gstatic.com",e.crossOrigin="crossorigin",document.head.appendChild(e),document.createElement("link"));e.rel="stylesheet",e.href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap",document.head.appendChild(e)}loadCSS(){var e=document.createElement("style");e.setAttribute("id","spotfix_css"),e.textContent=spotfixCSS,document.head.appendChild(e)}}let spotfixCSS=`
.doboard_task_widget *{font-family:Inter,sans-serif;font-weight:400;font-size:14px;line-height:130%;color:#40484f}.doboard_task_widget-header *{color:#fff}.doboard_task_widget a{text-decoration:underline;color:#2f68b7}.doboard_task_widget a:hover{text-decoration:none}.doboard_task_widget{position:fixed;right:0;bottom:0;margin-bottom:20px;margin-right:70px;z-index:9999;vertical-align:middle;transform:translateZ(0);-webkit-transform:translateZ(0);will-change:transform}.doboard_task_widget_cursor-pointer{cursor:pointer}.doboard_task_widget-container{width:360px;max-height:calc(100vh - 40px);display:flex;flex-direction:column;-moz-flex-direction:column}.doboard_task_widget-header{display:flex;height:41px;min-height:41px;padding:8px 16px;background:#1c7857;border-radius:8px 8px 0 0;justify-content:space-between;align-items:center;color:#fff}.doboard_task_widget-content{flex:1;overflow-y:auto;padding:10px 16px 5px;background:#fff;border-radius:0 0 8px 8px;border:1px #bbc7d1;border-style:none solid solid;box-shadow:0 4px 15px 8px #cacACA40;scrollbar-width:none}.doboard_task_widget-element-container{margin-bottom:30px}.doboard_task_widget-wrap{width:auto;background:0 0;border:none;box-shadow:none;padding:0}.doboard_task_widget-wrap.hidden{display:none}#doboard_task_widget-task_count{position:absolute;top:0;right:0;width:22px;height:22px;opacity:1;background:#ef8b43;border-radius:50%;color:#fff;text-align:center;line-height:22px}#doboard_task_widget-task_count:hover{background:url(../spotfix/img/close-widget.svg) center no-repeat;cursor:pointer;overflow:hidden;font-size:0}#doboard_task_widget-task_count.hidden{width:0;height:0;opacity:0}.doboard_task_widget-input-container{position:relative;margin-bottom:24px}.doboard_task_widget-input-container.hidden{display:none}.doboard_task_widget-input-container .doboard_task_widget-field{padding:0 8px;border-radius:4px;border:1px solid #bbc7d1;outline:0!important;appearance:none;width:100%;height:40px;background:#fff;color:#000;max-width:-webkit-fill-available;max-width:-moz-available}.doboard_task_widget-field:focus{border-color:#2f68b7}.doboard_task_widget-input-container textarea.doboard_task_widget-field{height:94px;padding-top:11px;padding-bottom:11px}.doboard_task_widget-field+label{color:#252a2f;background:#fff;position:absolute;top:20px;left:8px;transform:translateY(-50%);transition:.2s ease-in-out}.doboard_task_widget-field.has-value+label,.doboard_task_widget-field:focus+label{font-size:10px;top:0;left:12px;padding:0 4px;z-index:5}.doboard_task_widget-field:focus+label{color:#2f68b7}.doboard_task_widget-login{background:#f9fbfd;border:1px solid #bbc7d1;border-radius:4px;padding:11px 8px 8px;margin-bottom:40px}.doboard_task_widget-login .doboard_task_widget-accordion{height:0;overflow:hidden;opacity:0;transition:.2s ease-in-out}.doboard_task_widget-login.active .doboard_task_widget-accordion{height:auto;overflow:visible;opacity:1}.doboard_task_widget-login .doboard_task_widget-input-container:last-child{margin-bottom:0}.doboard_task_widget-login span{display:block;position:relative;padding-right:24px;cursor:pointer}.doboard_task_widget-login.active span{margin-bottom:24px}.doboard_task_widget-login span::after{position:absolute;top:0;right:4px;content:"";display:block;width:10px;height:10px;transform:rotate(45deg);border:2px solid #40484f;border-radius:1px;border-top:none;border-left:none;transition:.2s ease-in-out}.doboard_task_widget-login.active span::after{transform:rotate(-135deg);top:7px}.doboard_task_widget-login .doboard_task_widget-field+label,.doboard_task_widget-login .doboard_task_widget-input-container .doboard_task_widget-field{background:#f9fbfd}.doboard_task_widget-submit_button{height:48px;width:100%;margin-bottom:16px;color:#fff;background:#22a475;border:none;border-radius:6px;font-family:Inter,sans-serif;font-weight:700;font-size:16px;line-height:150%;cursor:pointer;transition:.2s ease-in-out}.doboard_task_widget-submit_button:hover{background:#1c7857;color:#fff}.doboard_task_widget-submit_button:disabled{background:rgba(117,148,138,.92);color:#fff;cursor:wait}.doboard_task_widget-issue-title{max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.doboard_task_widget-hidden_element{opacity:0}.doboard_task_widget-error_message-wrapper{background:#fdd;border:1px solid #cf6868;border-radius:4px;padding:8px;margin-bottom:14px;display:grid;justify-items:center}.doboard_task_widget-error_message-wrapper.hidden{display:none}#doboard_task_widget-error_message-header{margin:8px 0;font-weight:600}#doboard_task_widget-error_message{text-align:center}.doboard_task_widget-task_row{display:flex;max-height:55px;padding-bottom:4px;margin-bottom:20px;cursor:pointer;align-items:center;justify-content:space-between}.doboard_task_widget-task_row:last-child{margin-bottom:0}.doboard_task_widget-task-text_bold{font-weight:700}.doboard_task_widget-text_selection{background:rgba(208,213,127,.68)}.doboard_task_widget-text_selection.image-highlight{display:-moz-inline-box;display:inline-flex;border:3px solid rgba(208,213,127,.99);padding:5px;flex-direction:column;-moz-flex-direction:column}.doboard_task_widget-issues_list_empty{text-align:center;margin:20px 0}.doboard_task_widget-avatar_container{height:44px;width:44px;border-radius:50%;background-repeat:no-repeat;background-position:center;background-size:100%}.doboard_task_widget-avatar_placeholder{min-height:44px;min-width:44px;border-radius:50%;font-size:24px;line-height:1.2083333333;padding:0;background:#1c7857;display:inline-grid;align-content:center;justify-content:center}.doboard_task_widget-avatar-initials{color:#fff}.doboard_task_widget-avatar{width:44px;height:44px;border-radius:50%;object-fit:cover}.doboard_task_widget-description_container{height:55px;width:calc(100% - 44px - 8px);border-bottom:1px solid #ebf0f4;display:block;margin-left:8px}.doboard_task_widget-task_row:last-child .doboard_task_widget-description_container{border-bottom:none}.doboard_task_widget-all_issues-container,.doboard_task_widget-concrete_issues-container{overflow:auto;max-height:85vh;display:none}.doboard_task_widget-all_issues-container{scrollbar-width:none}.doboard_task_widget-all_issues-container::-webkit-scrollbar,.doboard_task_widget-all_issues::-webkit-scrollbar,.doboard_task_widget-concrete_issues-container::-webkit-scrollbar,.doboard_task_widget-content::-webkit-scrollbar{width:0}.doboard_task_widget-task_title{font-weight:700;display:flex;justify-content:space-between;align-items:center}.doboard_task_widget-task_title span{font-weight:700;display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.doboard_task_widget-task_title-details{display:flex;max-width:calc(100% - 40px);align-items:center}.doboard_task_widget-task_last_message{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:85%}.doboard_task_widget_return_to_all{display:flex;gap:8px;flex-direction:row;-moz-flex-direction:row;align-content:center;flex-wrap:wrap}.doboard_task_widget-task_title-last_update_time{font-family:Inter,serif;font-weight:400;font-style:normal;font-size:11px;leading-trim:NONE;line-height:100%}.doboard_task_widget-task_title_public_status_img{opacity:50%;margin-left:5px;scale:90%}.doboard_task_widget-description-textarea{resize:none}.doboard_task_widget-switch_row{display:flex;align-items:center;gap:12px;margin:16px 0;justify-content:space-between}.doboard_task_widget-switch-label{font-weight:600;font-size:16px;height:24px;align-content:center}.doboard_task_widget-switch{position:relative;display:inline-block;width:44px;height:24px;flex-shrink:0}.doboard_task_widget-switch input{opacity:0;width:0;height:0}.doboard_task_widget-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;border-radius:24px;transition:.2s}.doboard_task_widget-slider:before{position:absolute;content:"";height:20px;width:20px;left:2px;bottom:2px;background-color:#fff;border-radius:50%;transition:.2s}.doboard_task_widget-switch input:checked+.doboard_task_widget-slider{background-color:#65d4ac}.doboard_task_widget-switch input:checked+.doboard_task_widget-slider:before{transform:translateX(20px)}.doboard_task_widget-switch-img{width:24px;height:24px;flex-shrink:0}.doboard_task_widget-switch-center{display:flex;gap:2px;flex-direction:column;-moz-flex-direction:column;flex:1 1 auto;min-width:0}.doboard_task_widget-switch-desc{display:block;font-size:12px;color:#707a83;margin:0;line-height:1.2;max-width:180px;word-break:break-word}.doboard_task_widget-concrete_issue-day_content{display:flex;flex-direction:column;-moz-flex-direction:column}.doboard_task_widget-concrete_issue_day_content-month_day{text-align:center;font-weight:400;font-size:12px;line-height:100%;padding:8px;opacity:.75}.doboard_task_widget-concrete_issue_day_content-messages_wrapper{display:flex;flex-direction:column;-moz-flex-direction:column}.doboard_task_widget-comment_data_wrapper{display:flex;flex-direction:row;-moz-flex-direction:row;margin-bottom:15px;align-items:flex-end}.doboard_task_widget-comment_text_container{position:relative;width:100%;height:auto;overflow:hidden;margin-left:5px;padding:5px}.doboard_task_widget-comment_text_container img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:fill}.doboard_task_widget-comment_body,.doboard_task_widget-comment_time{position:relative;z-index:1}.doboard_task_widget-comment_body{padding:10px}.doboard_task_widget-comment_time{font-weight:400;font-size:11px;line-height:100%;text-align:right;padding:0 8px 4px 0;opacity:.8}.doboard_task_widget-send_message{padding:10px 0 4px;border-top:1px solid #bbc7d1;position:sticky;background:#fff;bottom:0;z-index:4}.doboard_task_widget-send_message_elements_wrapper{display:flex;flex-direction:row;-moz-flex-direction:row;align-content:center;flex-wrap:wrap;justify-content:space-evenly}.doboard_task_widget-send_message_input_wrapper{position:relative;display:inline-grid;align-items:center;justify-items:center}.doboard_task_widget-send_message_input-icon{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:0}.doboard_task_widget-send_message_input_wrapper input{width:90%;position:relative;border:none;background:0 0;z-index:1;overflow-wrap:break-word}.doboard_task_widget-send_message_input_wrapper input:focus{border-color:#007bff;outline:0}.doboard_task_widget-send_message_input_wrapper input:focus+.input-icon{color:#007bff}.doboard_task_widget-send_message_button,.doboard_task_widget-send_message_paperclip{display:inline-grid;border:none;background:0 0;cursor:pointer;padding:0;align-items:center}.doboard_task_widget-send_message_button:hover,.doboard_task_widget-send_message_paperclip:hover rect{fill:#45a049}.doboard_task_widget-send_message_button:active,.doboard_task_widget-send_message_paperclip:active{transform:scale(.98)}.doboard_task_widget-spinner_wrapper_for_containers{display:flex;justify-content:center;align-items:center;min-height:60px;width:100%}.doboard_task_widget-spinner_for_containers{width:40px;height:40px;border-radius:50%;background:conic-gradient(transparent,#1c7857);mask:radial-gradient(farthest-side,transparent calc(100% - 4px),#fff 0);animation:1s linear infinite spin}@keyframes spin{to{transform:rotate(1turn)}}@media (max-width:480px){.doboard_task_widget{position:fixed;right:0;top:auto;bottom:0;margin:0 20px 20px;box-sizing:border-box;transform:translateZ(0);-moz-transform:translateZ(0);will-change:transform}.doboard_task_widget-container{width:100%;max-width:290px;margin:0 auto;max-height:calc(100vh - 40px)}.doboard_task_widget-content{height:auto;max-height:none;scrollbar-width:none}.doboard_task_widget-content::-webkit-scrollbar{display:none}}@supports (-webkit-overflow-scrolling:touch){.doboard_task_widget{position:fixed}}
`;
//# sourceMappingURL=doboard-widget-bundle.min.js.map
